"use strict";(()=>{var e={};e.id=2308,e.ids=[2308],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},41808:e=>{e.exports=require("net")},77282:e=>{e.exports=require("process")},12781:e=>{e.exports=require("stream")},71576:e=>{e.exports=require("string_decoder")},39512:e=>{e.exports=require("timers")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},32734:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>u,HEAD:()=>l});var o=r(49303),n=r(88716),a=r(60670),i=r(87070),p=r(8852);async function u(e,{params:t}){try{let e=parseInt(t.id);if(isNaN(e))return i.NextResponse.json({error:"Invalid developer ID"},{status:400});let r=await (0,p.B5)();try{let[t]=await r.execute("SELECT id, name FROM developers WHERE id = ?",[e]);if(0===t.length)return i.NextResponse.json({error:"Developer not found"},{status:404});let[s]=await r.execute(`SELECT 
          id,
          name,
          description,
          location,
          price,
          type,
          status,
          images,
          completionDate,
          createdAt,
          updatedAt,
          developer_id
        FROM projects 
        WHERE developer_id = ?
        ORDER BY createdAt DESC`,[e]),o=s.map(e=>({...e,images:e.images?JSON.parse(e.images):[],price:Number(e.price)||0,completionDate:e.completionDate?new Date(e.completionDate).toISOString():null,createdAt:new Date(e.createdAt).toISOString(),updatedAt:new Date(e.updatedAt).toISOString()})),n={totalProjects:o.length,activeProjects:o.filter(e=>"active"===e.status).length,completedProjects:o.filter(e=>"completed"===e.status).length,upcomingProjects:o.filter(e=>"upcoming"===e.status).length,onHoldProjects:o.filter(e=>"on-hold"===e.status).length,totalValue:o.reduce((e,t)=>e+(t.price||0),0),averagePrice:o.length>0?o.reduce((e,t)=>e+(t.price||0),0)/o.length:0};return i.NextResponse.json({success:!0,developer:t[0],projects:o,stats:n,message:`Found ${o.length} projects for developer ${t[0].name}`})}finally{r.release()}}catch(e){return i.NextResponse.json({error:"Failed to fetch developer projects",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(e,{params:t}){try{let e=parseInt(t.id);if(isNaN(e))return new i.NextResponse(null,{status:400});let r=await (0,p.B5)();try{let[t]=await r.execute("SELECT COUNT(*) as count FROM projects WHERE developer_id = ?",[e]),s=t[0]?.count||0;return new i.NextResponse(null,{status:200,headers:{"X-Project-Count":s.toString(),"Content-Type":"application/json"}})}finally{r.release()}}catch(e){return new i.NextResponse(null,{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/developers/[id]/projects/route",pathname:"/api/admin/developers/[id]/projects",filename:"route",bundlePath:"app/api/admin/developers/[id]/projects/route"},resolvedPagePath:"C:\\Users\\Berlin\\Desktop\\sssq-main\\sssq-main\\app\\api\\admin\\developers\\[id]\\projects\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:x}=d,g="/api/admin/developers/[id]/projects/route";function v(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,3785,5802],()=>r(32734));module.exports=s})();