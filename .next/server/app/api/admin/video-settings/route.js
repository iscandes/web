/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/video-settings/route";
exports.ids = ["app/api/admin/video-settings/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fvideo-settings%2Froute&page=%2Fapi%2Fadmin%2Fvideo-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fvideo-settings%2Froute.ts&appDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fvideo-settings%2Froute&page=%2Fapi%2Fadmin%2Fvideo-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fvideo-settings%2Froute.ts&appDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Berlin_Desktop_sssq_main_sssq_main_app_api_admin_video_settings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/video-settings/route.ts */ \"(rsc)/./app/api/admin/video-settings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/video-settings/route\",\n        pathname: \"/api/admin/video-settings\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/video-settings/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Berlin\\\\Desktop\\\\sssq-main\\\\sssq-main\\\\app\\\\api\\\\admin\\\\video-settings\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Berlin_Desktop_sssq_main_sssq_main_app_api_admin_video_settings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/video-settings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnZpZGVvLXNldHRpbmdzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZG1pbiUyRnZpZGVvLXNldHRpbmdzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWRtaW4lMkZ2aWRlby1zZXR0aW5ncyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNCZXJsaW4lNUNEZXNrdG9wJTVDc3NzcS1tYWluJTVDc3NzcS1tYWluJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNCZXJsaW4lNUNEZXNrdG9wJTVDc3NzcS1tYWluJTVDc3NzcS1tYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMyQztBQUN4SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZW1pdW0tY2hvaWNlLXJlYWwtZXN0YXRlLz84ZjE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEJlcmxpblxcXFxEZXNrdG9wXFxcXHNzc3EtbWFpblxcXFxzc3NxLW1haW5cXFxcYXBwXFxcXGFwaVxcXFxhZG1pblxcXFx2aWRlby1zZXR0aW5nc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vdmlkZW8tc2V0dGluZ3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi92aWRlby1zZXR0aW5nc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vdmlkZW8tc2V0dGluZ3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxCZXJsaW5cXFxcRGVza3RvcFxcXFxzc3NxLW1haW5cXFxcc3NzcS1tYWluXFxcXGFwcFxcXFxhcGlcXFxcYWRtaW5cXFxcdmlkZW8tc2V0dGluZ3NcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL3ZpZGVvLXNldHRpbmdzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fvideo-settings%2Froute&page=%2Fapi%2Fadmin%2Fvideo-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fvideo-settings%2Froute.ts&appDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/video-settings/route.ts":
/*!***********************************************!*\
  !*** ./app/api/admin/video-settings/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mysql-database */ \"(rsc)/./lib/mysql-database.ts\");\n\n\n// In-memory fallback storage for when database is not available\nlet fallbackVideoSettings = [\n    {\n        id: 1,\n        video_type: \"youtube\",\n        video_url: null,\n        youtube_url: \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n        title: \"Welcome to Premium Choice Real Estate\",\n        description: \"Discover luxury properties in Dubai with our expert team.\",\n        is_active: true,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }\n];\n// Helper function to check database connectivity\nasync function isDatabaseAvailable() {\n    try {\n        await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(\"SELECT 1\");\n        return true;\n    } catch (error) {\n        console.warn(\"Database not available, using fallback storage:\", error);\n        return false;\n    }\n}\n// Helper function to create video_settings table if it doesn't exist\nasync function createVideoSettingsTable() {\n    try {\n        const createTableQuery = `\n      CREATE TABLE IF NOT EXISTS video_settings (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        video_type ENUM('youtube', 'upload') NOT NULL,\n        video_url VARCHAR(500),\n        youtube_url VARCHAR(500),\n        selected_media_id VARCHAR(50),\n        title VARCHAR(255) NOT NULL,\n        description TEXT,\n        is_active BOOLEAN DEFAULT FALSE,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n      )\n    `;\n        await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(createTableQuery);\n        // Check if table is empty and add default entry\n        const countQuery = \"SELECT COUNT(*) as count FROM video_settings\";\n        const countResult = await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(countQuery);\n        if (countResult[0].count === 0) {\n            const insertDefaultQuery = `\n        INSERT INTO video_settings (video_type, youtube_url, title, description, is_active)\n        VALUES ('youtube', 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', 'Welcome to Premium Choice Real Estate', 'Discover luxury properties in Dubai with our expert team.', true)\n      `;\n            await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(insertDefaultQuery);\n        }\n    } catch (error) {\n        console.error(\"Error creating video_settings table:\", error);\n        throw error;\n    }\n}\nasync function GET() {\n    try {\n        const dbAvailable = await isDatabaseAvailable();\n        if (dbAvailable) {\n            // Create table if it doesn't exist\n            await createVideoSettingsTable();\n            // Get current video settings\n            const rows = await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(\"SELECT * FROM video_settings WHERE is_active = 1 ORDER BY updated_at DESC LIMIT 1\");\n            const settings = rows[0] || null;\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                settings: settings ? {\n                    id: settings.id,\n                    videoType: settings.video_type,\n                    videoUrl: settings.video_url,\n                    youtubeUrl: settings.youtube_url,\n                    selectedMediaId: settings.selected_media_id,\n                    title: settings.title,\n                    description: settings.description,\n                    isActive: Boolean(settings.is_active),\n                    createdAt: settings.created_at,\n                    updatedAt: settings.updated_at\n                } : null\n            });\n        } else {\n            // Use fallback storage\n            const activeSettings = fallbackVideoSettings.find((s)=>s.is_active);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                settings: activeSettings ? {\n                    id: activeSettings.id,\n                    videoType: activeSettings.video_type,\n                    videoUrl: activeSettings.video_url,\n                    youtubeUrl: activeSettings.youtube_url,\n                    selectedMediaId: activeSettings.selected_media_id,\n                    title: activeSettings.title,\n                    description: activeSettings.description,\n                    isActive: Boolean(activeSettings.is_active),\n                    createdAt: activeSettings.created_at,\n                    updatedAt: activeSettings.updated_at\n                } : null\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching video settings:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch video settings\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { videoType, videoUrl, youtubeUrl, selectedMediaId, title, description, isActive } = body;\n        const dbAvailable = await isDatabaseAvailable();\n        if (dbAvailable) {\n            // Create table if it doesn't exist\n            await createVideoSettingsTable();\n            // First, deactivate all existing settings\n            await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(\"UPDATE video_settings SET is_active = 0\");\n            // Insert new settings\n            const result = await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(`INSERT INTO video_settings \n         (video_type, video_url, youtube_url, selected_media_id, title, description, is_active) \n         VALUES (?, ?, ?, ?, ?, ?, ?)`, [\n                videoType,\n                videoUrl || null,\n                youtubeUrl || null,\n                selectedMediaId || null,\n                title,\n                description || null,\n                isActive ? 1 : 0\n            ]);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Video settings saved successfully\",\n                id: result.insertId\n            });\n        } else {\n            // Use fallback storage\n            // Deactivate all existing settings\n            fallbackVideoSettings.forEach((s)=>s.is_active = false);\n            // Add new settings\n            const newId = Math.max(...fallbackVideoSettings.map((s)=>s.id), 0) + 1;\n            const newSettings = {\n                id: newId,\n                video_type: videoType,\n                video_url: videoUrl || null,\n                youtube_url: youtubeUrl || null,\n                selected_media_id: selectedMediaId || null,\n                title,\n                description: description || null,\n                is_active: isActive,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            };\n            fallbackVideoSettings.push(newSettings);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Video settings saved successfully (fallback)\",\n                id: newId\n            });\n        }\n    } catch (error) {\n        console.error(\"Error saving video settings:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to save video settings\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        const body = await request.json();\n        const { id, videoType, videoUrl, youtubeUrl, selectedMediaId, title, description, isActive } = body;\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Video settings ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const dbAvailable = await isDatabaseAvailable();\n        if (dbAvailable) {\n            // Create table if it doesn't exist\n            await createVideoSettingsTable();\n            // If setting this as active, deactivate all others first\n            if (isActive) {\n                await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(\"UPDATE video_settings SET is_active = 0 WHERE id != ?\", [\n                    id\n                ]);\n            }\n            // Update the settings\n            await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(`UPDATE video_settings \n         SET video_type = ?, video_url = ?, youtube_url = ?, selected_media_id = ?, title = ?, description = ?, is_active = ?\n         WHERE id = ?`, [\n                videoType,\n                videoUrl || null,\n                youtubeUrl || null,\n                selectedMediaId || null,\n                title,\n                description || null,\n                isActive ? 1 : 0,\n                id\n            ]);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Video settings updated successfully\"\n            });\n        } else {\n            // Use fallback storage\n            const settingsIndex = fallbackVideoSettings.findIndex((s)=>s.id === parseInt(id));\n            if (settingsIndex === -1) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Video settings not found\"\n                }, {\n                    status: 404\n                });\n            }\n            // If setting this as active, deactivate all others first\n            if (isActive) {\n                fallbackVideoSettings.forEach((s)=>{\n                    if (s.id !== parseInt(id)) s.is_active = false;\n                });\n            }\n            // Update the settings\n            fallbackVideoSettings[settingsIndex] = {\n                ...fallbackVideoSettings[settingsIndex],\n                video_type: videoType,\n                video_url: videoUrl || null,\n                youtube_url: youtubeUrl || null,\n                title,\n                description: description || null,\n                is_active: isActive,\n                updated_at: new Date().toISOString()\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Video settings updated successfully (fallback)\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error updating video settings:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to update video settings\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const id = searchParams.get(\"id\");\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Video settings ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const dbAvailable = await isDatabaseAvailable();\n        if (dbAvailable) {\n            // Create table if it doesn't exist\n            await createVideoSettingsTable();\n            await _lib_mysql_database__WEBPACK_IMPORTED_MODULE_1__.MySQLDatabase.executeQuery(\"DELETE FROM video_settings WHERE id = ?\", [\n                id\n            ]);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Video settings deleted successfully\"\n            });\n        } else {\n            // Use fallback storage\n            const settingsIndex = fallbackVideoSettings.findIndex((s)=>s.id === parseInt(id));\n            if (settingsIndex === -1) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Video settings not found\"\n                }, {\n                    status: 404\n                });\n            }\n            fallbackVideoSettings.splice(settingsIndex, 1);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Video settings deleted successfully (fallback)\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error deleting video settings:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to delete video settings\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL3ZpZGVvLXNldHRpbmdzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNIO0FBZXJELGdFQUFnRTtBQUNoRSxJQUFJRSx3QkFBK0I7SUFDakM7UUFDRUMsSUFBSTtRQUNKQyxZQUFZO1FBQ1pDLFdBQVc7UUFDWEMsYUFBYTtRQUNiQyxPQUFPO1FBQ1BDLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFDbENDLFlBQVksSUFBSUYsT0FBT0MsV0FBVztJQUNwQztDQUNEO0FBRUQsaURBQWlEO0FBQ2pELGVBQWVFO0lBQ2IsSUFBSTtRQUNGLE1BQU1iLDhEQUFhQSxDQUFDYyxZQUFZLENBQUM7UUFDakMsT0FBTztJQUNULEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRQyxJQUFJLENBQUMsbURBQW1ERjtRQUNoRSxPQUFPO0lBQ1Q7QUFDRjtBQUVBLHFFQUFxRTtBQUNyRSxlQUFlRztJQUNiLElBQUk7UUFDRixNQUFNQyxtQkFBbUIsQ0FBQzs7Ozs7Ozs7Ozs7OztJQWExQixDQUFDO1FBRUQsTUFBTW5CLDhEQUFhQSxDQUFDYyxZQUFZLENBQUNLO1FBRWpDLGdEQUFnRDtRQUNoRCxNQUFNQyxhQUFhO1FBQ25CLE1BQU1DLGNBQWMsTUFBTXJCLDhEQUFhQSxDQUFDYyxZQUFZLENBQUNNO1FBRXJELElBQUlDLFdBQVcsQ0FBQyxFQUFFLENBQUNDLEtBQUssS0FBSyxHQUFHO1lBQzlCLE1BQU1DLHFCQUFxQixDQUFDOzs7TUFHNUIsQ0FBQztZQUNELE1BQU12Qiw4REFBYUEsQ0FBQ2MsWUFBWSxDQUFDUztRQUNuQztJQUNGLEVBQUUsT0FBT1IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCxNQUFNQTtJQUNSO0FBQ0Y7QUFFTyxlQUFlUztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsY0FBYyxNQUFNWjtRQUUxQixJQUFJWSxhQUFhO1lBQ2YsbUNBQW1D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TUFBTSxDQUFDUixlQUFlO1lBRTVDLE9BQU8xRCxxREFBWUEsQ0FBQzZCLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RrQixTQUFTO1lBQ1g7UUFDRjtJQUNGLEVBQUUsT0FBT2hDLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT2hCLHFEQUFZQSxDQUFDNkIsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9kLE9BQU87UUFBa0MsR0FDM0Q7WUFBRTJCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlbWl1bS1jaG9pY2UtcmVhbC1lc3RhdGUvLi9hcHAvYXBpL2FkbWluL3ZpZGVvLXNldHRpbmdzL3JvdXRlLnRzPzhiZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IE15U1FMRGF0YWJhc2UgfSBmcm9tICdAL2xpYi9teXNxbC1kYXRhYmFzZSc7XG5cbmludGVyZmFjZSBWaWRlb1NldHRpbmdzIHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHZpZGVvVHlwZTogJ3VwbG9hZCcgfCAneW91dHViZSc7XG4gIHZpZGVvVXJsOiBzdHJpbmc7XG4gIHlvdXR1YmVVcmw6IHN0cmluZztcbiAgc2VsZWN0ZWRNZWRpYUlkPzogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpc0FjdGl2ZTogYm9vbGVhbjtcbiAgY3JlYXRlZEF0Pzogc3RyaW5nO1xuICB1cGRhdGVkQXQ/OiBzdHJpbmc7XG59XG5cbi8vIEluLW1lbW9yeSBmYWxsYmFjayBzdG9yYWdlIGZvciB3aGVuIGRhdGFiYXNlIGlzIG5vdCBhdmFpbGFibGVcbmxldCBmYWxsYmFja1ZpZGVvU2V0dGluZ3M6IGFueVtdID0gW1xuICB7XG4gICAgaWQ6IDEsXG4gICAgdmlkZW9fdHlwZTogJ3lvdXR1YmUnLFxuICAgIHZpZGVvX3VybDogbnVsbCxcbiAgICB5b3V0dWJlX3VybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9ZFF3NHc5V2dYY1EnLFxuICAgIHRpdGxlOiAnV2VsY29tZSB0byBQcmVtaXVtIENob2ljZSBSZWFsIEVzdGF0ZScsXG4gICAgZGVzY3JpcHRpb246ICdEaXNjb3ZlciBsdXh1cnkgcHJvcGVydGllcyBpbiBEdWJhaSB3aXRoIG91ciBleHBlcnQgdGVhbS4nLFxuICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH1cbl07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBkYXRhYmFzZSBjb25uZWN0aXZpdHlcbmFzeW5jIGZ1bmN0aW9uIGlzRGF0YWJhc2VBdmFpbGFibGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoJ1NFTEVDVCAxJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdEYXRhYmFzZSBub3QgYXZhaWxhYmxlLCB1c2luZyBmYWxsYmFjayBzdG9yYWdlOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSB2aWRlb19zZXR0aW5ncyB0YWJsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVWaWRlb1NldHRpbmdzVGFibGUoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY3JlYXRlVGFibGVRdWVyeSA9IGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHZpZGVvX3NldHRpbmdzIChcbiAgICAgICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgICAgICB2aWRlb190eXBlIEVOVU0oJ3lvdXR1YmUnLCAndXBsb2FkJykgTk9UIE5VTEwsXG4gICAgICAgIHZpZGVvX3VybCBWQVJDSEFSKDUwMCksXG4gICAgICAgIHlvdXR1YmVfdXJsIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgc2VsZWN0ZWRfbWVkaWFfaWQgVkFSQ0hBUig1MCksXG4gICAgICAgIHRpdGxlIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgaXNfYWN0aXZlIEJPT0xFQU4gREVGQVVMVCBGQUxTRSxcbiAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIClcbiAgICBgO1xuICAgIFxuICAgIGF3YWl0IE15U1FMRGF0YWJhc2UuZXhlY3V0ZVF1ZXJ5KGNyZWF0ZVRhYmxlUXVlcnkpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRhYmxlIGlzIGVtcHR5IGFuZCBhZGQgZGVmYXVsdCBlbnRyeVxuICAgIGNvbnN0IGNvdW50UXVlcnkgPSAnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gdmlkZW9fc2V0dGluZ3MnO1xuICAgIGNvbnN0IGNvdW50UmVzdWx0ID0gYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoY291bnRRdWVyeSk7XG4gICAgXG4gICAgaWYgKGNvdW50UmVzdWx0WzBdLmNvdW50ID09PSAwKSB7XG4gICAgICBjb25zdCBpbnNlcnREZWZhdWx0UXVlcnkgPSBgXG4gICAgICAgIElOU0VSVCBJTlRPIHZpZGVvX3NldHRpbmdzICh2aWRlb190eXBlLCB5b3V0dWJlX3VybCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBpc19hY3RpdmUpXG4gICAgICAgIFZBTFVFUyAoJ3lvdXR1YmUnLCAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUScsICdXZWxjb21lIHRvIFByZW1pdW0gQ2hvaWNlIFJlYWwgRXN0YXRlJywgJ0Rpc2NvdmVyIGx1eHVyeSBwcm9wZXJ0aWVzIGluIER1YmFpIHdpdGggb3VyIGV4cGVydCB0ZWFtLicsIHRydWUpXG4gICAgICBgO1xuICAgICAgYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoaW5zZXJ0RGVmYXVsdFF1ZXJ5KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdmlkZW9fc2V0dGluZ3MgdGFibGU6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGJBdmFpbGFibGUgPSBhd2FpdCBpc0RhdGFiYXNlQXZhaWxhYmxlKCk7XG4gICAgXG4gICAgaWYgKGRiQXZhaWxhYmxlKSB7XG4gICAgICAvLyBDcmVhdGUgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgYXdhaXQgY3JlYXRlVmlkZW9TZXR0aW5nc1RhYmxlKCk7XG4gICAgICBcbiAgICAgIC8vIEdldCBjdXJyZW50IHZpZGVvIHNldHRpbmdzXG4gICAgICBjb25zdCByb3dzID0gYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoXG4gICAgICAgICdTRUxFQ1QgKiBGUk9NIHZpZGVvX3NldHRpbmdzIFdIRVJFIGlzX2FjdGl2ZSA9IDEgT1JERVIgQlkgdXBkYXRlZF9hdCBERVNDIExJTUlUIDEnXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBzZXR0aW5ncyA9IHJvd3NbMF0gfHwgbnVsbDtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICBzZXR0aW5nczogc2V0dGluZ3MgPyB7XG4gICAgICAgICAgaWQ6IHNldHRpbmdzLmlkLFxuICAgICAgICAgIHZpZGVvVHlwZTogc2V0dGluZ3MudmlkZW9fdHlwZSxcbiAgICAgICAgICB2aWRlb1VybDogc2V0dGluZ3MudmlkZW9fdXJsLFxuICAgICAgICAgIHlvdXR1YmVVcmw6IHNldHRpbmdzLnlvdXR1YmVfdXJsLFxuICAgICAgICAgIHNlbGVjdGVkTWVkaWFJZDogc2V0dGluZ3Muc2VsZWN0ZWRfbWVkaWFfaWQsXG4gICAgICAgICAgdGl0bGU6IHNldHRpbmdzLnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBzZXR0aW5ncy5kZXNjcmlwdGlvbixcbiAgICAgICAgICBpc0FjdGl2ZTogQm9vbGVhbihzZXR0aW5ncy5pc19hY3RpdmUpLFxuICAgICAgICAgIGNyZWF0ZWRBdDogc2V0dGluZ3MuY3JlYXRlZF9hdCxcbiAgICAgICAgICB1cGRhdGVkQXQ6IHNldHRpbmdzLnVwZGF0ZWRfYXRcbiAgICAgICAgfSA6IG51bGxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2UgZmFsbGJhY2sgc3RvcmFnZVxuICAgICAgY29uc3QgYWN0aXZlU2V0dGluZ3MgPSBmYWxsYmFja1ZpZGVvU2V0dGluZ3MuZmluZChzID0+IHMuaXNfYWN0aXZlKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICBzZXR0aW5nczogYWN0aXZlU2V0dGluZ3MgPyB7XG4gICAgICAgICAgaWQ6IGFjdGl2ZVNldHRpbmdzLmlkLFxuICAgICAgICAgIHZpZGVvVHlwZTogYWN0aXZlU2V0dGluZ3MudmlkZW9fdHlwZSxcbiAgICAgICAgICB2aWRlb1VybDogYWN0aXZlU2V0dGluZ3MudmlkZW9fdXJsLFxuICAgICAgICAgIHlvdXR1YmVVcmw6IGFjdGl2ZVNldHRpbmdzLnlvdXR1YmVfdXJsLFxuICAgICAgICAgIHNlbGVjdGVkTWVkaWFJZDogYWN0aXZlU2V0dGluZ3Muc2VsZWN0ZWRfbWVkaWFfaWQsXG4gICAgICAgICAgdGl0bGU6IGFjdGl2ZVNldHRpbmdzLnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBhY3RpdmVTZXR0aW5ncy5kZXNjcmlwdGlvbixcbiAgICAgICAgICBpc0FjdGl2ZTogQm9vbGVhbihhY3RpdmVTZXR0aW5ncy5pc19hY3RpdmUpLFxuICAgICAgICAgIGNyZWF0ZWRBdDogYWN0aXZlU2V0dGluZ3MuY3JlYXRlZF9hdCxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGFjdGl2ZVNldHRpbmdzLnVwZGF0ZWRfYXRcbiAgICAgICAgfSA6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB2aWRlbyBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggdmlkZW8gc2V0dGluZ3MnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHsgdmlkZW9UeXBlLCB2aWRlb1VybCwgeW91dHViZVVybCwgc2VsZWN0ZWRNZWRpYUlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGlzQWN0aXZlIH06IFZpZGVvU2V0dGluZ3MgPSBib2R5O1xuICAgIFxuICAgIGNvbnN0IGRiQXZhaWxhYmxlID0gYXdhaXQgaXNEYXRhYmFzZUF2YWlsYWJsZSgpO1xuICAgIFxuICAgIGlmIChkYkF2YWlsYWJsZSkge1xuICAgICAgLy8gQ3JlYXRlIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgIGF3YWl0IGNyZWF0ZVZpZGVvU2V0dGluZ3NUYWJsZSgpO1xuICAgICAgXG4gICAgICAvLyBGaXJzdCwgZGVhY3RpdmF0ZSBhbGwgZXhpc3Rpbmcgc2V0dGluZ3NcbiAgICAgIGF3YWl0IE15U1FMRGF0YWJhc2UuZXhlY3V0ZVF1ZXJ5KCdVUERBVEUgdmlkZW9fc2V0dGluZ3MgU0VUIGlzX2FjdGl2ZSA9IDAnKTtcbiAgICAgIFxuICAgICAgLy8gSW5zZXJ0IG5ldyBzZXR0aW5nc1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoXG4gICAgICAgIGBJTlNFUlQgSU5UTyB2aWRlb19zZXR0aW5ncyBcbiAgICAgICAgICh2aWRlb190eXBlLCB2aWRlb191cmwsIHlvdXR1YmVfdXJsLCBzZWxlY3RlZF9tZWRpYV9pZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBpc19hY3RpdmUpIFxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgICAgIFt2aWRlb1R5cGUsIHZpZGVvVXJsIHx8IG51bGwsIHlvdXR1YmVVcmwgfHwgbnVsbCwgc2VsZWN0ZWRNZWRpYUlkIHx8IG51bGwsIHRpdGxlLCBkZXNjcmlwdGlvbiB8fCBudWxsLCBpc0FjdGl2ZSA/IDEgOiAwXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICBtZXNzYWdlOiAnVmlkZW8gc2V0dGluZ3Mgc2F2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgaWQ6IHJlc3VsdC5pbnNlcnRJZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVzZSBmYWxsYmFjayBzdG9yYWdlXG4gICAgICAvLyBEZWFjdGl2YXRlIGFsbCBleGlzdGluZyBzZXR0aW5nc1xuICAgICAgZmFsbGJhY2tWaWRlb1NldHRpbmdzLmZvckVhY2gocyA9PiBzLmlzX2FjdGl2ZSA9IGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIG5ldyBzZXR0aW5nc1xuICAgICAgY29uc3QgbmV3SWQgPSBNYXRoLm1heCguLi5mYWxsYmFja1ZpZGVvU2V0dGluZ3MubWFwKHMgPT4gcy5pZCksIDApICsgMTtcbiAgICAgIGNvbnN0IG5ld1NldHRpbmdzID0ge1xuICAgICAgICBpZDogbmV3SWQsXG4gICAgICAgIHZpZGVvX3R5cGU6IHZpZGVvVHlwZSxcbiAgICAgICAgdmlkZW9fdXJsOiB2aWRlb1VybCB8fCBudWxsLFxuICAgICAgICB5b3V0dWJlX3VybDogeW91dHViZVVybCB8fCBudWxsLFxuICAgICAgICBzZWxlY3RlZF9tZWRpYV9pZDogc2VsZWN0ZWRNZWRpYUlkIHx8IG51bGwsXG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgbnVsbCxcbiAgICAgICAgaXNfYWN0aXZlOiBpc0FjdGl2ZSxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGZhbGxiYWNrVmlkZW9TZXR0aW5ncy5wdXNoKG5ld1NldHRpbmdzKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICBtZXNzYWdlOiAnVmlkZW8gc2V0dGluZ3Mgc2F2ZWQgc3VjY2Vzc2Z1bGx5IChmYWxsYmFjayknLFxuICAgICAgICBpZDogbmV3SWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgdmlkZW8gc2V0dGluZ3M6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIHNhdmUgdmlkZW8gc2V0dGluZ3MnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBpZCwgdmlkZW9UeXBlLCB2aWRlb1VybCwgeW91dHViZVVybCwgc2VsZWN0ZWRNZWRpYUlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGlzQWN0aXZlIH06IFZpZGVvU2V0dGluZ3MgPSBib2R5O1xuICAgIFxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdWaWRlbyBzZXR0aW5ncyBJRCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYkF2YWlsYWJsZSA9IGF3YWl0IGlzRGF0YWJhc2VBdmFpbGFibGUoKTtcbiAgICBcbiAgICBpZiAoZGJBdmFpbGFibGUpIHtcbiAgICAgIC8vIENyZWF0ZSB0YWJsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBhd2FpdCBjcmVhdGVWaWRlb1NldHRpbmdzVGFibGUoKTtcbiAgICAgIFxuICAgICAgLy8gSWYgc2V0dGluZyB0aGlzIGFzIGFjdGl2ZSwgZGVhY3RpdmF0ZSBhbGwgb3RoZXJzIGZpcnN0XG4gICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoJ1VQREFURSB2aWRlb19zZXR0aW5ncyBTRVQgaXNfYWN0aXZlID0gMCBXSEVSRSBpZCAhPSA/JywgW2lkXSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgc2V0dGluZ3NcbiAgICAgIGF3YWl0IE15U1FMRGF0YWJhc2UuZXhlY3V0ZVF1ZXJ5KFxuICAgICAgICBgVVBEQVRFIHZpZGVvX3NldHRpbmdzIFxuICAgICAgICAgU0VUIHZpZGVvX3R5cGUgPSA/LCB2aWRlb191cmwgPSA/LCB5b3V0dWJlX3VybCA9ID8sIHNlbGVjdGVkX21lZGlhX2lkID0gPywgdGl0bGUgPSA/LCBkZXNjcmlwdGlvbiA9ID8sIGlzX2FjdGl2ZSA9ID9cbiAgICAgICAgIFdIRVJFIGlkID0gP2AsXG4gICAgICAgIFt2aWRlb1R5cGUsIHZpZGVvVXJsIHx8IG51bGwsIHlvdXR1YmVVcmwgfHwgbnVsbCwgc2VsZWN0ZWRNZWRpYUlkIHx8IG51bGwsIHRpdGxlLCBkZXNjcmlwdGlvbiB8fCBudWxsLCBpc0FjdGl2ZSA/IDEgOiAwLCBpZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgbWVzc2FnZTogJ1ZpZGVvIHNldHRpbmdzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVzZSBmYWxsYmFjayBzdG9yYWdlXG4gICAgICBjb25zdCBzZXR0aW5nc0luZGV4ID0gZmFsbGJhY2tWaWRlb1NldHRpbmdzLmZpbmRJbmRleChzID0+IHMuaWQgPT09IHBhcnNlSW50KGlkKSk7XG4gICAgICBcbiAgICAgIGlmIChzZXR0aW5nc0luZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdWaWRlbyBzZXR0aW5ncyBub3QgZm91bmQnIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIHNldHRpbmcgdGhpcyBhcyBhY3RpdmUsIGRlYWN0aXZhdGUgYWxsIG90aGVycyBmaXJzdFxuICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgIGZhbGxiYWNrVmlkZW9TZXR0aW5ncy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGlmIChzLmlkICE9PSBwYXJzZUludChpZCkpIHMuaXNfYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHNldHRpbmdzXG4gICAgICBmYWxsYmFja1ZpZGVvU2V0dGluZ3Nbc2V0dGluZ3NJbmRleF0gPSB7XG4gICAgICAgIC4uLmZhbGxiYWNrVmlkZW9TZXR0aW5nc1tzZXR0aW5nc0luZGV4XSxcbiAgICAgICAgdmlkZW9fdHlwZTogdmlkZW9UeXBlLFxuICAgICAgICB2aWRlb191cmw6IHZpZGVvVXJsIHx8IG51bGwsXG4gICAgICAgIHlvdXR1YmVfdXJsOiB5b3V0dWJlVXJsIHx8IG51bGwsXG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgbnVsbCxcbiAgICAgICAgaXNfYWN0aXZlOiBpc0FjdGl2ZSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuICAgICAgXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIG1lc3NhZ2U6ICdWaWRlbyBzZXR0aW5ncyB1cGRhdGVkIHN1Y2Nlc3NmdWxseSAoZmFsbGJhY2spJ1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHZpZGVvIHNldHRpbmdzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgdmlkZW8gc2V0dGluZ3MnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgaWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xuICAgIFxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdWaWRlbyBzZXR0aW5ncyBJRCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYkF2YWlsYWJsZSA9IGF3YWl0IGlzRGF0YWJhc2VBdmFpbGFibGUoKTtcbiAgICBcbiAgICBpZiAoZGJBdmFpbGFibGUpIHtcbiAgICAgIC8vIENyZWF0ZSB0YWJsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBhd2FpdCBjcmVhdGVWaWRlb1NldHRpbmdzVGFibGUoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgTXlTUUxEYXRhYmFzZS5leGVjdXRlUXVlcnkoJ0RFTEVURSBGUk9NIHZpZGVvX3NldHRpbmdzIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIG1lc3NhZ2U6ICdWaWRlbyBzZXR0aW5ncyBkZWxldGVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2UgZmFsbGJhY2sgc3RvcmFnZVxuICAgICAgY29uc3Qgc2V0dGluZ3NJbmRleCA9IGZhbGxiYWNrVmlkZW9TZXR0aW5ncy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBwYXJzZUludChpZCkpO1xuICAgICAgXG4gICAgICBpZiAoc2V0dGluZ3NJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVmlkZW8gc2V0dGluZ3Mgbm90IGZvdW5kJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBmYWxsYmFja1ZpZGVvU2V0dGluZ3Muc3BsaWNlKHNldHRpbmdzSW5kZXgsIDEpO1xuICAgICAgXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIG1lc3NhZ2U6ICdWaWRlbyBzZXR0aW5ncyBkZWxldGVkIHN1Y2Nlc3NmdWxseSAoZmFsbGJhY2spJ1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHZpZGVvIHNldHRpbmdzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgdmlkZW8gc2V0dGluZ3MnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk15U1FMRGF0YWJhc2UiLCJmYWxsYmFja1ZpZGVvU2V0dGluZ3MiLCJpZCIsInZpZGVvX3R5cGUiLCJ2aWRlb191cmwiLCJ5b3V0dWJlX3VybCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJpc19hY3RpdmUiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImlzRGF0YWJhc2VBdmFpbGFibGUiLCJleGVjdXRlUXVlcnkiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiY3JlYXRlVmlkZW9TZXR0aW5nc1RhYmxlIiwiY3JlYXRlVGFibGVRdWVyeSIsImNvdW50UXVlcnkiLCJjb3VudFJlc3VsdCIsImNvdW50IiwiaW5zZXJ0RGVmYXVsdFF1ZXJ5IiwiR0VUIiwiZGJBdmFpbGFibGUiLCJyb3dzIiwic2V0dGluZ3MiLCJqc29uIiwic3VjY2VzcyIsInZpZGVvVHlwZSIsInZpZGVvVXJsIiwieW91dHViZVVybCIsInNlbGVjdGVkTWVkaWFJZCIsInNlbGVjdGVkX21lZGlhX2lkIiwiaXNBY3RpdmUiLCJCb29sZWFuIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiYWN0aXZlU2V0dGluZ3MiLCJmaW5kIiwicyIsInN0YXR1cyIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsInJlc3VsdCIsIm1lc3NhZ2UiLCJpbnNlcnRJZCIsImZvckVhY2giLCJuZXdJZCIsIk1hdGgiLCJtYXgiLCJtYXAiLCJuZXdTZXR0aW5ncyIsInB1c2giLCJQVVQiLCJzZXR0aW5nc0luZGV4IiwiZmluZEluZGV4IiwicGFyc2VJbnQiLCJERUxFVEUiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJnZXQiLCJzcGxpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/video-settings/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mysql-database.ts":
/*!*******************************!*\
  !*** ./lib/mysql-database.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Database: () => (/* binding */ Database),\n/* harmony export */   MySQLDatabase: () => (/* binding */ MySQLDatabase),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\n// Database configuration with your provided credentials\nconst dbConfig = {\n    host: \"srv1558.hstgr.io\",\n    user: \"u485564989_pcrs\",\n    password: \"Abedyr57..\",\n    database: \"u485564989_pcrs\",\n    port:  true ? Number(\"3306\") : 0,\n    ssl: {\n        rejectUnauthorized: false\n    },\n    // Increased connection limits to prevent timeouts\n    connectionLimit: 10,\n    queueLimit: 20,\n    acquireTimeout: 60000,\n    timeout: 60000,\n    // Connection pool options supported by mysql2\n    enableKeepAlive: true,\n    keepAliveInitialDelay: 0,\n    idleTimeout: 300000,\n    maxIdle: 5,\n    // Additional connection management\n    multipleStatements: false\n};\n// Create connection pool\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool(dbConfig);\n// Database class with MySQL operations\nclass MySQLDatabase {\n    // Test database connection\n    static async testConnection() {\n        try {\n            const connection = await pool.getConnection();\n            await connection.ping();\n            connection.release();\n            console.log(\"✅ Database connection successful\");\n            return true;\n        } catch (error) {\n            console.error(\"❌ Database connection failed:\", error);\n            return false;\n        }\n    }\n    // Cleanup database connections\n    static async cleanup() {\n        try {\n            await pool.end();\n            console.log(\"✅ Database connections closed\");\n        } catch (error) {\n            console.error(\"❌ Error closing database connections:\", error);\n        }\n    }\n    // Generic query execution method\n    static async executeQuery(query, params = []) {\n        try {\n            const connection = await pool.getConnection();\n            const [result] = await connection.execute(query, params);\n            connection.release();\n            return result;\n        } catch (error) {\n            console.error(\"Error executing query:\", error);\n            throw error;\n        }\n    }\n    // Query method for backward compatibility\n    static async query(sql, params = []) {\n        return this.executeQuery(sql, params);\n    }\n    // Initialize database connection and tables\n    static async initialize() {\n        try {\n            // Test connection first\n            const isConnected = await this.testConnection();\n            if (!isConnected) {\n                throw new Error(\"Database connection failed\");\n            }\n            // Initialize tables\n            return await this.initializeTables();\n        } catch (error) {\n            console.error(\"❌ Failed to initialize database:\", error);\n            return false;\n        }\n    }\n    // Add missing columns to site_settings table\n    static async addMissingSocialColumns() {\n        try {\n            const connection = await pool.getConnection();\n            // Check if columns exist and add them if they don't\n            const alterTableSQL = `\n        ALTER TABLE site_settings \n        ADD COLUMN IF NOT EXISTS social_tiktok VARCHAR(500),\n        ADD COLUMN IF NOT EXISTS social_snapchat VARCHAR(500),\n        ADD COLUMN IF NOT EXISTS social_telegram VARCHAR(500),\n        ADD COLUMN IF NOT EXISTS social_whatsapp VARCHAR(500);\n      `;\n            await connection.execute(alterTableSQL);\n            connection.release();\n            console.log(\"✅ Missing social media columns added successfully\");\n            return true;\n        } catch (error) {\n            console.error(\"❌ Error adding missing columns:\", error);\n            return false;\n        }\n    }\n    // Initialize database tables\n    static async initializeTables() {\n        try {\n            const connection = await pool.getConnection();\n            // Create tables if they don't exist\n            const createTablesSQL = `\n        -- Users table\n        CREATE TABLE IF NOT EXISTS users (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          email VARCHAR(255) UNIQUE NOT NULL,\n          password_hash VARCHAR(255) NOT NULL,\n          role ENUM('admin', 'editor', 'viewer') DEFAULT 'viewer',\n          name VARCHAR(255) NOT NULL,\n          last_login TIMESTAMP NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          is_active BOOLEAN DEFAULT TRUE\n        );\n\n        -- Developers table\n        CREATE TABLE IF NOT EXISTS developers (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          name VARCHAR(255) NOT NULL,\n          slug VARCHAR(255) UNIQUE NOT NULL,\n          description TEXT,\n          logo VARCHAR(500),\n          established VARCHAR(50),\n          projects_count INT DEFAULT 0,\n          location VARCHAR(255),\n          website VARCHAR(500),\n          phone VARCHAR(50),\n          email VARCHAR(255),\n          status ENUM('Active', 'Inactive') DEFAULT 'Active',\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n        );\n\n        -- Projects table\n        CREATE TABLE IF NOT EXISTS projects (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          name VARCHAR(255) NOT NULL,\n          slug VARCHAR(255) UNIQUE NOT NULL,\n          developer VARCHAR(255) NOT NULL,\n          location VARCHAR(255) NOT NULL,\n          price VARCHAR(100) NOT NULL,\n          status ENUM('Available', 'Sold', 'Under Construction') DEFAULT 'Available',\n          bedrooms INT NOT NULL,\n          bathrooms INT NOT NULL,\n          studios INT DEFAULT 0,\n          area VARCHAR(100) NOT NULL,\n          description TEXT,\n          image VARCHAR(500),\n          gallery JSON,\n          coordinates_lat DECIMAL(10, 8),\n          coordinates_lng DECIMAL(11, 8),\n          features JSON,\n          amenities JSON,\n          presentation_file VARCHAR(500),\n          presentation_url VARCHAR(500),\n          presentation_slides JSON,\n          presentation_animations JSON,\n          presentation_effects JSON,\n          media_files JSON,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n        );\n\n        -- Hero sections table\n        CREATE TABLE IF NOT EXISTS hero_sections (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          page VARCHAR(100) NOT NULL,\n          title VARCHAR(255) NOT NULL,\n          subtitle VARCHAR(255),\n          description TEXT,\n          background_image VARCHAR(500),\n          cta_text VARCHAR(100),\n          cta_link VARCHAR(500),\n          is_active BOOLEAN DEFAULT TRUE,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n        );\n\n        -- Articles table\n        CREATE TABLE IF NOT EXISTS articles (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          title VARCHAR(255) NOT NULL,\n          slug VARCHAR(255) UNIQUE NOT NULL,\n          content LONGTEXT,\n          excerpt TEXT,\n          featured_image VARCHAR(500),\n          author VARCHAR(255),\n          status ENUM('draft', 'published', 'archived') DEFAULT 'draft',\n          published_at TIMESTAMP NULL,\n          tags JSON,\n          category VARCHAR(100),\n          read_time INT DEFAULT 5,\n          meta_description TEXT,\n          featured BOOLEAN DEFAULT FALSE,\n          views_count INT DEFAULT 0,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n        );\n\n        -- Media files table\n        CREATE TABLE IF NOT EXISTS media_files (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          filename VARCHAR(255) NOT NULL,\n          original_name VARCHAR(255) NOT NULL,\n          file_path VARCHAR(500) NOT NULL,\n          file_size BIGINT NOT NULL,\n          mime_type VARCHAR(100) NOT NULL,\n          alt_text VARCHAR(255),\n          uploaded_by INT,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL\n        );\n\n        -- System logs table\n        CREATE TABLE IF NOT EXISTS system_logs (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          level ENUM('info', 'warning', 'error', 'success') NOT NULL,\n          category VARCHAR(100) NOT NULL,\n          message TEXT NOT NULL,\n          user_id INT,\n          ip_address VARCHAR(45),\n          user_agent TEXT,\n          details JSON,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL\n        );\n\n        -- Chat messages table\n        CREATE TABLE IF NOT EXISTS chat_messages (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          session_id VARCHAR(255) NOT NULL,\n          message TEXT NOT NULL,\n          response TEXT NOT NULL,\n          timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          response_time INT NOT NULL,\n          user_ip VARCHAR(45)\n        );\n\n        -- Presentation slides table\n        CREATE TABLE IF NOT EXISTS presentation_slides (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          project_id INT NOT NULL,\n          slide_number INT NOT NULL,\n          title VARCHAR(255),\n          content TEXT,\n          image_url VARCHAR(500),\n          animation_type VARCHAR(100),\n          duration INT DEFAULT 5000,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE\n        );\n\n        -- Site settings table\n        CREATE TABLE IF NOT EXISTS site_settings (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          site_title VARCHAR(255) DEFAULT 'Premium Choice',\n          site_description TEXT DEFAULT 'Your trusted partner in Dubai real estate',\n          site_logo VARCHAR(500) DEFAULT '/logo.png',\n          site_favicon VARCHAR(500) DEFAULT '/favicon.ico',\n          contact_email VARCHAR(255) DEFAULT 'admin@example.com',\n    contact_phone VARCHAR(50) DEFAULT NULL,\n    contact_address TEXT DEFAULT 'Dubai, UAE',\n    contact_whatsapp VARCHAR(50) DEFAULT NULL,\n          social_facebook VARCHAR(500),\n          social_instagram VARCHAR(500),\n          social_twitter VARCHAR(500),\n          social_linkedin VARCHAR(500),\n          social_youtube VARCHAR(500),\n          social_tiktok VARCHAR(500),\n          social_snapchat VARCHAR(500),\n          social_telegram VARCHAR(500),\n          social_whatsapp VARCHAR(500),\n          seo_meta_title VARCHAR(255) DEFAULT 'Premium Choice - Dubai Real Estate',\n          seo_meta_description TEXT DEFAULT 'Discover premium real estate opportunities in Dubai with Premium Choice. Your trusted partner for luxury properties and investment solutions.',\n          seo_keywords TEXT DEFAULT 'Dubai real estate, luxury properties, investment, Premium Choice',\n          features_enable_blog BOOLEAN DEFAULT TRUE,\n          features_enable_newsletter BOOLEAN DEFAULT TRUE,\n          features_enable_whatsapp BOOLEAN DEFAULT TRUE,\n          features_enable_live_chat BOOLEAN DEFAULT FALSE,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n        );\n\n        -- Project media table for enhanced media management\n        CREATE TABLE IF NOT EXISTS project_media (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          project_id INT NOT NULL,\n          file_name VARCHAR(255) NOT NULL,\n          file_path VARCHAR(500) NOT NULL,\n          file_size BIGINT NOT NULL,\n          media_type ENUM('image', 'video', 'animation', 'pdf', 'pptx') NOT NULL,\n          file_extension VARCHAR(10) NOT NULL,\n          upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE\n        );\n\n        -- Hero images table for landing page carousel\n        CREATE TABLE IF NOT EXISTS hero_images (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          url VARCHAR(500) NOT NULL,\n          title VARCHAR(255) NOT NULL,\n          description TEXT,\n          alt_text VARCHAR(255),\n          is_active BOOLEAN DEFAULT TRUE,\n          order_index INT DEFAULT 0,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          INDEX idx_active_order (is_active, order_index)\n        );\n\n        -- AI API settings table for AI integration control\n        CREATE TABLE IF NOT EXISTS ai_api_settings (\n          id INT AUTO_INCREMENT PRIMARY KEY,\n          openai_api_key VARCHAR(255),\n          openai_model VARCHAR(100) DEFAULT 'gpt-3.5-turbo',\n          openai_max_tokens INT DEFAULT 1000,\n          openai_temperature DECIMAL(3,2) DEFAULT 0.70,\n          google_api_key VARCHAR(255),\n          google_model VARCHAR(100) DEFAULT 'gemini-pro',\n          google_max_tokens INT DEFAULT 1000,\n          google_temperature DECIMAL(3,2) DEFAULT 0.70,\n          anthropic_api_key VARCHAR(255),\n          anthropic_model VARCHAR(100) DEFAULT 'claude-3-sonnet-20240229',\n          anthropic_max_tokens INT DEFAULT 1000,\n          anthropic_temperature DECIMAL(3,2) DEFAULT 0.70,\n          default_provider ENUM('openai', 'google', 'anthropic') DEFAULT 'openai',\n          ai_enabled BOOLEAN DEFAULT TRUE,\n          rate_limit_per_minute INT DEFAULT 10,\n          rate_limit_per_hour INT DEFAULT 100,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n        );\n      `;\n            await connection.execute(createTablesSQL);\n            connection.release();\n            console.log(\"✅ Database tables initialized successfully\");\n            return true;\n        } catch (error) {\n            console.error(\"❌ Failed to initialize tables:\", error);\n            return false;\n        }\n    }\n    // Insert default admin user\n    static async createDefaultAdmin() {\n        try {\n            const connection = await pool.getConnection();\n            // Check if admin user already exists\n            const [existingUsers] = await connection.execute('SELECT id FROM users WHERE role = \"admin\"');\n            if (existingUsers.length === 0) {\n                // Create default admin user with your credentials\n                await connection.execute(`INSERT INTO users (email, password_hash, role, name, is_active) \n           VALUES (?, ?, 'admin', 'Admin', TRUE)`, [\n                    \"admin@example.com\",\n                    \"Abedyr57..\"\n                ] // In production, hash this password and change email\n                );\n                console.log(\"✅ Default admin user created\");\n            } else {\n                console.log(\"ℹ️ Admin user already exists\");\n            }\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"❌ Failed to create admin user:\", error);\n            return false;\n        }\n    }\n    // Update articles table with missing columns\n    static async updateArticlesTable() {\n        try {\n            const connection = await pool.getConnection();\n            // Check if columns exist and add them if they don't\n            const columnsToAdd = [\n                {\n                    name: \"tags\",\n                    definition: \"JSON\"\n                },\n                {\n                    name: \"category\",\n                    definition: \"VARCHAR(100)\"\n                },\n                {\n                    name: \"read_time\",\n                    definition: \"INT DEFAULT 5\"\n                },\n                {\n                    name: \"meta_description\",\n                    definition: \"TEXT\"\n                },\n                {\n                    name: \"featured\",\n                    definition: \"BOOLEAN DEFAULT FALSE\"\n                },\n                {\n                    name: \"views_count\",\n                    definition: \"INT DEFAULT 0\"\n                }\n            ];\n            for (const column of columnsToAdd){\n                try {\n                    // Check if column exists\n                    const [rows] = await connection.execute(`SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS \n             WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'articles' AND COLUMN_NAME = ?`, [\n                        column.name\n                    ]);\n                    if (rows.length === 0) {\n                        // Column doesn't exist, add it\n                        await connection.execute(`ALTER TABLE articles ADD COLUMN ${column.name} ${column.definition}`);\n                        console.log(`✅ Added column '${column.name}' to articles table`);\n                    } else {\n                        console.log(`ℹ️ Column '${column.name}' already exists in articles table`);\n                    }\n                } catch (error) {\n                    console.error(`❌ Failed to add column '${column.name}':`, error);\n                }\n            }\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"❌ Failed to update articles table:\", error);\n            return false;\n        }\n    }\n    // Projects CRUD operations\n    static async getProjects() {\n        let connection;\n        try {\n            console.log(\"\\uD83D\\uDD17 Attempting to get database connection...\");\n            connection = await pool.getConnection();\n            console.log(\"✅ Database connection acquired\");\n            const [rows] = await connection.execute(\"SELECT * FROM projects ORDER BY created_at DESC\");\n            console.log(`📊 Retrieved ${rows.length} projects from database`);\n            // Parse JSON fields for each project\n            const parseJsonField = (field)=>{\n                if (!field) return null;\n                if (typeof field === \"string\") {\n                    try {\n                        return JSON.parse(field);\n                    } catch  {\n                        return field.split(\",\").map((item)=>item.trim()).filter(Boolean);\n                    }\n                }\n                return field;\n            };\n            const projects = rows.map((project)=>({\n                    ...project,\n                    gallery: parseJsonField(project.gallery),\n                    features: parseJsonField(project.features),\n                    amenities: parseJsonField(project.amenities),\n                    property_types: parseJsonField(project.property_types),\n                    sub_projects: parseJsonField(project.sub_projects),\n                    media_files: parseJsonField(project.media_files),\n                    units: parseJsonField(project.units),\n                    property_type: parseJsonField(project.property_type)\n                }));\n            console.log(\"✅ Projects parsed successfully\");\n            return projects;\n        } catch (error) {\n            console.error(\"❌ Error fetching projects:\", error);\n            if (error instanceof Error && error.message.includes(\"max_user_connections\")) {\n                console.error(\"\\uD83D\\uDEAB Database connection limit exceeded. Consider reducing concurrent connections.\");\n            }\n            return [];\n        } finally{\n            if (connection) {\n                try {\n                    connection.release();\n                    console.log(\"\\uD83D\\uDD13 Database connection released\");\n                } catch (releaseError) {\n                    console.error(\"⚠️ Error releasing connection:\", releaseError);\n                }\n            }\n        }\n    }\n    static async getProjectsByDeveloper(developerName) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM projects WHERE developer = ? ORDER BY created_at DESC\", [\n                developerName\n            ]);\n            connection.release();\n            // Parse JSON fields for each project\n            const parseJsonField = (field)=>{\n                if (!field) return null;\n                if (typeof field === \"string\") {\n                    try {\n                        return JSON.parse(field);\n                    } catch  {\n                        return field.split(\",\").map((item)=>item.trim()).filter(Boolean);\n                    }\n                }\n                return field;\n            };\n            return rows.map((project)=>({\n                    ...project,\n                    gallery: parseJsonField(project.gallery),\n                    features: parseJsonField(project.features),\n                    amenities: parseJsonField(project.amenities),\n                    property_types: parseJsonField(project.property_types),\n                    sub_projects: parseJsonField(project.sub_projects),\n                    media_files: parseJsonField(project.media_files),\n                    units: parseJsonField(project.units),\n                    property_type: parseJsonField(project.property_type)\n                }));\n        } catch (error) {\n            console.error(\"Error fetching projects by developer:\", error);\n            return [];\n        }\n    }\n    static async getProjectBySlug(slug) {\n        try {\n            const connection = await pool.getConnection();\n            // Get project data\n            const [projectRows] = await connection.execute(\"SELECT * FROM projects WHERE slug = ?\", [\n                slug\n            ]);\n            const projects = projectRows;\n            if (projects.length === 0) {\n                connection.release();\n                return null;\n            }\n            const project = projects[0];\n            // Get presentation slides for this project\n            const [slideRows] = await connection.execute(\"SELECT * FROM presentation_slides WHERE project_id = ? ORDER BY slide_number ASC\", [\n                project.id\n            ]);\n            connection.release();\n            // Parse JSON fields and add presentation slides\n            const parseJsonField = (field)=>{\n                if (!field) return null;\n                if (typeof field === \"string\") {\n                    try {\n                        return JSON.parse(field);\n                    } catch  {\n                        return field.split(\",\").map((item)=>item.trim()).filter(Boolean);\n                    }\n                }\n                return field;\n            };\n            // Parse color palette safely\n            const parseColorPalette = (colorPalette)=>{\n                if (!colorPalette) return null;\n                if (typeof colorPalette === \"string\") {\n                    try {\n                        return JSON.parse(colorPalette);\n                    } catch  {\n                        return null;\n                    }\n                }\n                return colorPalette;\n            };\n            return {\n                ...project,\n                gallery: parseJsonField(project.gallery),\n                features: parseJsonField(project.features),\n                amenities: parseJsonField(project.amenities),\n                property_types: parseJsonField(project.property_types),\n                sub_projects: parseJsonField(project.sub_projects),\n                media_files: parseJsonField(project.media_files),\n                presentation_slides: slideRows\n            };\n        } catch (error) {\n            console.error(\"Error fetching project by slug:\", error);\n            return null;\n        }\n    }\n    static async createProject(project) {\n        let connection;\n        try {\n            // Validate required fields\n            if (!project.name || project.name.trim() === \"\") {\n                throw new Error(\"Project name is required\");\n            }\n            if (!project.description || project.description.trim() === \"\") {\n                throw new Error(\"Project description is required\");\n            }\n            console.log(\"\\uD83D\\uDD17 Getting database connection for project creation...\");\n            connection = await pool.getConnection();\n            console.log(\"✅ Database connection acquired for project creation\");\n            // Helper function to convert undefined to null\n            const toNullIfUndefined = (value)=>value === undefined ? null : value;\n            // Ensure slug is unique by adding timestamp if needed\n            let finalSlug = project.slug || \"\";\n            // Always check if slug already exists and make it unique\n            const [existingRows] = await connection.execute(\"SELECT id FROM projects WHERE slug = ?\", [\n                finalSlug\n            ]);\n            if (existingRows.length > 0) {\n                finalSlug = `${finalSlug}-${Date.now()}`;\n            }\n            const [result] = await connection.execute(`INSERT INTO projects (name, slug, developer, developer_id, location, price, status, bedrooms, bathrooms, area, \n         description, image, gallery, coordinates_lat, coordinates_lng, features, amenities,\n         presentation_file, presentation_url, presentation_slides, presentation_animations, presentation_effects, \n         featured_video, studios, media_files)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n                project.name || \"\",\n                finalSlug,\n                project.developer || \"\",\n                project.developer_id || null,\n                project.location || \"\",\n                project.price || \"Price on Request\",\n                project.status || \"Available\",\n                project.bedrooms || 0,\n                project.bathrooms || 0,\n                project.area || \"\",\n                project.description || \"\",\n                project.image || \"\",\n                JSON.stringify(project.gallery || []),\n                project.coordinates_lat || 0,\n                project.coordinates_lng || 0,\n                JSON.stringify(project.features || []),\n                JSON.stringify(project.amenities || []),\n                toNullIfUndefined(project.presentation_file),\n                toNullIfUndefined(project.presentation_url),\n                JSON.stringify(project.presentation_slides || {}),\n                JSON.stringify(project.presentation_animations || {}),\n                JSON.stringify(project.presentation_effects || {}),\n                toNullIfUndefined(project.featured_video),\n                project.studios || 0,\n                JSON.stringify(project.media_files || [])\n            ]);\n            const insertId = result.insertId;\n            // Update developer project count automatically\n            if (project.developer_id) {\n                // Get developer name by ID for the count update\n                const [devRows] = await connection.execute(\"SELECT name FROM developers WHERE id = ?\", [\n                    project.developer_id\n                ]);\n                if (devRows.length > 0) {\n                    await this.updateDeveloperProjectCount(devRows[0].name);\n                }\n            } else if (project.developer) {\n                await this.updateDeveloperProjectCount(project.developer);\n            }\n            connection.release();\n            // Log the activity\n            try {\n                await this.createActivity({\n                    level: \"success\",\n                    category: \"project\",\n                    message: `New project created: ${project.name}`,\n                    details: JSON.stringify({\n                        projectId: insertId,\n                        developer: project.developer,\n                        location: project.location\n                    })\n                });\n            } catch (logError) {\n                console.error(\"Failed to log project creation activity:\", logError);\n            }\n            return await this.getProjectById(insertId);\n        } catch (error) {\n            if (connection) {\n                connection.release();\n            }\n            console.error(\"Error creating project:\", error);\n            // Check for specific MySQL errors\n            if (error.code === \"ER_DUP_ENTRY\") {\n                if (error.message.includes(\"name\")) {\n                    throw new Error(\"A project with this name already exists. Please choose a different name.\");\n                } else if (error.message.includes(\"slug\")) {\n                    throw new Error(\"A project with this URL slug already exists. Please modify the project name.\");\n                } else {\n                    throw new Error(\"A project with these details already exists. Please check for duplicates.\");\n                }\n            } else if (error.code === \"ER_DATA_TOO_LONG\") {\n                throw new Error(\"One or more fields contain too much data. Please shorten your input.\");\n            } else if (error.code === \"ER_BAD_NULL_ERROR\") {\n                throw new Error(\"Required field is missing. Please fill in all required fields.\");\n            } else if (error.message.includes(\"required\")) {\n                // Our custom validation errors\n                throw error;\n            } else {\n                throw new Error(\"Database error occurred while creating the project. Please try again.\");\n            }\n        }\n    }\n    static async getProjectById(id) {\n        let connection;\n        try {\n            connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM projects WHERE id = ?\", [\n                id\n            ]);\n            const projects = rows;\n            if (projects.length === 0) {\n                return null;\n            }\n            const project = projects[0];\n            // Parse JSON fields\n            const parseJsonField = (field)=>{\n                if (!field) return null;\n                if (typeof field === \"string\") {\n                    try {\n                        return JSON.parse(field);\n                    } catch  {\n                        return field.split(\",\").map((item)=>item.trim()).filter(Boolean);\n                    }\n                }\n                return field;\n            };\n            return {\n                ...project,\n                gallery: parseJsonField(project.gallery),\n                features: parseJsonField(project.features),\n                amenities: parseJsonField(project.amenities),\n                property_types: parseJsonField(project.property_types),\n                sub_projects: parseJsonField(project.sub_projects),\n                media_files: parseJsonField(project.media_files),\n                units: parseJsonField(project.units),\n                property_type: parseJsonField(project.property_type)\n            };\n        } catch (error) {\n            console.error(\"Error fetching project by ID:\", error);\n            throw error; // Re-throw to let API handle the error properly\n        } finally{\n            if (connection) {\n                connection.release();\n            }\n        }\n    }\n    static async updateProject(id, updateData) {\n        try {\n            const connection = await pool.getConnection();\n            // Get the current project data to check if developer is changing\n            const [currentRows] = await connection.execute(\"SELECT developer FROM projects WHERE id = ?\", [\n                id\n            ]);\n            const currentProject = currentRows[0];\n            const oldDeveloper = currentProject?.developer;\n            // Build dynamic update query\n            const fields = Object.keys(updateData).filter((key)=>key !== \"id\");\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>{\n                const value = updateData[field];\n                return typeof value === \"object\" ? JSON.stringify(value) : value;\n            });\n            await connection.execute(`UPDATE projects SET ${setClause}, updated_at = NOW() WHERE id = ?`, [\n                ...values,\n                id\n            ]);\n            // Update project counts if developer changed\n            const newDeveloper = updateData.developer;\n            if (newDeveloper && newDeveloper !== oldDeveloper) {\n                // Update count for old developer\n                if (oldDeveloper) {\n                    await this.updateDeveloperProjectCount(oldDeveloper);\n                }\n                // Update count for new developer\n                await this.updateDeveloperProjectCount(newDeveloper);\n            }\n            connection.release();\n            // Log the activity\n            try {\n                const updatedProject = await this.getProjectById(id);\n                await this.createActivity({\n                    level: \"info\",\n                    category: \"project\",\n                    message: `Project updated: ${updatedProject?.name || \"Unknown\"}`,\n                    details: JSON.stringify({\n                        projectId: id,\n                        updatedFields: Object.keys(updateData)\n                    })\n                });\n            } catch (logError) {\n                console.error(\"Failed to log project update activity:\", logError);\n            }\n            return await this.getProjectById(id);\n        } catch (error) {\n            console.error(\"Error updating project:\", error);\n            return null;\n        }\n    }\n    static async deleteProject(id) {\n        try {\n            const connection = await pool.getConnection();\n            // First check if the project exists and get developer name\n            const [checkRows] = await connection.execute(\"SELECT id, developer FROM projects WHERE id = ?\", [\n                id\n            ]);\n            if (checkRows.length === 0) {\n                connection.release();\n                console.log(`Project with id ${id} not found`);\n                return false;\n            }\n            const projectData = checkRows[0];\n            const developerName = projectData.developer;\n            // Get project name for logging before deletion\n            const [projectRows] = await connection.execute(\"SELECT name FROM projects WHERE id = ?\", [\n                id\n            ]);\n            const projectName = projectRows[0]?.name || \"Unknown\";\n            // Delete the project (CASCADE will handle related records)\n            const [result] = await connection.execute(\"DELETE FROM projects WHERE id = ?\", [\n                id\n            ]);\n            // Update developer project count automatically\n            if (developerName) {\n                await this.updateDeveloperProjectCount(developerName);\n            }\n            connection.release();\n            // Check if any rows were affected\n            const affectedRows = result.affectedRows;\n            console.log(`Delete operation affected ${affectedRows} rows for project id ${id}`);\n            // Log the activity if deletion was successful\n            if (affectedRows > 0) {\n                try {\n                    await this.createActivity({\n                        level: \"warning\",\n                        category: \"project\",\n                        message: `Project deleted: ${projectName}`,\n                        details: JSON.stringify({\n                            projectId: id,\n                            developer: developerName\n                        })\n                    });\n                } catch (logError) {\n                    console.error(\"Failed to log project deletion activity:\", logError);\n                }\n            }\n            return affectedRows > 0;\n        } catch (error) {\n            console.error(\"Error deleting project:\", error);\n            return false;\n        }\n    }\n    // Developers CRUD operations\n    static async getDevelopers() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM developers ORDER BY name ASC\");\n            connection.release();\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching developers:\", error);\n            return [];\n        }\n    }\n    static async createDeveloper(developer) {\n        try {\n            const connection = await pool.getConnection();\n            const [result] = await connection.execute(`INSERT INTO developers (name, slug, description, logo, established, projects_count, \n         location, website, phone, email, status) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n                developer.name,\n                developer.slug,\n                developer.description,\n                developer.logo,\n                developer.established,\n                developer.projects_count,\n                developer.location,\n                developer.website,\n                developer.phone,\n                developer.email,\n                developer.status\n            ]);\n            const insertId = result.insertId;\n            connection.release();\n            // Log the activity\n            try {\n                await this.createActivity({\n                    level: \"success\",\n                    category: \"developer\",\n                    message: `New developer created: ${developer.name}`,\n                    details: JSON.stringify({\n                        developerId: insertId,\n                        location: developer.location,\n                        established: developer.established\n                    })\n                });\n            } catch (logError) {\n                console.error(\"Failed to log developer creation activity:\", logError);\n            }\n            return await this.getDeveloperById(insertId);\n        } catch (error) {\n            console.error(\"Error creating developer:\", error);\n            return null;\n        }\n    }\n    static async getDeveloperById(id) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM developers WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            const developers = rows;\n            return developers.length > 0 ? developers[0] : null;\n        } catch (error) {\n            console.error(\"Error fetching developer by ID:\", error);\n            return null;\n        }\n    }\n    static async updateDeveloper(id, updateData) {\n        try {\n            const connection = await pool.getConnection();\n            // Get the current developer name for logging\n            const [currentRows] = await connection.execute(\"SELECT name FROM developers WHERE id = ?\", [\n                id\n            ]);\n            const currentDeveloper = currentRows[0];\n            const developerName = currentDeveloper?.name || \"Unknown Developer\";\n            const fields = Object.keys(updateData).filter((key)=>key !== \"id\");\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>updateData[field]);\n            await connection.execute(`UPDATE developers SET ${setClause}, updated_at = NOW() WHERE id = ?`, [\n                ...values,\n                id\n            ]);\n            connection.release();\n            // Log the activity\n            try {\n                await this.createActivity({\n                    level: \"info\",\n                    category: \"developer\",\n                    message: `Developer updated: ${developerName}`,\n                    details: JSON.stringify({\n                        developerId: id,\n                        updatedFields: fields\n                    })\n                });\n            } catch (logError) {\n                console.error(\"Failed to log developer update activity:\", logError);\n            }\n            return await this.getDeveloperById(id);\n        } catch (error) {\n            console.error(\"Error updating developer:\", error);\n            return null;\n        }\n    }\n    static async deleteDeveloper(id) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"DELETE FROM developers WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting developer:\", error);\n            return false;\n        }\n    }\n    static async updateDeveloperProjectCount(developerName) {\n        try {\n            const connection = await pool.getConnection();\n            // Count projects for this developer\n            const [countRows] = await connection.execute(\"SELECT COUNT(*) as project_count FROM projects WHERE developer = ?\", [\n                developerName\n            ]);\n            const projectCount = countRows[0].project_count;\n            // Update the developer's project count\n            await connection.execute(\"UPDATE developers SET projects_count = ?, updated_at = NOW() WHERE name = ?\", [\n                projectCount,\n                developerName\n            ]);\n            connection.release();\n            console.log(`Updated project count for developer ${developerName}: ${projectCount} projects`);\n        } catch (error) {\n            console.error(\"Error updating developer project count:\", error);\n        }\n    }\n    // Enhanced project-developer relationship methods\n    static async getProjectsByDeveloperId(developerId) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(`SELECT p.*, d.name as developer_name, d.slug as developer_slug \n         FROM projects p \n         LEFT JOIN developers d ON p.developer_id = d.id \n         WHERE p.developer_id = ? \n         ORDER BY p.created_at DESC`, [\n                developerId\n            ]);\n            connection.release();\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching projects by developer ID:\", error);\n            return [];\n        }\n    }\n    static async getDeveloperWithProjects(developerId) {\n        try {\n            const connection = await pool.getConnection();\n            // Get developer details\n            const [developerRows] = await connection.execute(\"SELECT * FROM developers WHERE id = ?\", [\n                developerId\n            ]);\n            if (developerRows.length === 0) {\n                connection.release();\n                return null;\n            }\n            const developer = developerRows[0];\n            // Get associated projects\n            const [projectRows] = await connection.execute(\"SELECT * FROM projects WHERE developer_id = ? ORDER BY created_at DESC\", [\n                developerId\n            ]);\n            connection.release();\n            return {\n                ...developer,\n                projects: projectRows\n            };\n        } catch (error) {\n            console.error(\"Error fetching developer with projects:\", error);\n            return null;\n        }\n    }\n    static async assignProjectToDeveloper(projectId, developerId) {\n        try {\n            const connection = await pool.getConnection();\n            // Update project with developer_id\n            await connection.execute(\"UPDATE projects SET developer_id = ?, updated_at = NOW() WHERE id = ?\", [\n                developerId,\n                projectId\n            ]);\n            // Update developer's project count\n            await connection.execute(\"UPDATE developers SET projects_count = projects_count + 1, updated_at = NOW() WHERE id = ?\", [\n                developerId\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error assigning project to developer:\", error);\n            return false;\n        }\n    }\n    static async unassignProjectFromDeveloper(projectId) {\n        try {\n            const connection = await pool.getConnection();\n            // Get current developer_id before removing\n            const [projectRows] = await connection.execute(\"SELECT developer_id FROM projects WHERE id = ?\", [\n                projectId\n            ]);\n            if (projectRows.length > 0) {\n                const currentDeveloperId = projectRows[0].developer_id;\n                if (currentDeveloperId) {\n                    // Remove developer assignment\n                    await connection.execute(\"UPDATE projects SET developer_id = NULL, updated_at = NOW() WHERE id = ?\", [\n                        projectId\n                    ]);\n                    // Update developer's project count\n                    await connection.execute(\"UPDATE developers SET projects_count = projects_count - 1, updated_at = NOW() WHERE id = ?\", [\n                        currentDeveloperId\n                    ]);\n                }\n            }\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error unassigning project from developer:\", error);\n            return false;\n        }\n    }\n    static async deleteDeveloperWithCascade(id) {\n        try {\n            const connection = await pool.getConnection();\n            // Get developer name for logging before deletion\n            const [developerRows] = await connection.execute(\"SELECT name FROM developers WHERE id = ?\", [\n                id\n            ]);\n            const developerName = developerRows[0]?.name || \"Unknown Developer\";\n            // Start transaction\n            await connection.beginTransaction();\n            try {\n                // Count projects that will be deleted\n                const [countRows] = await connection.execute(\"SELECT COUNT(*) as project_count FROM projects WHERE developer_id = ?\", [\n                    id\n                ]);\n                const deletedProjects = countRows[0].project_count;\n                // Delete associated projects (cascading delete)\n                await connection.execute(\"DELETE FROM projects WHERE developer_id = ?\", [\n                    id\n                ]);\n                // Delete the developer\n                await connection.execute(\"DELETE FROM developers WHERE id = ?\", [\n                    id\n                ]);\n                // Commit transaction\n                await connection.commit();\n                connection.release();\n                // Log the activity\n                try {\n                    await this.createActivity({\n                        level: \"warning\",\n                        category: \"developer\",\n                        message: `Developer deleted: ${developerName}`,\n                        details: JSON.stringify({\n                            developerId: id,\n                            deletedProjects\n                        })\n                    });\n                } catch (logError) {\n                    console.error(\"Failed to log developer deletion activity:\", logError);\n                }\n                return {\n                    success: true,\n                    deletedProjects\n                };\n            } catch (error) {\n                // Rollback transaction on error\n                await connection.rollback();\n                connection.release();\n                throw error;\n            }\n        } catch (error) {\n            console.error(\"Error deleting developer with cascade:\", error);\n            return {\n                success: false,\n                deletedProjects: 0\n            };\n        }\n    }\n    static async createProjectWithDeveloper(projectData, developerId) {\n        try {\n            const connection = await pool.getConnection();\n            // Start transaction\n            await connection.beginTransaction();\n            try {\n                // Create the project with developer_id\n                const projectToCreate = {\n                    ...projectData,\n                    developer_id: developerId || null\n                };\n                const [result] = await connection.execute(`INSERT INTO projects (\n            name, slug, project_name, sub_project, display_title, developer, developer_id,\n            location, price, starting_price, status, project_type, type, category,\n            color_palette, property_type, property_types, sub_projects, bedrooms, bathrooms,\n            studios, units_1bedroom, units_2bedroom, units_3bedroom, units_4bedroom,\n            units_5bedroom, units_office, living_rooms, units, area, description, image,\n            gallery, coordinates_lat, coordinates_lng, features, amenities, is_featured,\n            brochure_url, theme_color, voice_over_url, presentation_file, presentation_url,\n            media_type, featured_video, created_at, updated_at\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())`, [\n                    projectToCreate.name,\n                    projectToCreate.slug,\n                    projectToCreate.project_name || null,\n                    projectToCreate.sub_project || null,\n                    projectToCreate.display_title || null,\n                    projectToCreate.developer,\n                    projectToCreate.developer_id,\n                    projectToCreate.location,\n                    projectToCreate.price || null,\n                    projectToCreate.starting_price || null,\n                    projectToCreate.status || \"Active\",\n                    projectToCreate.project_type || null,\n                    projectToCreate.type || null,\n                    projectToCreate.category || null,\n                    projectToCreate.color_palette || null,\n                    JSON.stringify(projectToCreate.property_type || []),\n                    JSON.stringify(projectToCreate.property_types || []),\n                    JSON.stringify(projectToCreate.sub_projects || []),\n                    projectToCreate.bedrooms || 0,\n                    projectToCreate.bathrooms || 0,\n                    projectToCreate.studios || 0,\n                    projectToCreate.units_1bedroom || 0,\n                    projectToCreate.units_2bedroom || 0,\n                    projectToCreate.units_3bedroom || 0,\n                    projectToCreate.units_4bedroom || 0,\n                    projectToCreate.units_5bedroom || 0,\n                    projectToCreate.units_office || 0,\n                    projectToCreate.living_rooms || 0,\n                    JSON.stringify(projectToCreate.units || []),\n                    projectToCreate.area,\n                    projectToCreate.description,\n                    projectToCreate.image,\n                    JSON.stringify(projectToCreate.gallery || []),\n                    projectToCreate.coordinates_lat,\n                    projectToCreate.coordinates_lng,\n                    JSON.stringify(projectToCreate.features || []),\n                    JSON.stringify(projectToCreate.amenities || []),\n                    projectToCreate.is_featured || false,\n                    projectToCreate.brochure_url || null,\n                    projectToCreate.theme_color || null,\n                    projectToCreate.voice_over_url || null,\n                    projectToCreate.presentation_file || null,\n                    projectToCreate.presentation_url || null,\n                    projectToCreate.media_type || null,\n                    projectToCreate.featured_video || null\n                ]);\n                const insertId = result.insertId;\n                // Update developer's project count if assigned\n                if (developerId) {\n                    await connection.execute(\"UPDATE developers SET projects_count = projects_count + 1, updated_at = NOW() WHERE id = ?\", [\n                        developerId\n                    ]);\n                }\n                // Commit transaction\n                await connection.commit();\n                // Fetch and return the created project\n                const [projectRows] = await connection.execute(\"SELECT * FROM projects WHERE id = ?\", [\n                    insertId\n                ]);\n                connection.release();\n                if (projectRows.length > 0) {\n                    const project = projectRows[0];\n                    return {\n                        ...project,\n                        property_type: project.property_type ? typeof project.property_type === \"string\" ? JSON.parse(project.property_type) : project.property_type : [],\n                        property_types: project.property_types ? typeof project.property_types === \"string\" ? JSON.parse(project.property_types) : project.property_types : [],\n                        sub_projects: project.sub_projects ? typeof project.sub_projects === \"string\" ? JSON.parse(project.sub_projects) : project.sub_projects : [],\n                        units: project.units ? typeof project.units === \"string\" ? JSON.parse(project.units) : project.units : [],\n                        gallery: project.gallery ? typeof project.gallery === \"string\" ? JSON.parse(project.gallery) : project.gallery : [],\n                        features: project.features ? typeof project.features === \"string\" ? JSON.parse(project.features) : project.features : [],\n                        amenities: project.amenities ? typeof project.amenities === \"string\" ? JSON.parse(project.amenities) : project.amenities : []\n                    };\n                }\n                return null;\n            } catch (error) {\n                // Rollback transaction on error\n                await connection.rollback();\n                connection.release();\n                throw error;\n            }\n        } catch (error) {\n            console.error(\"Error creating project with developer:\", error);\n            return null;\n        }\n    }\n    // Articles CRUD operations\n    static async getArticles() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM articles ORDER BY created_at DESC\");\n            connection.release();\n            const articles = rows;\n            // Parse JSON tags field and handle missing columns\n            return articles.map((article)=>({\n                    ...article,\n                    tags: article.tags ? typeof article.tags === \"string\" ? JSON.parse(article.tags) : article.tags : [],\n                    category: article.category || \"\",\n                    read_time: article.read_time || 5,\n                    meta_description: article.meta_description || \"\",\n                    featured: article.featured || false,\n                    views_count: article.views_count || 0\n                }));\n        } catch (error) {\n            console.error(\"Error fetching articles:\", error);\n            return [];\n        }\n    }\n    static async createArticle(article) {\n        try {\n            const connection = await pool.getConnection();\n            // First try with all columns\n            try {\n                const [result] = await connection.execute(`INSERT INTO articles (title, slug, content, excerpt, featured_image, author, status, published_at, tags, category, read_time, meta_description, featured, views_count)\n           VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n                    article.title,\n                    article.slug,\n                    article.content,\n                    article.excerpt,\n                    article.featured_image,\n                    article.author,\n                    article.status,\n                    article.published_at,\n                    JSON.stringify(article.tags || []),\n                    article.category,\n                    article.read_time,\n                    article.meta_description,\n                    article.featured || false,\n                    article.views_count || 0\n                ]);\n                const insertId = result.insertId;\n                connection.release();\n                return await this.getArticleById(insertId);\n            } catch (insertError) {\n                console.log(\"Full insert failed, trying basic insert:\", insertError);\n                // If that fails, try with basic columns only\n                const [result] = await connection.execute(`INSERT INTO articles (title, slug, content, excerpt, featured_image, author, status, published_at)\n           VALUES (?, ?, ?, ?, ?, ?, ?, ?)`, [\n                    article.title,\n                    article.slug,\n                    article.content,\n                    article.excerpt,\n                    article.featured_image,\n                    article.author,\n                    article.status,\n                    article.published_at\n                ]);\n                const insertId = result.insertId;\n                connection.release();\n                return await this.getArticleById(insertId);\n            }\n        } catch (error) {\n            console.error(\"Error creating article:\", error);\n            return null;\n        }\n    }\n    static async getArticleById(id) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM articles WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            const articles = rows;\n            if (articles.length > 0) {\n                const article = articles[0];\n                return {\n                    ...article,\n                    tags: article.tags ? typeof article.tags === \"string\" ? JSON.parse(article.tags) : article.tags : [],\n                    category: article.category || \"\",\n                    read_time: article.read_time || 5,\n                    meta_description: article.meta_description || \"\",\n                    featured: article.featured || false,\n                    views_count: article.views_count || 0\n                };\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching article by ID:\", error);\n            return null;\n        }\n    }\n    static async updateArticle(id, updateData) {\n        try {\n            const connection = await pool.getConnection();\n            // Convert tags array to JSON string if present\n            const processedData = {\n                ...updateData\n            };\n            if (processedData.tags) {\n                processedData.tags = JSON.stringify(processedData.tags);\n            }\n            const fields = Object.keys(processedData).filter((key)=>key !== \"id\");\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>processedData[field]);\n            await connection.execute(`UPDATE articles SET ${setClause}, updated_at = NOW() WHERE id = ?`, [\n                ...values,\n                id\n            ]);\n            connection.release();\n            return await this.getArticleById(id);\n        } catch (error) {\n            console.error(\"Error updating article:\", error);\n            return null;\n        }\n    }\n    static async deleteArticle(id) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"DELETE FROM articles WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting article:\", error);\n            return false;\n        }\n    }\n    static async getArticleBySlug(slug) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute('SELECT * FROM articles WHERE slug = ? AND status = \"published\"', [\n                slug\n            ]);\n            connection.release();\n            const articles = rows;\n            if (articles.length > 0) {\n                const article = articles[0];\n                return {\n                    ...article,\n                    tags: article.tags ? typeof article.tags === \"string\" ? JSON.parse(article.tags) : article.tags : [],\n                    category: article.category || \"\",\n                    read_time: article.read_time || 5,\n                    meta_description: article.meta_description || \"\",\n                    featured: article.featured || false,\n                    views_count: article.views_count || 0\n                };\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching article by slug:\", error);\n            return null;\n        }\n    }\n    static async getPublishedArticles(options) {\n        try {\n            const connection = await pool.getConnection();\n            let query = 'SELECT * FROM articles WHERE status = \"published\" ORDER BY published_at DESC, created_at DESC';\n            const params = [];\n            if (options?.limit) {\n                query += \" LIMIT ?\";\n                params.push(options.limit);\n            }\n            const [rows] = await connection.execute(query, params);\n            connection.release();\n            const articles = rows;\n            // Parse JSON tags field and handle missing columns\n            return articles.map((article)=>({\n                    ...article,\n                    tags: article.tags ? typeof article.tags === \"string\" ? JSON.parse(article.tags) : article.tags : [],\n                    category: article.category || \"\",\n                    read_time: article.read_time || 5,\n                    meta_description: article.meta_description || \"\",\n                    featured: article.featured || false,\n                    views_count: article.views_count || 0\n                }));\n        } catch (error) {\n            console.error(\"Error fetching published articles:\", error);\n            return [];\n        }\n    }\n    // Media Files CRUD operations\n    static async getMediaFiles() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM media_files ORDER BY created_at DESC\");\n            connection.release();\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching media files:\", error);\n            return [];\n        }\n    }\n    static async createMediaFile(mediaData) {\n        try {\n            const connection = await pool.getConnection();\n            const [result] = await connection.execute(`INSERT INTO media_files (filename, original_name, file_path, file_size, mime_type, alt_text, uploaded_by)\n         VALUES (?, ?, ?, ?, ?, ?, ?)`, [\n                mediaData.filename,\n                mediaData.original_name,\n                mediaData.file_path,\n                mediaData.file_size,\n                mediaData.mime_type,\n                mediaData.alt_text,\n                mediaData.uploaded_by\n            ]);\n            const insertId = result.insertId;\n            connection.release();\n            return await this.getMediaFileById(insertId);\n        } catch (error) {\n            console.error(\"Error creating media file:\", error);\n            return null;\n        }\n    }\n    static async getMediaFileById(id) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM media_files WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            const mediaFiles = rows;\n            return mediaFiles.length > 0 ? mediaFiles[0] : null;\n        } catch (error) {\n            console.error(\"Error fetching media file by ID:\", error);\n            return null;\n        }\n    }\n    static async updateMediaFile(id, updateData) {\n        try {\n            const connection = await pool.getConnection();\n            const fields = Object.keys(updateData).filter((key)=>key !== \"id\" && key !== \"created_at\" && updateData[key] !== undefined);\n            if (fields.length === 0) {\n                connection.release();\n                return true;\n            }\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>updateData[field]);\n            const [result] = await connection.execute(`UPDATE media_files SET ${setClause} WHERE id = ?`, [\n                ...values,\n                id\n            ]);\n            connection.release();\n            return result.affectedRows > 0;\n        } catch (error) {\n            console.error(\"Error updating media file:\", error);\n            return false;\n        }\n    }\n    static async deleteMediaFile(id) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"DELETE FROM media_files WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting media file:\", error);\n            return false;\n        }\n    }\n    // Hero Sections CRUD operations\n    static async getHeroSections() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM hero_sections ORDER BY id DESC\");\n            connection.release();\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching hero sections:\", error);\n            return [];\n        }\n    }\n    static async createHeroSection(heroData) {\n        try {\n            const connection = await pool.getConnection();\n            const [result] = await connection.execute(`INSERT INTO hero_sections (page, title, subtitle, description, background_image, cta_text, cta_link, is_active)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?)`, [\n                heroData.page,\n                heroData.title,\n                heroData.subtitle,\n                heroData.description,\n                heroData.background_image,\n                heroData.cta_text,\n                heroData.cta_link,\n                heroData.is_active\n            ]);\n            const insertId = result.insertId;\n            connection.release();\n            return await this.getHeroSectionById(insertId);\n        } catch (error) {\n            console.error(\"Error creating hero section:\", error);\n            return null;\n        }\n    }\n    static async getHeroSectionById(id) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM hero_sections WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            const heroSections = rows;\n            return heroSections.length > 0 ? heroSections[0] : null;\n        } catch (error) {\n            console.error(\"Error fetching hero section by ID:\", error);\n            return null;\n        }\n    }\n    static async updateHeroSection(id, updateData) {\n        try {\n            const connection = await pool.getConnection();\n            const fields = Object.keys(updateData).filter((key)=>key !== \"id\");\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>updateData[field]);\n            await connection.execute(`UPDATE hero_sections SET ${setClause}, updated_at = NOW() WHERE id = ?`, [\n                ...values,\n                id\n            ]);\n            connection.release();\n            return await this.getHeroSectionById(id);\n        } catch (error) {\n            console.error(\"Error updating hero section:\", error);\n            return null;\n        }\n    }\n    static async deleteHeroSection(id) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"DELETE FROM hero_sections WHERE id = ?\", [\n                id\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting hero section:\", error);\n            return false;\n        }\n    }\n    // Users authentication\n    static async getUserByEmail(email) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM users WHERE email = ? AND is_active = TRUE\", [\n                email\n            ]);\n            connection.release();\n            const users = rows;\n            return users.length > 0 ? users[0] : null;\n        } catch (error) {\n            console.error(\"Error fetching user by email:\", error);\n            return null;\n        }\n    }\n    static async updateUserLastLogin(userId) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"UPDATE users SET last_login = NOW() WHERE id = ?\", [\n                userId\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error updating user last login:\", error);\n            return false;\n        }\n    }\n    // System logs\n    static async createLog(logData) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(`INSERT INTO system_logs (level, category, message, user_id, ip_address, user_agent, details)\n         VALUES (?, ?, ?, ?, ?, ?, ?)`, [\n                logData.level,\n                logData.category,\n                logData.message,\n                logData.user_id,\n                logData.ip_address,\n                logData.user_agent,\n                JSON.stringify(logData.details || {})\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error creating log:\", error);\n            return false;\n        }\n    }\n    // Get system statistics\n    static async getSystemStats() {\n        try {\n            const connection = await pool.getConnection();\n            const [projectCount] = await connection.execute(\"SELECT COUNT(*) as count FROM projects\");\n            const [developerCount] = await connection.execute(\"SELECT COUNT(*) as count FROM developers\");\n            const [userCount] = await connection.execute(\"SELECT COUNT(*) as count FROM users\");\n            const [logCount] = await connection.execute(\"SELECT COUNT(*) as count FROM system_logs\");\n            connection.release();\n            return {\n                totalProjects: projectCount[0].count,\n                totalDevelopers: developerCount[0].count,\n                totalUsers: userCount[0].count,\n                totalLogs: logCount[0].count,\n                lastBackup: new Date()\n            };\n        } catch (error) {\n            console.error(\"Error fetching system stats:\", error);\n            return {\n                totalProjects: 0,\n                totalDevelopers: 0,\n                totalUsers: 0,\n                totalLogs: 0,\n                lastBackup: new Date()\n            };\n        }\n    }\n    // Settings management\n    static async getSettings() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM site_settings ORDER BY id DESC LIMIT 1\");\n            connection.release();\n            const settings = rows;\n            if (settings.length > 0) {\n                const dbSettings = settings[0];\n                // Transform database columns to API format\n                return {\n                    site: {\n                        title: dbSettings.site_title || \"Premium Choice\",\n                        description: dbSettings.site_description || \"Your trusted partner in Dubai real estate\",\n                        logo: dbSettings.site_logo || \"/logo.png\",\n                        favicon: dbSettings.site_favicon || \"/favicon.ico\"\n                    },\n                    contact: {\n                        email: dbSettings.contact_email || \"admin@example.com\",\n                        phone: dbSettings.contact_phone || null,\n                        address: dbSettings.contact_address || \"Dubai, UAE\",\n                        whatsapp: dbSettings.contact_whatsapp || dbSettings.whatsapp_phone || null\n                    },\n                    social: {\n                        facebook: dbSettings.social_facebook || \"\",\n                        instagram: dbSettings.social_instagram || \"\",\n                        twitter: dbSettings.social_twitter || \"\",\n                        linkedin: dbSettings.social_linkedin || \"\",\n                        youtube: dbSettings.social_youtube || \"\",\n                        tiktok: dbSettings.social_tiktok || \"\",\n                        snapchat: dbSettings.social_snapchat || \"\",\n                        telegram: dbSettings.social_telegram || \"\",\n                        whatsapp: dbSettings.social_whatsapp || \"\"\n                    },\n                    seo: {\n                        metaTitle: dbSettings.seo_meta_title || \"Premium Choice - Dubai Real Estate\",\n                        metaDescription: dbSettings.seo_meta_description || \"Discover premium real estate opportunities in Dubai with Premium Choice. Your trusted partner for luxury properties and investment solutions.\",\n                        keywords: dbSettings.seo_keywords || \"Dubai real estate, luxury properties, investment, Premium Choice\"\n                    },\n                    features: {\n                        enableBlog: dbSettings.features_enable_blog !== false,\n                        enableNewsletter: dbSettings.features_enable_newsletter !== false,\n                        enableWhatsApp: dbSettings.features_enable_whatsapp !== false,\n                        enableLiveChat: dbSettings.features_enable_live_chat === true\n                    },\n                    whatsapp: {\n                        phone: dbSettings.whatsapp_phone || dbSettings.contact_whatsapp || null,\n                        enabled: dbSettings.whatsapp_enabled !== false,\n                        defaultMessage: dbSettings.whatsapp_default_message || \"Hello! I'm interested in your real estate services.\",\n                        businessHours: dbSettings.whatsapp_business_hours ? JSON.parse(dbSettings.whatsapp_business_hours) : null,\n                        autoReply: dbSettings.whatsapp_auto_reply || null,\n                        showOnPages: dbSettings.whatsapp_show_on_pages ? JSON.parse(dbSettings.whatsapp_show_on_pages) : [\n                            \"home\",\n                            \"projects\",\n                            \"contact\"\n                        ]\n                    }\n                };\n            } else {\n                // Return default settings if none exist\n                return {\n                    site: {\n                        title: \"Premium Choice\",\n                        description: \"Your trusted partner in Dubai real estate\",\n                        logo: \"/logo.png\",\n                        favicon: \"/favicon.ico\"\n                    },\n                    contact: {\n                        email: \"admin@example.com\",\n                        phone: null,\n                        address: \"Dubai, UAE\",\n                        whatsapp: null\n                    },\n                    social: {\n                        facebook: \"\",\n                        instagram: \"\",\n                        twitter: \"\",\n                        linkedin: \"\",\n                        youtube: \"\",\n                        tiktok: \"\",\n                        snapchat: \"\",\n                        telegram: \"\",\n                        whatsapp: \"\"\n                    },\n                    seo: {\n                        metaTitle: \"Premium Choice - Dubai Real Estate\",\n                        metaDescription: \"Discover premium real estate opportunities in Dubai with Premium Choice. Your trusted partner for luxury properties and investment solutions.\",\n                        keywords: \"Dubai real estate, luxury properties, investment, Premium Choice\"\n                    },\n                    features: {\n                        enableBlog: true,\n                        enableNewsletter: true,\n                        enableWhatsApp: true,\n                        enableLiveChat: false\n                    },\n                    whatsapp: {\n                        phone: null,\n                        enabled: true,\n                        defaultMessage: \"Hello! I'm interested in your real estate services.\",\n                        businessHours: null,\n                        autoReply: null,\n                        showOnPages: [\n                            \"home\",\n                            \"projects\",\n                            \"contact\"\n                        ]\n                    }\n                };\n            }\n        } catch (error) {\n            console.error(\"Error fetching settings:\", error);\n            // Return default settings on error\n            return {\n                site: {\n                    title: \"Premium Choice\",\n                    description: \"Your trusted partner in Dubai real estate\",\n                    logo: \"/logo.png\",\n                    favicon: \"/favicon.ico\"\n                },\n                contact: {\n                    email: \"admin@example.com\",\n                    phone: null,\n                    address: \"Dubai, UAE\",\n                    whatsapp: null\n                },\n                social: {\n                    facebook: \"\",\n                    instagram: \"\",\n                    twitter: \"\",\n                    linkedin: \"\",\n                    youtube: \"\",\n                    tiktok: \"\",\n                    snapchat: \"\",\n                    telegram: \"\",\n                    whatsapp: \"\"\n                },\n                seo: {\n                    metaTitle: \"Premium Choice - Dubai Real Estate\",\n                    metaDescription: \"Discover premium real estate opportunities in Dubai with Premium Choice. Your trusted partner for luxury properties and investment solutions.\",\n                    keywords: \"Dubai real estate, luxury properties, investment, Premium Choice\"\n                },\n                features: {\n                    enableBlog: true,\n                    enableNewsletter: true,\n                    enableWhatsApp: true,\n                    enableLiveChat: false\n                },\n                whatsapp: {\n                    phone: null,\n                    enabled: true,\n                    defaultMessage: \"Hello! I'm interested in your real estate services.\",\n                    businessHours: null,\n                    autoReply: null,\n                    showOnPages: [\n                        \"home\",\n                        \"projects\",\n                        \"contact\"\n                    ]\n                }\n            };\n        }\n    }\n    static async updateSettings(settingsData) {\n        try {\n            const connection = await pool.getConnection();\n            // Transform API format to database columns\n            const dbData = {};\n            if (settingsData.site) {\n                if (settingsData.site.title) dbData.site_title = settingsData.site.title;\n                if (settingsData.site.description) dbData.site_description = settingsData.site.description;\n                if (settingsData.site.logo) dbData.site_logo = settingsData.site.logo;\n                if (settingsData.site.favicon) dbData.site_favicon = settingsData.site.favicon;\n            }\n            if (settingsData.contact) {\n                if (settingsData.contact.email) dbData.contact_email = settingsData.contact.email;\n                if (settingsData.contact.phone) dbData.contact_phone = settingsData.contact.phone;\n                if (settingsData.contact.address) dbData.contact_address = settingsData.contact.address;\n                if (settingsData.contact.whatsapp) dbData.contact_whatsapp = settingsData.contact.whatsapp;\n            }\n            if (settingsData.social) {\n                if (settingsData.social.facebook !== undefined) dbData.social_facebook = settingsData.social.facebook;\n                if (settingsData.social.instagram !== undefined) dbData.social_instagram = settingsData.social.instagram;\n                if (settingsData.social.twitter !== undefined) dbData.social_twitter = settingsData.social.twitter;\n                if (settingsData.social.linkedin !== undefined) dbData.social_linkedin = settingsData.social.linkedin;\n                if (settingsData.social.youtube !== undefined) dbData.social_youtube = settingsData.social.youtube;\n                if (settingsData.social.tiktok !== undefined) dbData.social_tiktok = settingsData.social.tiktok;\n                if (settingsData.social.snapchat !== undefined) dbData.social_snapchat = settingsData.social.snapchat;\n                if (settingsData.social.telegram !== undefined) dbData.social_telegram = settingsData.social.telegram;\n                if (settingsData.social.whatsapp !== undefined) dbData.social_whatsapp = settingsData.social.whatsapp;\n            }\n            if (settingsData.seo) {\n                if (settingsData.seo.metaTitle) dbData.seo_meta_title = settingsData.seo.metaTitle;\n                if (settingsData.seo.metaDescription) dbData.seo_meta_description = settingsData.seo.metaDescription;\n                if (settingsData.seo.keywords) dbData.seo_keywords = settingsData.seo.keywords;\n            }\n            if (settingsData.features) {\n                if (settingsData.features.enableBlog !== undefined) dbData.features_enable_blog = settingsData.features.enableBlog;\n                if (settingsData.features.enableNewsletter !== undefined) dbData.features_enable_newsletter = settingsData.features.enableNewsletter;\n                if (settingsData.features.enableWhatsApp !== undefined) dbData.features_enable_whatsapp = settingsData.features.enableWhatsApp;\n                if (settingsData.features.enableLiveChat !== undefined) dbData.features_enable_live_chat = settingsData.features.enableLiveChat;\n            }\n            if (settingsData.whatsapp) {\n                if (settingsData.whatsapp.phone !== undefined) dbData.whatsapp_phone = settingsData.whatsapp.phone;\n                if (settingsData.whatsapp.enabled !== undefined) dbData.whatsapp_enabled = settingsData.whatsapp.enabled;\n                if (settingsData.whatsapp.defaultMessage !== undefined) dbData.whatsapp_default_message = settingsData.whatsapp.defaultMessage;\n                if (settingsData.whatsapp.businessHours !== undefined) dbData.whatsapp_business_hours = settingsData.whatsapp.businessHours ? JSON.stringify(settingsData.whatsapp.businessHours) : null;\n                if (settingsData.whatsapp.autoReply !== undefined) dbData.whatsapp_auto_reply = settingsData.whatsapp.autoReply;\n                if (settingsData.whatsapp.showOnPages !== undefined) dbData.whatsapp_show_on_pages = settingsData.whatsapp.showOnPages ? JSON.stringify(settingsData.whatsapp.showOnPages) : null;\n            }\n            // Check if settings exist\n            const [existingRows] = await connection.execute(\"SELECT id FROM site_settings LIMIT 1\");\n            const existing = existingRows;\n            if (existing.length > 0) {\n                // Update existing settings\n                const fields = Object.keys(dbData);\n                if (fields.length > 0) {\n                    const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n                    const values = fields.map((field)=>dbData[field]);\n                    await connection.execute(`UPDATE site_settings SET ${setClause}, updated_at = NOW() WHERE id = ?`, [\n                        ...values,\n                        existing[0].id\n                    ]);\n                }\n            } else {\n                // Insert new settings with defaults\n                const defaultData = {\n                    site_title: \"Premium Choice\",\n                    site_description: \"Your trusted partner in Dubai real estate\",\n                    site_logo: \"/logo.png\",\n                    site_favicon: \"/favicon.ico\",\n                    contact_email: \"admin@example.com\",\n                    contact_phone: null,\n                    contact_address: \"Dubai, UAE\",\n                    contact_whatsapp: null,\n                    social_facebook: \"\",\n                    social_instagram: \"\",\n                    social_twitter: \"\",\n                    social_linkedin: \"\",\n                    social_youtube: \"\",\n                    seo_meta_title: \"Premium Choice - Dubai Real Estate\",\n                    seo_meta_description: \"Discover premium real estate opportunities in Dubai with Premium Choice. Your trusted partner for luxury properties and investment solutions.\",\n                    seo_keywords: \"Dubai real estate, luxury properties, investment, Premium Choice\",\n                    features_enable_blog: true,\n                    features_enable_newsletter: true,\n                    features_enable_whatsapp: true,\n                    features_enable_live_chat: false,\n                    ...dbData\n                };\n                const fields = Object.keys(defaultData);\n                const placeholders = fields.map(()=>\"?\").join(\", \");\n                const values = fields.map((field)=>defaultData[field]);\n                await connection.execute(`INSERT INTO site_settings (${fields.join(\", \")}, created_at, updated_at) VALUES (${placeholders}, NOW(), NOW())`, values);\n            }\n            connection.release();\n            return await this.getSettings();\n        } catch (error) {\n            console.error(\"Error updating settings:\", error);\n            throw error;\n        }\n    }\n    // Presentation slides management\n    static async getPresentationSlides(projectId) {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM presentation_slides WHERE project_id = ? ORDER BY slide_number ASC\", [\n                projectId\n            ]);\n            connection.release();\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching presentation slides:\", error);\n            return [];\n        }\n    }\n    static async createPresentationSlide(slideData) {\n        try {\n            const connection = await pool.getConnection();\n            // Get the next slide number for this project\n            const [maxSlideRows] = await connection.execute(\"SELECT COALESCE(MAX(slide_number), 0) + 1 as next_slide_number FROM presentation_slides WHERE project_id = ?\", [\n                slideData.project_id\n            ]);\n            const nextSlideNumber = maxSlideRows[0].next_slide_number;\n            const [result] = await connection.execute(`INSERT INTO presentation_slides \n         (project_id, slide_number, title, content, description, image_url, background_image, animation_type, duration, voice_over_url)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n                slideData.project_id,\n                slideData.slide_number || nextSlideNumber,\n                slideData.title,\n                slideData.content,\n                slideData.description || null,\n                slideData.image_url || null,\n                slideData.background_image || null,\n                slideData.animation_type || \"fadeIn\",\n                slideData.duration || 5000,\n                slideData.voice_over_url || null\n            ]);\n            connection.release();\n            return result.insertId;\n        } catch (error) {\n            console.error(\"Error creating presentation slide:\", error);\n            throw error;\n        }\n    }\n    static async updatePresentationSlide(slideId, slideData) {\n        try {\n            const connection = await pool.getConnection();\n            const fields = Object.keys(slideData).filter((key)=>key !== \"id\" && key !== \"created_at\");\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>slideData[field]);\n            await connection.execute(`UPDATE presentation_slides SET ${setClause} WHERE id = ?`, [\n                ...values,\n                slideId\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error updating presentation slide:\", error);\n            return false;\n        }\n    }\n    static async deletePresentationSlide(slideId) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"DELETE FROM presentation_slides WHERE id = ?\", [\n                slideId\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting presentation slide:\", error);\n            return false;\n        }\n    }\n    static async deletePresentationSlidesByProject(projectId) {\n        try {\n            const connection = await pool.getConnection();\n            await connection.execute(\"DELETE FROM presentation_slides WHERE project_id = ?\", [\n                projectId\n            ]);\n            connection.release();\n            return true;\n        } catch (error) {\n            console.error(\"Error deleting presentation slides for project:\", error);\n            return false;\n        }\n    }\n    // Hero Images Management\n    static async getHeroImages() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM hero_images ORDER BY order_index ASC, created_at DESC\");\n            connection.release();\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching hero images:\", error);\n            return [];\n        }\n    }\n    static async createHeroImage(imageData) {\n        try {\n            const connection = await pool.getConnection();\n            // Get the next order index\n            const [maxOrderRows] = await connection.execute(\"SELECT COALESCE(MAX(order_index), 0) + 1 as next_order FROM hero_images\");\n            const nextOrder = maxOrderRows[0].next_order;\n            const [result] = await connection.execute(`INSERT INTO hero_images \n         (url, title, description, alt_text, is_active, order_index, created_at, updated_at)\n         VALUES (?, ?, ?, ?, ?, ?, NOW(), NOW())`, [\n                imageData.url,\n                imageData.title,\n                imageData.description || null,\n                imageData.alt_text || imageData.title,\n                imageData.is_active !== undefined ? imageData.is_active : true,\n                imageData.order_index || nextOrder\n            ]);\n            const insertId = result.insertId;\n            // Fetch and return the created image\n            const [newImageRows] = await connection.execute(\"SELECT * FROM hero_images WHERE id = ?\", [\n                insertId\n            ]);\n            connection.release();\n            return newImageRows[0];\n        } catch (error) {\n            console.error(\"Error creating hero image:\", error);\n            throw error;\n        }\n    }\n    static async updateHeroImage(imageId, imageData) {\n        try {\n            const connection = await pool.getConnection();\n            const fields = Object.keys(imageData).filter((key)=>key !== \"id\" && key !== \"created_at\" && key !== \"updated_at\");\n            if (fields.length === 0) {\n                connection.release();\n                return true;\n            }\n            const setClause = fields.map((field)=>`${field} = ?`).join(\", \");\n            const values = fields.map((field)=>imageData[field]);\n            const [result] = await connection.execute(`UPDATE hero_images SET ${setClause}, updated_at = NOW() WHERE id = ?`, [\n                ...values,\n                imageId\n            ]);\n            connection.release();\n            return result.affectedRows > 0;\n        } catch (error) {\n            console.error(\"Error updating hero image:\", error);\n            return false;\n        }\n    }\n    static async deleteHeroImage(imageId) {\n        try {\n            const connection = await pool.getConnection();\n            const [result] = await connection.execute(\"DELETE FROM hero_images WHERE id = ?\", [\n                imageId\n            ]);\n            connection.release();\n            return result.affectedRows > 0;\n        } catch (error) {\n            console.error(\"Error deleting hero image:\", error);\n            return false;\n        }\n    }\n    // AI API Settings Management\n    static async getAISettings() {\n        try {\n            const connection = await pool.getConnection();\n            const [rows] = await connection.execute(\"SELECT * FROM ai_api_settings ORDER BY created_at DESC LIMIT 1\");\n            connection.release();\n            const settings = rows;\n            return settings.length > 0 ? settings[0] : null;\n        } catch (error) {\n            console.error(\"Error fetching AI settings:\", error);\n            return null;\n        }\n    }\n    static async saveAISettings(settingsData) {\n        try {\n            const connection = await pool.getConnection();\n            // Check if settings exist\n            const [existingRows] = await connection.execute(\"SELECT id FROM ai_api_settings LIMIT 1\");\n            const existing = existingRows;\n            if (existing.length > 0) {\n                // Update existing settings\n                await connection.execute(`UPDATE ai_api_settings SET \n           openai_api_key = ?, openai_model = ?, openai_max_tokens = ?, openai_temperature = ?,\n           gemini_api_key = ?, gemini_model = ?, claude_api_key = ?, claude_model = ?,\n           deepseek_api_key = ?, deepseek_model = ?, deepseek_max_tokens = ?, deepseek_temperature = ?,\n           default_provider = ?, ai_enabled = ?, rate_limit_per_minute = ?, rate_limit_per_hour = ?,\n           system_prompt = ?, property_suggestions_enabled = ?, property_suggestions_count = ?, contact_info_in_responses = ?,\n           updated_at = NOW()\n           WHERE id = ?`, [\n                    settingsData.openai_api_key || \"\",\n                    settingsData.openai_model || \"gpt-3.5-turbo\",\n                    settingsData.openai_max_tokens || 1000,\n                    settingsData.openai_temperature || 0.7,\n                    settingsData.gemini_api_key || \"\",\n                    settingsData.gemini_model || \"gemini-pro\",\n                    settingsData.claude_api_key || \"\",\n                    settingsData.claude_model || \"claude-3-sonnet-20240229\",\n                    settingsData.deepseek_api_key || \"\",\n                    settingsData.deepseek_model || \"deepseek-chat\",\n                    settingsData.deepseek_max_tokens || 1000,\n                    settingsData.deepseek_temperature || 0.7,\n                    settingsData.default_provider || \"openai\",\n                    settingsData.ai_enabled !== undefined ? settingsData.ai_enabled : true,\n                    settingsData.rate_limit_per_minute || 10,\n                    settingsData.rate_limit_per_hour || 100,\n                    settingsData.system_prompt || \"You are an expert real estate consultant with deep knowledge of the Dubai and UAE property market.\",\n                    settingsData.property_suggestions_enabled !== undefined ? settingsData.property_suggestions_enabled : true,\n                    settingsData.property_suggestions_count || 4,\n                    settingsData.contact_info_in_responses !== undefined ? settingsData.contact_info_in_responses : true,\n                    existing[0].id\n                ]);\n            } else {\n                // Insert new settings\n                await connection.execute(`INSERT INTO ai_api_settings \n           (openai_api_key, openai_model, openai_max_tokens, openai_temperature,\n            gemini_api_key, gemini_model, claude_api_key, claude_model,\n            deepseek_api_key, deepseek_model, deepseek_max_tokens, deepseek_temperature,\n            default_provider, ai_enabled, rate_limit_per_minute, rate_limit_per_hour,\n            system_prompt, property_suggestions_enabled, property_suggestions_count, contact_info_in_responses,\n            created_at, updated_at)\n           VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())`, [\n                    settingsData.openai_api_key || \"\",\n                    settingsData.openai_model || \"gpt-3.5-turbo\",\n                    settingsData.openai_max_tokens || 1000,\n                    settingsData.openai_temperature || 0.7,\n                    settingsData.gemini_api_key || \"\",\n                    settingsData.gemini_model || \"gemini-pro\",\n                    settingsData.claude_api_key || \"\",\n                    settingsData.claude_model || \"claude-3-sonnet-20240229\",\n                    settingsData.deepseek_api_key || \"\",\n                    settingsData.deepseek_model || \"deepseek-chat\",\n                    settingsData.deepseek_max_tokens || 1000,\n                    settingsData.deepseek_temperature || 0.7,\n                    settingsData.default_provider || \"openai\",\n                    settingsData.ai_enabled !== undefined ? settingsData.ai_enabled : true,\n                    settingsData.rate_limit_per_minute || 10,\n                    settingsData.rate_limit_per_hour || 100,\n                    settingsData.system_prompt || \"You are an expert real estate consultant with deep knowledge of the Dubai and UAE property market.\",\n                    settingsData.property_suggestions_enabled !== undefined ? settingsData.property_suggestions_enabled : true,\n                    settingsData.property_suggestions_count || 4,\n                    settingsData.contact_info_in_responses !== undefined ? settingsData.contact_info_in_responses : true\n                ]);\n            }\n            connection.release();\n            return await this.getAISettings();\n        } catch (error) {\n            console.error(\"Error saving AI settings:\", error);\n            throw error;\n        }\n    }\n    // Activity Logging Methods\n    async getRecentActivities(limit = 10, frontendOnly = false) {\n        try {\n            const connection = await pool.getConnection();\n            let query = `SELECT id, timestamp, level, category, message, details \n                   FROM system_logs`;\n            let params = [];\n            if (frontendOnly) {\n                // Filter for frontend-relevant activities only\n                query += ` WHERE category IN ('project', 'developer', 'article', 'media')`;\n            }\n            query += ` ORDER BY timestamp DESC LIMIT ?`;\n            params.push(limit);\n            const [rows] = await connection.execute(query, params);\n            connection.release();\n            return rows.map((row)=>({\n                    id: row.id,\n                    timestamp: row.timestamp,\n                    level: row.level,\n                    category: row.category,\n                    message: row.message,\n                    details: row.details ? JSON.parse(row.details) : null\n                }));\n        } catch (error) {\n            console.error(\"Error fetching recent activities:\", error);\n            throw error;\n        }\n    }\n    async createActivity(activityData) {\n        try {\n            const connection = await pool.getConnection();\n            const [result] = await connection.execute(`INSERT INTO system_logs (level, category, message, details, timestamp) \n         VALUES (?, ?, ?, ?, NOW())`, [\n                activityData.level,\n                activityData.category,\n                activityData.message,\n                activityData.details\n            ]);\n            const insertId = result.insertId;\n            // Fetch the created activity\n            const [rows] = await connection.execute(`SELECT id, timestamp, level, category, message, details \n         FROM system_logs \n         WHERE id = ?`, [\n                insertId\n            ]);\n            connection.release();\n            const row = rows[0];\n            return {\n                id: row.id,\n                timestamp: row.timestamp,\n                level: row.level,\n                category: row.category,\n                message: row.message,\n                details: row.details ? JSON.parse(row.details) : null\n            };\n        } catch (error) {\n            console.error(\"Error creating activity:\", error);\n            throw error;\n        }\n    }\n}\n// Standalone query function for backward compatibility\nconst query = MySQLDatabase.query.bind(MySQLDatabase);\n// Export getDatabase function for backward compatibility\nasync function getDatabase() {\n    return pool;\n}\n// Export getConnection function for backward compatibility\nasync function getConnection() {\n    return await pool.getConnection();\n}\n// Export Database class alias for compatibility\nconst Database = MySQLDatabase;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MySQLDatabase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxJQUFJelEsS0FBSztnQkFDaEJDLFVBQVV3USxJQUFJeFEsUUFBUTtnQkFDdEI3QyxTQUFTcVQsSUFBSXJULE9BQU87Z0JBQ3BCOEMsU0FBU3VRLElBQUl2USxPQUFPLEdBQUdoRSxLQUFLQyxLQUFLLENBQUNzVSxJQUFJdlEsT0FBTyxJQUFJO1lBQ25EO1FBQ0YsRUFBRSxPQUFPNUYsT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxNQUFNQTtRQUNSO0lBQ0Y7QUFDRjtBQUVBLHVEQUF1RDtBQUNoRCxNQUFNSSxRQUFRWixjQUFjWSxLQUFLLENBQUNrVyxJQUFJLENBQUM5VyxlQUFlO0FBRTdELHlEQUF5RDtBQUNsRCxlQUFlK1c7SUFDcEIsT0FBT2pYO0FBQ1Q7QUFFQSwyREFBMkQ7QUFDcEQsZUFBZUs7SUFDcEIsT0FBTyxNQUFNTCxLQUFLSyxhQUFhO0FBQ2pDO0FBRUEsZ0RBQWdEO0FBQ3pDLE1BQU02VyxXQUFXaFgsY0FBYztBQUV0QyxpRUFBZUEsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZW1pdW0tY2hvaWNlLXJlYWwtZXN0YXRlLy4vbGliL215c3FsLWRhdGFiYXNlLnRzPzZkOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG15c3FsIGZyb20gJ215c3FsMi9wcm9taXNlJztcblxuLy8gRGF0YWJhc2UgY29uZmlndXJhdGlvbiB3aXRoIHlvdXIgcHJvdmlkZWQgY3JlZGVudGlhbHNcbmNvbnN0IGRiQ29uZmlnID0ge1xuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLFxuICBwb3J0OiBwcm9jZXNzLmVudi5EQl9QT1JUID8gTnVtYmVyKHByb2Nlc3MuZW52LkRCX1BPUlQpIDogMzMwNixcbiAgc3NsOiB7XG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICB9LFxuICAvLyBJbmNyZWFzZWQgY29ubmVjdGlvbiBsaW1pdHMgdG8gcHJldmVudCB0aW1lb3V0c1xuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxuICBxdWV1ZUxpbWl0OiAyMCxcbiAgYWNxdWlyZVRpbWVvdXQ6IDYwMDAwLCAvLyA2MCBzZWNvbmRzXG4gIHRpbWVvdXQ6IDYwMDAwLCAvLyA2MCBzZWNvbmRzXG4gIC8vIENvbm5lY3Rpb24gcG9vbCBvcHRpb25zIHN1cHBvcnRlZCBieSBteXNxbDJcbiAgZW5hYmxlS2VlcEFsaXZlOiB0cnVlLFxuICBrZWVwQWxpdmVJbml0aWFsRGVsYXk6IDAsXG4gIGlkbGVUaW1lb3V0OiAzMDAwMDAsIC8vIDUgbWludXRlc1xuICBtYXhJZGxlOiA1LFxuICAvLyBBZGRpdGlvbmFsIGNvbm5lY3Rpb24gbWFuYWdlbWVudFxuICBtdWx0aXBsZVN0YXRlbWVudHM6IGZhbHNlXG59O1xuXG4vLyBDcmVhdGUgY29ubmVjdGlvbiBwb29sXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbChkYkNvbmZpZyk7XG5cbi8vIEludGVyZmFjZXMgZm9yIGRhdGFiYXNlIGVudGl0aWVzXG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3Qge1xuICBpZD86IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBzbHVnOiBzdHJpbmc7XG4gIHByb2plY3RfbmFtZT86IHN0cmluZztcbiAgc3ViX3Byb2plY3Q/OiBzdHJpbmc7XG4gIGRpc3BsYXlfdGl0bGU/OiBzdHJpbmc7XG4gIGRldmVsb3Blcjogc3RyaW5nO1xuICBkZXZlbG9wZXJfaWQ/OiBudW1iZXI7XG4gIGxvY2F0aW9uOiBzdHJpbmc7XG4gIHByaWNlPzogc3RyaW5nO1xuICBzdGFydGluZ19wcmljZT86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBwcm9qZWN0X3R5cGU/OiBzdHJpbmc7XG4gIHR5cGU/OiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xuICBjb2xvcl9wYWxldHRlPzogc3RyaW5nIHwgbnVsbDtcbiAgcHJvcGVydHlfdHlwZT86IHN0cmluZ1tdO1xuICBwcm9wZXJ0eV90eXBlcz86IHN0cmluZ1tdO1xuICBzdWJfcHJvamVjdHM/OiBzdHJpbmdbXTtcbiAgYmVkcm9vbXM/OiBudW1iZXI7XG4gIGJhdGhyb29tcz86IG51bWJlcjtcbiAgc3R1ZGlvcz86IG51bWJlcjtcbiAgdW5pdHNfMWJlZHJvb20/OiBudW1iZXI7XG4gIHVuaXRzXzJiZWRyb29tPzogbnVtYmVyO1xuICB1bml0c18zYmVkcm9vbT86IG51bWJlcjtcbiAgdW5pdHNfNGJlZHJvb20/OiBudW1iZXI7XG4gIHVuaXRzXzViZWRyb29tPzogbnVtYmVyO1xuICB1bml0c182YmVkcm9vbT86IG51bWJlcjtcbiAgdW5pdHNfN2JlZHJvb20/OiBudW1iZXI7XG4gIHVuaXRzXzhwbHVzX2JlZHJvb21zPzogc3RyaW5nO1xuICBjdXN0b21fYmVkcm9vbV9jb3VudD86IHN0cmluZztcbiAgdW5pdHNfb2ZmaWNlPzogbnVtYmVyO1xuICBzaG9wX2NvbW1lcmNpYWw/OiBudW1iZXI7XG4gIGxpdmluZ19yb29tcz86IG51bWJlcjtcbiAgdW5pdHM/OiBzdHJpbmdbXTtcbiAgYXJlYTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpbWFnZTogc3RyaW5nO1xuICBnYWxsZXJ5Pzogc3RyaW5nW107XG4gIGNvb3JkaW5hdGVzX2xhdDogbnVtYmVyO1xuICBjb29yZGluYXRlc19sbmc6IG51bWJlcjtcbiAgZmVhdHVyZXM/OiBzdHJpbmdbXTtcbiAgYW1lbml0aWVzPzogc3RyaW5nW107XG4gIGlzX2ZlYXR1cmVkPzogYm9vbGVhbjtcbiAgZmVhdHVyZWQ/OiBib29sZWFuOyAvLyBBbGlhcyBmb3IgaXNfZmVhdHVyZWRcbiAgYnJvY2h1cmVfdXJsPzogc3RyaW5nO1xuICB0aGVtZV9jb2xvcj86IHN0cmluZztcbiAgdm9pY2Vfb3Zlcl91cmw/OiBzdHJpbmc7XG4gIC8vIFBvd2VyUG9pbnQgcHJlc2VudGF0aW9uIGZpZWxkcyAobGVnYWN5KVxuICBwcmVzZW50YXRpb25fZmlsZT86IHN0cmluZyB8IG51bGw7XG4gIHByZXNlbnRhdGlvbl91cmw/OiBzdHJpbmc7XG4gIHByZXNlbnRhdGlvbl9zbGlkZXM/OiBQcmVzZW50YXRpb25TbGlkZVtdO1xuICBwcmVzZW50YXRpb25fYW5pbWF0aW9ucz86IGFueTtcbiAgcHJlc2VudGF0aW9uX2VmZmVjdHM/OiBhbnk7XG4gIG1lZGlhX3R5cGU/OiAncGRmJyB8ICd2aWRlbyc7XG4gIG1lZGlhX2ZpbGVzPzogQXJyYXk8e1xuICAgIGlkPzogbnVtYmVyO1xuICAgIGZpbGVfbmFtZT86IHN0cmluZztcbiAgICBmaWxlX3BhdGg/OiBzdHJpbmc7XG4gICAgdXJsPzogc3RyaW5nO1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgbWVkaWFfdHlwZT86IHN0cmluZztcbiAgICB0eXBlPzogc3RyaW5nO1xuICAgIG1pbWVfdHlwZT86IHN0cmluZztcbiAgfT47XG4gIGZlYXR1cmVkX3ZpZGVvPzogc3RyaW5nO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldmVsb3BlciB7XG4gIGlkPzogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNsdWc6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgbG9nbz86IHN0cmluZztcbiAgZXN0YWJsaXNoZWQ/OiBzdHJpbmc7XG4gIHByb2plY3RzX2NvdW50OiBudW1iZXI7XG4gIGxvY2F0aW9uPzogc3RyaW5nO1xuICB3ZWJzaXRlPzogc3RyaW5nO1xuICBwaG9uZT86IHN0cmluZztcbiAgZW1haWw/OiBzdHJpbmc7XG4gIHN0YXR1czogJ0FjdGl2ZScgfCAnSW5hY3RpdmUnO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xuICBpZD86IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmRfaGFzaDogc3RyaW5nO1xuICByb2xlOiAnYWRtaW4nIHwgJ2VkaXRvcicgfCAndmlld2VyJztcbiAgbmFtZTogc3RyaW5nO1xuICBsYXN0X2xvZ2luPzogRGF0ZTtcbiAgY3JlYXRlZF9hdD86IERhdGU7XG4gIGlzX2FjdGl2ZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZXJvU2VjdGlvbiB7XG4gIGlkPzogbnVtYmVyO1xuICBwYWdlOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHN1YnRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGJhY2tncm91bmRfaW1hZ2U6IHN0cmluZztcbiAgY3RhX3RleHQ6IHN0cmluZztcbiAgY3RhX2xpbms6IHN0cmluZztcbiAgaXNfYWN0aXZlOiBib29sZWFuO1xuICB1cGRhdGVkX2F0PzogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcnRpY2xlIHtcbiAgaWQ/OiBudW1iZXI7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNsdWc6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBleGNlcnB0Pzogc3RyaW5nO1xuICBmZWF0dXJlZF9pbWFnZT86IHN0cmluZztcbiAgYXV0aG9yOiBzdHJpbmc7XG4gIGF1dGhvcl9pZD86IG51bWJlcjtcbiAgc3RhdHVzOiAnZHJhZnQnIHwgJ3B1Ymxpc2hlZCcgfCAnYXJjaGl2ZWQnO1xuICBwdWJsaXNoZWRfYXQ/OiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIHJlYWRfdGltZT86IG51bWJlcjtcbiAgbWV0YV90aXRsZT86IHN0cmluZztcbiAgbWV0YV9kZXNjcmlwdGlvbj86IHN0cmluZztcbiAgZmVhdHVyZWQ/OiBib29sZWFuO1xuICB2aWV3c19jb3VudD86IG51bWJlcjtcbiAgY3JlYXRlZF9hdD86IHN0cmluZztcbiAgdXBkYXRlZF9hdD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZWRpYUZpbGUge1xuICBpZD86IG51bWJlcjtcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgb3JpZ2luYWxfbmFtZTogc3RyaW5nO1xuICBmaWxlX3BhdGg6IHN0cmluZztcbiAgZmlsZV9zaXplOiBudW1iZXI7XG4gIG1pbWVfdHlwZTogc3RyaW5nO1xuICAvLyBPcHRpb25hbCBjYW1lbENhc2UgYWxpYXNlcyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGNsaWVudCBwYXlsb2Fkc1xuICBwYXRoPzogc3RyaW5nO1xuICBzaXplPzogbnVtYmVyO1xuICBtaW1lVHlwZT86IHN0cmluZztcbiAgdXBsb2FkZWRBdD86IHN0cmluZztcbiAgYWx0X3RleHQ/OiBzdHJpbmc7XG4gIHVwbG9hZGVkX2J5PzogbnVtYmVyO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN5c3RlbUxvZyB7XG4gIGlkPzogbnVtYmVyO1xuICB0aW1lc3RhbXA/OiBEYXRlO1xuICBsZXZlbDogJ2luZm8nIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJyB8ICdzdWNjZXNzJztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB1c2VyX2lkPzogbnVtYmVyO1xuICBpcF9hZGRyZXNzPzogc3RyaW5nO1xuICB1c2VyX2FnZW50Pzogc3RyaW5nO1xuICBkZXRhaWxzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN5c3RlbUFjdGl2aXR5IHtcbiAgaWQ6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBsZXZlbDogJ2luZm8nIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJyB8ICdzdWNjZXNzJztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBkZXRhaWxzPzogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgaWQ/OiBudW1iZXI7XG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICByZXNwb25zZTogc3RyaW5nO1xuICB0aW1lc3RhbXA/OiBEYXRlO1xuICByZXNwb25zZV90aW1lOiBudW1iZXI7XG4gIHVzZXJfaXA/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc2VudGF0aW9uU2xpZGUge1xuICBpZD86IG51bWJlcjtcbiAgcHJvamVjdF9pZDogbnVtYmVyO1xuICBzbGlkZV9udW1iZXI6IG51bWJlcjtcbiAgdGl0bGU6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgaW1hZ2VfdXJsPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kX2ltYWdlPzogc3RyaW5nO1xuICBhbmltYXRpb25fdHlwZT86IHN0cmluZztcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIHZvaWNlX292ZXJfdXJsPzogc3RyaW5nO1xuICBjcmVhdGVkX2F0PzogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZXJvSW1hZ2Uge1xuICBpZD86IG51bWJlcjtcbiAgdXJsOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBhbHRfdGV4dD86IHN0cmluZztcbiAgaXNfYWN0aXZlOiBib29sZWFuO1xuICBvcmRlcl9pbmRleDogbnVtYmVyO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFJQXBpU2V0dGluZ3Mge1xuICBpZD86IG51bWJlcjtcbiAgb3BlbmFpX2FwaV9rZXk6IHN0cmluZztcbiAgb3BlbmFpX21vZGVsOiBzdHJpbmc7XG4gIG9wZW5haV9tYXhfdG9rZW5zOiBudW1iZXI7XG4gIG9wZW5haV90ZW1wZXJhdHVyZTogbnVtYmVyO1xuICBnZW1pbmlfYXBpX2tleTogc3RyaW5nO1xuICBnZW1pbmlfbW9kZWw6IHN0cmluZztcbiAgY2xhdWRlX2FwaV9rZXk6IHN0cmluZztcbiAgY2xhdWRlX21vZGVsOiBzdHJpbmc7XG4gIGRlZXBzZWVrX2FwaV9rZXk6IHN0cmluZztcbiAgZGVlcHNlZWtfbW9kZWw6IHN0cmluZztcbiAgZGVlcHNlZWtfbWF4X3Rva2VuczogbnVtYmVyO1xuICBkZWVwc2Vla190ZW1wZXJhdHVyZTogbnVtYmVyO1xuICBkZWZhdWx0X3Byb3ZpZGVyOiBzdHJpbmc7XG4gIGFpX2VuYWJsZWQ6IGJvb2xlYW47XG4gIHJhdGVfbGltaXRfcGVyX21pbnV0ZTogbnVtYmVyO1xuICByYXRlX2xpbWl0X3Blcl9ob3VyOiBudW1iZXI7XG4gIHN5c3RlbV9wcm9tcHQ6IHN0cmluZztcbiAgcHJvcGVydHlfc3VnZ2VzdGlvbnNfZW5hYmxlZDogYm9vbGVhbjtcbiAgcHJvcGVydHlfc3VnZ2VzdGlvbnNfY291bnQ6IG51bWJlcjtcbiAgY29udGFjdF9pbmZvX2luX3Jlc3BvbnNlczogYm9vbGVhbjtcbiAgY3JlYXRlZF9hdD86IHN0cmluZztcbiAgdXBkYXRlZF9hdD86IHN0cmluZztcbn1cblxuLy8gRGF0YWJhc2UgY2xhc3Mgd2l0aCBNeVNRTCBvcGVyYXRpb25zXG5leHBvcnQgY2xhc3MgTXlTUUxEYXRhYmFzZSB7XG4gIC8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxuICBzdGF0aWMgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucGluZygpO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCcpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2xlYW51cCBkYXRhYmFzZSBjb25uZWN0aW9uc1xuICBzdGF0aWMgYXN5bmMgY2xlYW51cCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcG9vbC5lbmQoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgY29ubmVjdGlvbnMgY2xvc2VkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBjbG9zaW5nIGRhdGFiYXNlIGNvbm5lY3Rpb25zOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmljIHF1ZXJ5IGV4ZWN1dGlvbiBtZXRob2RcbiAgc3RhdGljIGFzeW5jIGV4ZWN1dGVRdWVyeShxdWVyeTogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShxdWVyeSwgcGFyYW1zKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIHF1ZXJ5OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIFF1ZXJ5IG1ldGhvZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICBzdGF0aWMgYXN5bmMgcXVlcnkoc3FsOiBzdHJpbmcsIHBhcmFtczogYW55W10gPSBbXSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuZXhlY3V0ZVF1ZXJ5KHNxbCwgcGFyYW1zKTtcbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgZGF0YWJhc2UgY29ubmVjdGlvbiBhbmQgdGFibGVzXG4gIHN0YXRpYyBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUZXN0IGNvbm5lY3Rpb24gZmlyc3RcbiAgICAgIGNvbnN0IGlzQ29ubmVjdGVkID0gYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgdGFibGVzXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplVGFibGVzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIG1pc3NpbmcgY29sdW1ucyB0byBzaXRlX3NldHRpbmdzIHRhYmxlXG4gIHN0YXRpYyBhc3luYyBhZGRNaXNzaW5nU29jaWFsQ29sdW1ucygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBjb2x1bW5zIGV4aXN0IGFuZCBhZGQgdGhlbSBpZiB0aGV5IGRvbid0XG4gICAgICBjb25zdCBhbHRlclRhYmxlU1FMID0gYFxuICAgICAgICBBTFRFUiBUQUJMRSBzaXRlX3NldHRpbmdzIFxuICAgICAgICBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgc29jaWFsX3Rpa3RvayBWQVJDSEFSKDUwMCksXG4gICAgICAgIEFERCBDT0xVTU4gSUYgTk9UIEVYSVNUUyBzb2NpYWxfc25hcGNoYXQgVkFSQ0hBUig1MDApLFxuICAgICAgICBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgc29jaWFsX3RlbGVncmFtIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgQUREIENPTFVNTiBJRiBOT1QgRVhJU1RTIHNvY2lhbF93aGF0c2FwcCBWQVJDSEFSKDUwMCk7XG4gICAgICBgO1xuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoYWx0ZXJUYWJsZVNRTCk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTWlzc2luZyBzb2NpYWwgbWVkaWEgY29sdW1ucyBhZGRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgYWRkaW5nIG1pc3NpbmcgY29sdW1uczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSB0YWJsZXNcbiAgc3RhdGljIGFzeW5jIGluaXRpYWxpemVUYWJsZXMoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHRhYmxlcyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgICBjb25zdCBjcmVhdGVUYWJsZXNTUUwgPSBgXG4gICAgICAgIC0tIFVzZXJzIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgZW1haWwgVkFSQ0hBUigyNTUpIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgICAgICBwYXNzd29yZF9oYXNoIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICByb2xlIEVOVU0oJ2FkbWluJywgJ2VkaXRvcicsICd2aWV3ZXInKSBERUZBVUxUICd2aWV3ZXInLFxuICAgICAgICAgIG5hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICAgIGxhc3RfbG9naW4gVElNRVNUQU1QIE5VTEwsXG4gICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBpc19hY3RpdmUgQk9PTEVBTiBERUZBVUxUIFRSVUVcbiAgICAgICAgKTtcblxuICAgICAgICAtLSBEZXZlbG9wZXJzIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGRldmVsb3BlcnMgKFxuICAgICAgICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICBzbHVnIFZBUkNIQVIoMjU1KSBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgICBsb2dvIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBlc3RhYmxpc2hlZCBWQVJDSEFSKDUwKSxcbiAgICAgICAgICBwcm9qZWN0c19jb3VudCBJTlQgREVGQVVMVCAwLFxuICAgICAgICAgIGxvY2F0aW9uIFZBUkNIQVIoMjU1KSxcbiAgICAgICAgICB3ZWJzaXRlIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBwaG9uZSBWQVJDSEFSKDUwKSxcbiAgICAgICAgICBlbWFpbCBWQVJDSEFSKDI1NSksXG4gICAgICAgICAgc3RhdHVzIEVOVU0oJ0FjdGl2ZScsICdJbmFjdGl2ZScpIERFRkFVTFQgJ0FjdGl2ZScsXG4gICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgICApO1xuXG4gICAgICAgIC0tIFByb2plY3RzIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByb2plY3RzIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgbmFtZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgICAgc2x1ZyBWQVJDSEFSKDI1NSkgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgICAgIGRldmVsb3BlciBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgICAgbG9jYXRpb24gVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICAgIHByaWNlIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICAgICAgICBzdGF0dXMgRU5VTSgnQXZhaWxhYmxlJywgJ1NvbGQnLCAnVW5kZXIgQ29uc3RydWN0aW9uJykgREVGQVVMVCAnQXZhaWxhYmxlJyxcbiAgICAgICAgICBiZWRyb29tcyBJTlQgTk9UIE5VTEwsXG4gICAgICAgICAgYmF0aHJvb21zIElOVCBOT1QgTlVMTCxcbiAgICAgICAgICBzdHVkaW9zIElOVCBERUZBVUxUIDAsXG4gICAgICAgICAgYXJlYSBWQVJDSEFSKDEwMCkgTk9UIE5VTEwsXG4gICAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgICBpbWFnZSBWQVJDSEFSKDUwMCksXG4gICAgICAgICAgZ2FsbGVyeSBKU09OLFxuICAgICAgICAgIGNvb3JkaW5hdGVzX2xhdCBERUNJTUFMKDEwLCA4KSxcbiAgICAgICAgICBjb29yZGluYXRlc19sbmcgREVDSU1BTCgxMSwgOCksXG4gICAgICAgICAgZmVhdHVyZXMgSlNPTixcbiAgICAgICAgICBhbWVuaXRpZXMgSlNPTixcbiAgICAgICAgICBwcmVzZW50YXRpb25fZmlsZSBWQVJDSEFSKDUwMCksXG4gICAgICAgICAgcHJlc2VudGF0aW9uX3VybCBWQVJDSEFSKDUwMCksXG4gICAgICAgICAgcHJlc2VudGF0aW9uX3NsaWRlcyBKU09OLFxuICAgICAgICAgIHByZXNlbnRhdGlvbl9hbmltYXRpb25zIEpTT04sXG4gICAgICAgICAgcHJlc2VudGF0aW9uX2VmZmVjdHMgSlNPTixcbiAgICAgICAgICBtZWRpYV9maWxlcyBKU09OLFxuICAgICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICAgKTtcblxuICAgICAgICAtLSBIZXJvIHNlY3Rpb25zIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGhlcm9fc2VjdGlvbnMgKFxuICAgICAgICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICAgICAgICBwYWdlIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiAgICAgICAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgICAgc3VidGl0bGUgVkFSQ0hBUigyNTUpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgICAgYmFja2dyb3VuZF9pbWFnZSBWQVJDSEFSKDUwMCksXG4gICAgICAgICAgY3RhX3RleHQgVkFSQ0hBUigxMDApLFxuICAgICAgICAgIGN0YV9saW5rIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBpc19hY3RpdmUgQk9PTEVBTiBERUZBVUxUIFRSVUUsXG4gICAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICAgKTtcblxuICAgICAgICAtLSBBcnRpY2xlcyB0YWJsZVxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhcnRpY2xlcyAoXG4gICAgICAgICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgICAgICAgIHRpdGxlIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICBzbHVnIFZBUkNIQVIoMjU1KSBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgICAgY29udGVudCBMT05HVEVYVCxcbiAgICAgICAgICBleGNlcnB0IFRFWFQsXG4gICAgICAgICAgZmVhdHVyZWRfaW1hZ2UgVkFSQ0hBUig1MDApLFxuICAgICAgICAgIGF1dGhvciBWQVJDSEFSKDI1NSksXG4gICAgICAgICAgc3RhdHVzIEVOVU0oJ2RyYWZ0JywgJ3B1Ymxpc2hlZCcsICdhcmNoaXZlZCcpIERFRkFVTFQgJ2RyYWZ0JyxcbiAgICAgICAgICBwdWJsaXNoZWRfYXQgVElNRVNUQU1QIE5VTEwsXG4gICAgICAgICAgdGFncyBKU09OLFxuICAgICAgICAgIGNhdGVnb3J5IFZBUkNIQVIoMTAwKSxcbiAgICAgICAgICByZWFkX3RpbWUgSU5UIERFRkFVTFQgNSxcbiAgICAgICAgICBtZXRhX2Rlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgICAgZmVhdHVyZWQgQk9PTEVBTiBERUZBVUxUIEZBTFNFLFxuICAgICAgICAgIHZpZXdzX2NvdW50IElOVCBERUZBVUxUIDAsXG4gICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgICApO1xuXG4gICAgICAgIC0tIE1lZGlhIGZpbGVzIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1lZGlhX2ZpbGVzIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgZmlsZW5hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICAgIG9yaWdpbmFsX25hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICAgIGZpbGVfcGF0aCBWQVJDSEFSKDUwMCkgTk9UIE5VTEwsXG4gICAgICAgICAgZmlsZV9zaXplIEJJR0lOVCBOT1QgTlVMTCxcbiAgICAgICAgICBtaW1lX3R5cGUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgICAgICAgIGFsdF90ZXh0IFZBUkNIQVIoMjU1KSxcbiAgICAgICAgICB1cGxvYWRlZF9ieSBJTlQsXG4gICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBGT1JFSUdOIEtFWSAodXBsb2FkZWRfYnkpIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBTRVQgTlVMTFxuICAgICAgICApO1xuXG4gICAgICAgIC0tIFN5c3RlbSBsb2dzIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHN5c3RlbV9sb2dzIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgdGltZXN0YW1wIFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICAgIGxldmVsIEVOVU0oJ2luZm8nLCAnd2FybmluZycsICdlcnJvcicsICdzdWNjZXNzJykgTk9UIE5VTEwsXG4gICAgICAgICAgY2F0ZWdvcnkgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuICAgICAgICAgIG1lc3NhZ2UgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICB1c2VyX2lkIElOVCxcbiAgICAgICAgICBpcF9hZGRyZXNzIFZBUkNIQVIoNDUpLFxuICAgICAgICAgIHVzZXJfYWdlbnQgVEVYVCxcbiAgICAgICAgICBkZXRhaWxzIEpTT04sXG4gICAgICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBTRVQgTlVMTFxuICAgICAgICApO1xuXG4gICAgICAgIC0tIENoYXQgbWVzc2FnZXMgdGFibGVcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2hhdF9tZXNzYWdlcyAoXG4gICAgICAgICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLFxuICAgICAgICAgIHNlc3Npb25faWQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICAgIG1lc3NhZ2UgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgICByZXNwb25zZSBURVhUIE5PVCBOVUxMLFxuICAgICAgICAgIHRpbWVzdGFtcCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICByZXNwb25zZV90aW1lIElOVCBOT1QgTlVMTCxcbiAgICAgICAgICB1c2VyX2lwIFZBUkNIQVIoNDUpXG4gICAgICAgICk7XG5cbiAgICAgICAgLS0gUHJlc2VudGF0aW9uIHNsaWRlcyB0YWJsZVxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcmVzZW50YXRpb25fc2xpZGVzIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgcHJvamVjdF9pZCBJTlQgTk9UIE5VTEwsXG4gICAgICAgICAgc2xpZGVfbnVtYmVyIElOVCBOT1QgTlVMTCxcbiAgICAgICAgICB0aXRsZSBWQVJDSEFSKDI1NSksXG4gICAgICAgICAgY29udGVudCBURVhULFxuICAgICAgICAgIGltYWdlX3VybCBWQVJDSEFSKDUwMCksXG4gICAgICAgICAgYW5pbWF0aW9uX3R5cGUgVkFSQ0hBUigxMDApLFxuICAgICAgICAgIGR1cmF0aW9uIElOVCBERUZBVUxUIDUwMDAsXG4gICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBGT1JFSUdOIEtFWSAocHJvamVjdF9pZCkgUkVGRVJFTkNFUyBwcm9qZWN0cyhpZCkgT04gREVMRVRFIENBU0NBREVcbiAgICAgICAgKTtcblxuICAgICAgICAtLSBTaXRlIHNldHRpbmdzIHRhYmxlXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNpdGVfc2V0dGluZ3MgKFxuICAgICAgICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICAgICAgICBzaXRlX3RpdGxlIFZBUkNIQVIoMjU1KSBERUZBVUxUICdQcmVtaXVtIENob2ljZScsXG4gICAgICAgICAgc2l0ZV9kZXNjcmlwdGlvbiBURVhUIERFRkFVTFQgJ1lvdXIgdHJ1c3RlZCBwYXJ0bmVyIGluIER1YmFpIHJlYWwgZXN0YXRlJyxcbiAgICAgICAgICBzaXRlX2xvZ28gVkFSQ0hBUig1MDApIERFRkFVTFQgJy9sb2dvLnBuZycsXG4gICAgICAgICAgc2l0ZV9mYXZpY29uIFZBUkNIQVIoNTAwKSBERUZBVUxUICcvZmF2aWNvbi5pY28nLFxuICAgICAgICAgIGNvbnRhY3RfZW1haWwgVkFSQ0hBUigyNTUpIERFRkFVTFQgJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICBjb250YWN0X3Bob25lIFZBUkNIQVIoNTApIERFRkFVTFQgTlVMTCxcbiAgICBjb250YWN0X2FkZHJlc3MgVEVYVCBERUZBVUxUICdEdWJhaSwgVUFFJyxcbiAgICBjb250YWN0X3doYXRzYXBwIFZBUkNIQVIoNTApIERFRkFVTFQgTlVMTCxcbiAgICAgICAgICBzb2NpYWxfZmFjZWJvb2sgVkFSQ0hBUig1MDApLFxuICAgICAgICAgIHNvY2lhbF9pbnN0YWdyYW0gVkFSQ0hBUig1MDApLFxuICAgICAgICAgIHNvY2lhbF90d2l0dGVyIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBzb2NpYWxfbGlua2VkaW4gVkFSQ0hBUig1MDApLFxuICAgICAgICAgIHNvY2lhbF95b3V0dWJlIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBzb2NpYWxfdGlrdG9rIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBzb2NpYWxfc25hcGNoYXQgVkFSQ0hBUig1MDApLFxuICAgICAgICAgIHNvY2lhbF90ZWxlZ3JhbSBWQVJDSEFSKDUwMCksXG4gICAgICAgICAgc29jaWFsX3doYXRzYXBwIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgICBzZW9fbWV0YV90aXRsZSBWQVJDSEFSKDI1NSkgREVGQVVMVCAnUHJlbWl1bSBDaG9pY2UgLSBEdWJhaSBSZWFsIEVzdGF0ZScsXG4gICAgICAgICAgc2VvX21ldGFfZGVzY3JpcHRpb24gVEVYVCBERUZBVUxUICdEaXNjb3ZlciBwcmVtaXVtIHJlYWwgZXN0YXRlIG9wcG9ydHVuaXRpZXMgaW4gRHViYWkgd2l0aCBQcmVtaXVtIENob2ljZS4gWW91ciB0cnVzdGVkIHBhcnRuZXIgZm9yIGx1eHVyeSBwcm9wZXJ0aWVzIGFuZCBpbnZlc3RtZW50IHNvbHV0aW9ucy4nLFxuICAgICAgICAgIHNlb19rZXl3b3JkcyBURVhUIERFRkFVTFQgJ0R1YmFpIHJlYWwgZXN0YXRlLCBsdXh1cnkgcHJvcGVydGllcywgaW52ZXN0bWVudCwgUHJlbWl1bSBDaG9pY2UnLFxuICAgICAgICAgIGZlYXR1cmVzX2VuYWJsZV9ibG9nIEJPT0xFQU4gREVGQVVMVCBUUlVFLFxuICAgICAgICAgIGZlYXR1cmVzX2VuYWJsZV9uZXdzbGV0dGVyIEJPT0xFQU4gREVGQVVMVCBUUlVFLFxuICAgICAgICAgIGZlYXR1cmVzX2VuYWJsZV93aGF0c2FwcCBCT09MRUFOIERFRkFVTFQgVFJVRSxcbiAgICAgICAgICBmZWF0dXJlc19lbmFibGVfbGl2ZV9jaGF0IEJPT0xFQU4gREVGQVVMVCBGQUxTRSxcbiAgICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICAgIHVwZGF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgT04gVVBEQVRFIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICAgICk7XG5cbiAgICAgICAgLS0gUHJvamVjdCBtZWRpYSB0YWJsZSBmb3IgZW5oYW5jZWQgbWVkaWEgbWFuYWdlbWVudFxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcm9qZWN0X21lZGlhIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgcHJvamVjdF9pZCBJTlQgTk9UIE5VTEwsXG4gICAgICAgICAgZmlsZV9uYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICBmaWxlX3BhdGggVkFSQ0hBUig1MDApIE5PVCBOVUxMLFxuICAgICAgICAgIGZpbGVfc2l6ZSBCSUdJTlQgTk9UIE5VTEwsXG4gICAgICAgICAgbWVkaWFfdHlwZSBFTlVNKCdpbWFnZScsICd2aWRlbycsICdhbmltYXRpb24nLCAncGRmJywgJ3BwdHgnKSBOT1QgTlVMTCxcbiAgICAgICAgICBmaWxlX2V4dGVuc2lvbiBWQVJDSEFSKDEwKSBOT1QgTlVMTCxcbiAgICAgICAgICB1cGxvYWRfZGF0ZSBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBGT1JFSUdOIEtFWSAocHJvamVjdF9pZCkgUkVGRVJFTkNFUyBwcm9qZWN0cyhpZCkgT04gREVMRVRFIENBU0NBREVcbiAgICAgICAgKTtcblxuICAgICAgICAtLSBIZXJvIGltYWdlcyB0YWJsZSBmb3IgbGFuZGluZyBwYWdlIGNhcm91c2VsXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGhlcm9faW1hZ2VzIChcbiAgICAgICAgICBpZCBJTlQgQVVUT19JTkNSRU1FTlQgUFJJTUFSWSBLRVksXG4gICAgICAgICAgdXJsIFZBUkNIQVIoNTAwKSBOT1QgTlVMTCxcbiAgICAgICAgICB0aXRsZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgICBhbHRfdGV4dCBWQVJDSEFSKDI1NSksXG4gICAgICAgICAgaXNfYWN0aXZlIEJPT0xFQU4gREVGQVVMVCBUUlVFLFxuICAgICAgICAgIG9yZGVyX2luZGV4IElOVCBERUZBVUxUIDAsXG4gICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIE9OIFVQREFURSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBJTkRFWCBpZHhfYWN0aXZlX29yZGVyIChpc19hY3RpdmUsIG9yZGVyX2luZGV4KVxuICAgICAgICApO1xuXG4gICAgICAgIC0tIEFJIEFQSSBzZXR0aW5ncyB0YWJsZSBmb3IgQUkgaW50ZWdyYXRpb24gY29udHJvbFxuICAgICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhaV9hcGlfc2V0dGluZ3MgKFxuICAgICAgICAgIGlkIElOVCBBVVRPX0lOQ1JFTUVOVCBQUklNQVJZIEtFWSxcbiAgICAgICAgICBvcGVuYWlfYXBpX2tleSBWQVJDSEFSKDI1NSksXG4gICAgICAgICAgb3BlbmFpX21vZGVsIFZBUkNIQVIoMTAwKSBERUZBVUxUICdncHQtMy41LXR1cmJvJyxcbiAgICAgICAgICBvcGVuYWlfbWF4X3Rva2VucyBJTlQgREVGQVVMVCAxMDAwLFxuICAgICAgICAgIG9wZW5haV90ZW1wZXJhdHVyZSBERUNJTUFMKDMsMikgREVGQVVMVCAwLjcwLFxuICAgICAgICAgIGdvb2dsZV9hcGlfa2V5IFZBUkNIQVIoMjU1KSxcbiAgICAgICAgICBnb29nbGVfbW9kZWwgVkFSQ0hBUigxMDApIERFRkFVTFQgJ2dlbWluaS1wcm8nLFxuICAgICAgICAgIGdvb2dsZV9tYXhfdG9rZW5zIElOVCBERUZBVUxUIDEwMDAsXG4gICAgICAgICAgZ29vZ2xlX3RlbXBlcmF0dXJlIERFQ0lNQUwoMywyKSBERUZBVUxUIDAuNzAsXG4gICAgICAgICAgYW50aHJvcGljX2FwaV9rZXkgVkFSQ0hBUigyNTUpLFxuICAgICAgICAgIGFudGhyb3BpY19tb2RlbCBWQVJDSEFSKDEwMCkgREVGQVVMVCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JyxcbiAgICAgICAgICBhbnRocm9waWNfbWF4X3Rva2VucyBJTlQgREVGQVVMVCAxMDAwLFxuICAgICAgICAgIGFudGhyb3BpY190ZW1wZXJhdHVyZSBERUNJTUFMKDMsMikgREVGQVVMVCAwLjcwLFxuICAgICAgICAgIGRlZmF1bHRfcHJvdmlkZXIgRU5VTSgnb3BlbmFpJywgJ2dvb2dsZScsICdhbnRocm9waWMnKSBERUZBVUxUICdvcGVuYWknLFxuICAgICAgICAgIGFpX2VuYWJsZWQgQk9PTEVBTiBERUZBVUxUIFRSVUUsXG4gICAgICAgICAgcmF0ZV9saW1pdF9wZXJfbWludXRlIElOVCBERUZBVUxUIDEwLFxuICAgICAgICAgIHJhdGVfbGltaXRfcGVyX2hvdXIgSU5UIERFRkFVTFQgMTAwLFxuICAgICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgICAgKTtcbiAgICAgIGA7XG5cbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShjcmVhdGVUYWJsZXNTUUwpO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIHRhYmxlcyBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGluaXRpYWxpemUgdGFibGVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBJbnNlcnQgZGVmYXVsdCBhZG1pbiB1c2VyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVEZWZhdWx0QWRtaW4oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgYWRtaW4gdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgICAgY29uc3QgW2V4aXN0aW5nVXNlcnNdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgcm9sZSA9IFwiYWRtaW5cIidcbiAgICAgICk7XG5cbiAgICAgIGlmICgoZXhpc3RpbmdVc2VycyBhcyBhbnlbXSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IGFkbWluIHVzZXIgd2l0aCB5b3VyIGNyZWRlbnRpYWxzXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgICBgSU5TRVJUIElOVE8gdXNlcnMgKGVtYWlsLCBwYXNzd29yZF9oYXNoLCByb2xlLCBuYW1lLCBpc19hY3RpdmUpIFxuICAgICAgICAgICBWQUxVRVMgKD8sID8sICdhZG1pbicsICdBZG1pbicsIFRSVUUpYCxcbiAgICAgICAgICBbJ2FkbWluQGV4YW1wbGUuY29tJywgJ0FiZWR5cjU3Li4nXSAvLyBJbiBwcm9kdWN0aW9uLCBoYXNoIHRoaXMgcGFzc3dvcmQgYW5kIGNoYW5nZSBlbWFpbFxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIERlZmF1bHQgYWRtaW4gdXNlciBjcmVhdGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn4oS577iPIEFkbWluIHVzZXIgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgIH1cblxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgYWRtaW4gdXNlcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGFydGljbGVzIHRhYmxlIHdpdGggbWlzc2luZyBjb2x1bW5zXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVBcnRpY2xlc1RhYmxlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNvbHVtbnMgZXhpc3QgYW5kIGFkZCB0aGVtIGlmIHRoZXkgZG9uJ3RcbiAgICAgIGNvbnN0IGNvbHVtbnNUb0FkZCA9IFtcbiAgICAgICAgeyBuYW1lOiAndGFncycsIGRlZmluaXRpb246ICdKU09OJyB9LFxuICAgICAgICB7IG5hbWU6ICdjYXRlZ29yeScsIGRlZmluaXRpb246ICdWQVJDSEFSKDEwMCknIH0sXG4gICAgICAgIHsgbmFtZTogJ3JlYWRfdGltZScsIGRlZmluaXRpb246ICdJTlQgREVGQVVMVCA1JyB9LFxuICAgICAgICB7IG5hbWU6ICdtZXRhX2Rlc2NyaXB0aW9uJywgZGVmaW5pdGlvbjogJ1RFWFQnIH0sXG4gICAgICAgIHsgbmFtZTogJ2ZlYXR1cmVkJywgZGVmaW5pdGlvbjogJ0JPT0xFQU4gREVGQVVMVCBGQUxTRScgfSxcbiAgICAgICAgeyBuYW1lOiAndmlld3NfY291bnQnLCBkZWZpbml0aW9uOiAnSU5UIERFRkFVTFQgMCcgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBjb2x1bW4gb2YgY29sdW1uc1RvQWRkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgY29sdW1uIGV4aXN0c1xuICAgICAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgICAgIGBTRUxFQ1QgQ09MVU1OX05BTUUgRlJPTSBJTkZPUk1BVElPTl9TQ0hFTUEuQ09MVU1OUyBcbiAgICAgICAgICAgICBXSEVSRSBUQUJMRV9TQ0hFTUEgPSBEQVRBQkFTRSgpIEFORCBUQUJMRV9OQU1FID0gJ2FydGljbGVzJyBBTkQgQ09MVU1OX05BTUUgPSA/YCxcbiAgICAgICAgICAgIFtjb2x1bW4ubmFtZV1cbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICgocm93cyBhcyBhbnlbXSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBDb2x1bW4gZG9lc24ndCBleGlzdCwgYWRkIGl0XG4gICAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoYEFMVEVSIFRBQkxFIGFydGljbGVzIEFERCBDT0xVTU4gJHtjb2x1bW4ubmFtZX0gJHtjb2x1bW4uZGVmaW5pdGlvbn1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgQWRkZWQgY29sdW1uICcke2NvbHVtbi5uYW1lfScgdG8gYXJ0aWNsZXMgdGFibGVgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYOKEue+4jyBDb2x1bW4gJyR7Y29sdW1uLm5hbWV9JyBhbHJlYWR5IGV4aXN0cyBpbiBhcnRpY2xlcyB0YWJsZWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGFkZCBjb2x1bW4gJyR7Y29sdW1uLm5hbWV9JzpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byB1cGRhdGUgYXJ0aWNsZXMgdGFibGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIFByb2plY3RzIENSVUQgb3BlcmF0aW9uc1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdHMoKTogUHJvbWlzZTxQcm9qZWN0W10+IHtcbiAgICBsZXQgY29ubmVjdGlvbjtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CflJcgQXR0ZW1wdGluZyB0byBnZXQgZGF0YWJhc2UgY29ubmVjdGlvbi4uLicpO1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBjb25uZWN0aW9uIGFjcXVpcmVkJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUICogRlJPTSBwcm9qZWN0cyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIFJldHJpZXZlZCAkeyhyb3dzIGFzIGFueVtdKS5sZW5ndGh9IHByb2plY3RzIGZyb20gZGF0YWJhc2VgKTtcbiAgICAgIFxuICAgICAgLy8gUGFyc2UgSlNPTiBmaWVsZHMgZm9yIGVhY2ggcHJvamVjdFxuICAgICAgY29uc3QgcGFyc2VKc29uRmllbGQgPSAoZmllbGQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoIWZpZWxkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZmllbGQpO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLnNwbGl0KCcsJykubWFwKChpdGVtOiBzdHJpbmcpID0+IGl0ZW0udHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWVsZDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb2plY3RzID0gKHJvd3MgYXMgUHJvamVjdFtdKS5tYXAocHJvamVjdCA9PiAoe1xuICAgICAgICAuLi5wcm9qZWN0LFxuICAgICAgICBnYWxsZXJ5OiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LmdhbGxlcnkpLFxuICAgICAgICBmZWF0dXJlczogcGFyc2VKc29uRmllbGQocHJvamVjdC5mZWF0dXJlcyksXG4gICAgICAgIGFtZW5pdGllczogcGFyc2VKc29uRmllbGQocHJvamVjdC5hbWVuaXRpZXMpLFxuICAgICAgICBwcm9wZXJ0eV90eXBlczogcGFyc2VKc29uRmllbGQoKHByb2plY3QgYXMgYW55KS5wcm9wZXJ0eV90eXBlcyksXG4gICAgICAgIHN1Yl9wcm9qZWN0czogcGFyc2VKc29uRmllbGQoKHByb2plY3QgYXMgYW55KS5zdWJfcHJvamVjdHMpLFxuICAgICAgICBtZWRpYV9maWxlczogcGFyc2VKc29uRmllbGQoKHByb2plY3QgYXMgYW55KS5tZWRpYV9maWxlcyksXG4gICAgICAgIHVuaXRzOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LnVuaXRzKSxcbiAgICAgICAgcHJvcGVydHlfdHlwZTogcGFyc2VKc29uRmllbGQocHJvamVjdC5wcm9wZXJ0eV90eXBlKVxuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFByb2plY3RzIHBhcnNlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHJldHVybiBwcm9qZWN0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIHByb2plY3RzOicsIGVycm9yKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ21heF91c2VyX2Nvbm5lY3Rpb25zJykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+aqyBEYXRhYmFzZSBjb25uZWN0aW9uIGxpbWl0IGV4Y2VlZGVkLiBDb25zaWRlciByZWR1Y2luZyBjb25jdXJyZW50IGNvbm5lY3Rpb25zLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtdO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5STIERhdGFiYXNlIGNvbm5lY3Rpb24gcmVsZWFzZWQnKTtcbiAgICAgICAgfSBjYXRjaCAocmVsZWFzZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4pqg77iPIEVycm9yIHJlbGVhc2luZyBjb25uZWN0aW9uOicsIHJlbGVhc2VFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdHNCeURldmVsb3BlcihkZXZlbG9wZXJOYW1lOiBzdHJpbmcpOiBQcm9taXNlPFByb2plY3RbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gcHJvamVjdHMgV0hFUkUgZGV2ZWxvcGVyID0gPyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnLCBbZGV2ZWxvcGVyTmFtZV0pO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIEpTT04gZmllbGRzIGZvciBlYWNoIHByb2plY3RcbiAgICAgIGNvbnN0IHBhcnNlSnNvbkZpZWxkID0gKGZpZWxkOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKCFmaWVsZCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGZpZWxkKTtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZC5zcGxpdCgnLCcpLm1hcCgoaXRlbTogc3RyaW5nKSA9PiBpdGVtLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gKHJvd3MgYXMgUHJvamVjdFtdKS5tYXAocHJvamVjdCA9PiAoe1xuICAgICAgICAuLi5wcm9qZWN0LFxuICAgICAgICBnYWxsZXJ5OiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LmdhbGxlcnkpLFxuICAgICAgICBmZWF0dXJlczogcGFyc2VKc29uRmllbGQocHJvamVjdC5mZWF0dXJlcyksXG4gICAgICAgIGFtZW5pdGllczogcGFyc2VKc29uRmllbGQocHJvamVjdC5hbWVuaXRpZXMpLFxuICAgICAgICBwcm9wZXJ0eV90eXBlczogcGFyc2VKc29uRmllbGQoKHByb2plY3QgYXMgYW55KS5wcm9wZXJ0eV90eXBlcyksXG4gICAgICAgIHN1Yl9wcm9qZWN0czogcGFyc2VKc29uRmllbGQoKHByb2plY3QgYXMgYW55KS5zdWJfcHJvamVjdHMpLFxuICAgICAgICBtZWRpYV9maWxlczogcGFyc2VKc29uRmllbGQoKHByb2plY3QgYXMgYW55KS5tZWRpYV9maWxlcyksXG4gICAgICAgIHVuaXRzOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LnVuaXRzKSxcbiAgICAgICAgcHJvcGVydHlfdHlwZTogcGFyc2VKc29uRmllbGQocHJvamVjdC5wcm9wZXJ0eV90eXBlKVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9qZWN0cyBieSBkZXZlbG9wZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRQcm9qZWN0QnlTbHVnKHNsdWc6IHN0cmluZyk6IFByb21pc2U8UHJvamVjdCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBHZXQgcHJvamVjdCBkYXRhXG4gICAgICBjb25zdCBbcHJvamVjdFJvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIHByb2plY3RzIFdIRVJFIHNsdWcgPSA/JywgW3NsdWddKTtcbiAgICAgIGNvbnN0IHByb2plY3RzID0gcHJvamVjdFJvd3MgYXMgUHJvamVjdFtdO1xuICAgICAgXG4gICAgICBpZiAocHJvamVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzWzBdO1xuICAgICAgXG4gICAgICAvLyBHZXQgcHJlc2VudGF0aW9uIHNsaWRlcyBmb3IgdGhpcyBwcm9qZWN0XG4gICAgICBjb25zdCBbc2xpZGVSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gcHJlc2VudGF0aW9uX3NsaWRlcyBXSEVSRSBwcm9qZWN0X2lkID0gPyBPUkRFUiBCWSBzbGlkZV9udW1iZXIgQVNDJyxcbiAgICAgICAgW3Byb2plY3QuaWRdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgLy8gUGFyc2UgSlNPTiBmaWVsZHMgYW5kIGFkZCBwcmVzZW50YXRpb24gc2xpZGVzXG4gICAgICBjb25zdCBwYXJzZUpzb25GaWVsZCA9IChmaWVsZDogYW55KSA9PiB7XG4gICAgICAgIGlmICghZmllbGQpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShmaWVsZCk7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gZmllbGQuc3BsaXQoJywnKS5tYXAoKGl0ZW06IHN0cmluZykgPT4gaXRlbS50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpZWxkO1xuICAgICAgfTtcblxuICAgICAgLy8gUGFyc2UgY29sb3IgcGFsZXR0ZSBzYWZlbHlcbiAgICAgIGNvbnN0IHBhcnNlQ29sb3JQYWxldHRlID0gKGNvbG9yUGFsZXR0ZTogYW55KSA9PiB7XG4gICAgICAgIGlmICghY29sb3JQYWxldHRlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb2xvclBhbGV0dGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNvbG9yUGFsZXR0ZSk7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbG9yUGFsZXR0ZTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByb2plY3QsXG4gICAgICAgIGdhbGxlcnk6IHBhcnNlSnNvbkZpZWxkKHByb2plY3QuZ2FsbGVyeSksXG4gICAgICAgIGZlYXR1cmVzOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LmZlYXR1cmVzKSxcbiAgICAgICAgYW1lbml0aWVzOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LmFtZW5pdGllcyksXG4gICAgICAgIHByb3BlcnR5X3R5cGVzOiBwYXJzZUpzb25GaWVsZCgocHJvamVjdCBhcyBhbnkpLnByb3BlcnR5X3R5cGVzKSxcbiAgICAgICAgc3ViX3Byb2plY3RzOiBwYXJzZUpzb25GaWVsZCgocHJvamVjdCBhcyBhbnkpLnN1Yl9wcm9qZWN0cyksXG4gICAgICAgIG1lZGlhX2ZpbGVzOiBwYXJzZUpzb25GaWVsZCgocHJvamVjdCBhcyBhbnkpLm1lZGlhX2ZpbGVzKSxcbiAgICAgICAgcHJlc2VudGF0aW9uX3NsaWRlczogc2xpZGVSb3dzIGFzIFByZXNlbnRhdGlvblNsaWRlW11cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgYnkgc2x1ZzonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUHJvamVjdChwcm9qZWN0OiBPbWl0PFByb2plY3QsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTxQcm9qZWN0IHwgbnVsbD4ge1xuICAgIGxldCBjb25uZWN0aW9uO1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICAgIGlmICghcHJvamVjdC5uYW1lIHx8IHByb2plY3QubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvamVjdCBuYW1lIGlzIHJlcXVpcmVkJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXByb2plY3QuZGVzY3JpcHRpb24gfHwgcHJvamVjdC5kZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvamVjdCBkZXNjcmlwdGlvbiBpcyByZXF1aXJlZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+UlyBHZXR0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24gZm9yIHByb2plY3QgY3JlYXRpb24uLi4nKTtcbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgY29ubmVjdGlvbiBhY3F1aXJlZCBmb3IgcHJvamVjdCBjcmVhdGlvbicpO1xuICAgICAgXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCB1bmRlZmluZWQgdG8gbnVsbFxuICAgICAgY29uc3QgdG9OdWxsSWZVbmRlZmluZWQgPSAodmFsdWU6IGFueSkgPT4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIHNsdWcgaXMgdW5pcXVlIGJ5IGFkZGluZyB0aW1lc3RhbXAgaWYgbmVlZGVkXG4gICAgICBsZXQgZmluYWxTbHVnID0gcHJvamVjdC5zbHVnIHx8ICcnO1xuICAgICAgXG4gICAgICAvLyBBbHdheXMgY2hlY2sgaWYgc2x1ZyBhbHJlYWR5IGV4aXN0cyBhbmQgbWFrZSBpdCB1bmlxdWVcbiAgICAgIGNvbnN0IFtleGlzdGluZ1Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgaWQgRlJPTSBwcm9qZWN0cyBXSEVSRSBzbHVnID0gPycsIFtmaW5hbFNsdWddKTtcbiAgICAgIGlmICgoZXhpc3RpbmdSb3dzIGFzIGFueVtdKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZpbmFsU2x1ZyA9IGAke2ZpbmFsU2x1Z30tJHtEYXRlLm5vdygpfWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgSU5TRVJUIElOVE8gcHJvamVjdHMgKG5hbWUsIHNsdWcsIGRldmVsb3BlciwgZGV2ZWxvcGVyX2lkLCBsb2NhdGlvbiwgcHJpY2UsIHN0YXR1cywgYmVkcm9vbXMsIGJhdGhyb29tcywgYXJlYSwgXG4gICAgICAgICBkZXNjcmlwdGlvbiwgaW1hZ2UsIGdhbGxlcnksIGNvb3JkaW5hdGVzX2xhdCwgY29vcmRpbmF0ZXNfbG5nLCBmZWF0dXJlcywgYW1lbml0aWVzLFxuICAgICAgICAgcHJlc2VudGF0aW9uX2ZpbGUsIHByZXNlbnRhdGlvbl91cmwsIHByZXNlbnRhdGlvbl9zbGlkZXMsIHByZXNlbnRhdGlvbl9hbmltYXRpb25zLCBwcmVzZW50YXRpb25fZWZmZWN0cywgXG4gICAgICAgICBmZWF0dXJlZF92aWRlbywgc3R1ZGlvcywgbWVkaWFfZmlsZXMpXG4gICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgICAgW1xuICAgICAgICAgIHByb2plY3QubmFtZSB8fCAnJywgXG4gICAgICAgICAgZmluYWxTbHVnLCBcbiAgICAgICAgICBwcm9qZWN0LmRldmVsb3BlciB8fCAnJywgXG4gICAgICAgICAgKHByb2plY3QgYXMgYW55KS5kZXZlbG9wZXJfaWQgfHwgbnVsbCxcbiAgICAgICAgICBwcm9qZWN0LmxvY2F0aW9uIHx8ICcnLCBcbiAgICAgICAgICBwcm9qZWN0LnByaWNlIHx8ICdQcmljZSBvbiBSZXF1ZXN0JyxcbiAgICAgICAgICBwcm9qZWN0LnN0YXR1cyB8fCAnQXZhaWxhYmxlJywgXG4gICAgICAgICAgcHJvamVjdC5iZWRyb29tcyB8fCAwLCBcbiAgICAgICAgICBwcm9qZWN0LmJhdGhyb29tcyB8fCAwLCBcbiAgICAgICAgICBwcm9qZWN0LmFyZWEgfHwgJycsIFxuICAgICAgICAgIHByb2plY3QuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgcHJvamVjdC5pbWFnZSB8fCAnJywgXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvamVjdC5nYWxsZXJ5IHx8IFtdKSwgXG4gICAgICAgICAgcHJvamVjdC5jb29yZGluYXRlc19sYXQgfHwgMCwgXG4gICAgICAgICAgcHJvamVjdC5jb29yZGluYXRlc19sbmcgfHwgMCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0LmZlYXR1cmVzIHx8IFtdKSwgXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvamVjdC5hbWVuaXRpZXMgfHwgW10pLCBcbiAgICAgICAgICB0b051bGxJZlVuZGVmaW5lZChwcm9qZWN0LnByZXNlbnRhdGlvbl9maWxlKSwgXG4gICAgICAgICAgdG9OdWxsSWZVbmRlZmluZWQocHJvamVjdC5wcmVzZW50YXRpb25fdXJsKSwgXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvamVjdC5wcmVzZW50YXRpb25fc2xpZGVzIHx8IHt9KSxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0LnByZXNlbnRhdGlvbl9hbmltYXRpb25zIHx8IHt9KSxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0LnByZXNlbnRhdGlvbl9lZmZlY3RzIHx8IHt9KSxcbiAgICAgICAgICB0b051bGxJZlVuZGVmaW5lZChwcm9qZWN0LmZlYXR1cmVkX3ZpZGVvKSxcbiAgICAgICAgICBwcm9qZWN0LnN0dWRpb3MgfHwgMCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0Lm1lZGlhX2ZpbGVzIHx8IFtdKVxuICAgICAgICBdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGRldmVsb3BlciBwcm9qZWN0IGNvdW50IGF1dG9tYXRpY2FsbHlcbiAgICAgIGlmICgocHJvamVjdCBhcyBhbnkpLmRldmVsb3Blcl9pZCkge1xuICAgICAgICAvLyBHZXQgZGV2ZWxvcGVyIG5hbWUgYnkgSUQgZm9yIHRoZSBjb3VudCB1cGRhdGVcbiAgICAgICAgY29uc3QgW2RldlJvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgbmFtZSBGUk9NIGRldmVsb3BlcnMgV0hFUkUgaWQgPSA/JywgWyhwcm9qZWN0IGFzIGFueSkuZGV2ZWxvcGVyX2lkXSk7XG4gICAgICAgIGlmICgoZGV2Um93cyBhcyBhbnlbXSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRGV2ZWxvcGVyUHJvamVjdENvdW50KChkZXZSb3dzIGFzIGFueVtdKVswXS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9qZWN0LmRldmVsb3Blcikge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZURldmVsb3BlclByb2plY3RDb3VudChwcm9qZWN0LmRldmVsb3Blcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgXG4gICAgICAvLyBMb2cgdGhlIGFjdGl2aXR5XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFjdGl2aXR5KHtcbiAgICAgICAgICBsZXZlbDogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIGNhdGVnb3J5OiAncHJvamVjdCcsXG4gICAgICAgICAgbWVzc2FnZTogYE5ldyBwcm9qZWN0IGNyZWF0ZWQ6ICR7cHJvamVjdC5uYW1lfWAsXG4gICAgICAgICAgZGV0YWlsczogSlNPTi5zdHJpbmdpZnkoeyBwcm9qZWN0SWQ6IGluc2VydElkLCBkZXZlbG9wZXI6IHByb2plY3QuZGV2ZWxvcGVyLCBsb2NhdGlvbjogcHJvamVjdC5sb2NhdGlvbiB9KVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgcHJvamVjdCBjcmVhdGlvbiBhY3Rpdml0eTonLCBsb2dFcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldFByb2plY3RCeUlkKGluc2VydElkKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcHJvamVjdDonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBzcGVjaWZpYyBNeVNRTCBlcnJvcnNcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnRVJfRFVQX0VOVFJZJykge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbmFtZScpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHByb2plY3Qgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMuIFBsZWFzZSBjaG9vc2UgYSBkaWZmZXJlbnQgbmFtZS4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdzbHVnJykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgcHJvamVjdCB3aXRoIHRoaXMgVVJMIHNsdWcgYWxyZWFkeSBleGlzdHMuIFBsZWFzZSBtb2RpZnkgdGhlIHByb2plY3QgbmFtZS4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgcHJvamVjdCB3aXRoIHRoZXNlIGRldGFpbHMgYWxyZWFkeSBleGlzdHMuIFBsZWFzZSBjaGVjayBmb3IgZHVwbGljYXRlcy4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRVJfREFUQV9UT09fTE9ORycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmUgb3IgbW9yZSBmaWVsZHMgY29udGFpbiB0b28gbXVjaCBkYXRhLiBQbGVhc2Ugc2hvcnRlbiB5b3VyIGlucHV0LicpO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRVJfQkFEX05VTExfRVJST1InKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgZmllbGQgaXMgbWlzc2luZy4gUGxlYXNlIGZpbGwgaW4gYWxsIHJlcXVpcmVkIGZpZWxkcy4nKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZWQnKSkge1xuICAgICAgICAvLyBPdXIgY3VzdG9tIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBjcmVhdGluZyB0aGUgcHJvamVjdC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdEJ5SWQoaWQ6IG51bWJlcik6IFByb21pc2U8UHJvamVjdCB8IG51bGw+IHtcbiAgICBsZXQgY29ubmVjdGlvbjtcbiAgICB0cnkge1xuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgY29uc3QgcHJvamVjdHMgPSByb3dzIGFzIFByb2plY3RbXTtcbiAgICAgIFxuICAgICAgaWYgKHByb2plY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzWzBdO1xuICAgICAgXG4gICAgICAvLyBQYXJzZSBKU09OIGZpZWxkc1xuICAgICAgY29uc3QgcGFyc2VKc29uRmllbGQgPSAoZmllbGQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoIWZpZWxkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZmllbGQpO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLnNwbGl0KCcsJykubWFwKChpdGVtOiBzdHJpbmcpID0+IGl0ZW0udHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWVsZDtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByb2plY3QsXG4gICAgICAgIGdhbGxlcnk6IHBhcnNlSnNvbkZpZWxkKHByb2plY3QuZ2FsbGVyeSksXG4gICAgICAgIGZlYXR1cmVzOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LmZlYXR1cmVzKSxcbiAgICAgICAgYW1lbml0aWVzOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LmFtZW5pdGllcyksXG4gICAgICAgIHByb3BlcnR5X3R5cGVzOiBwYXJzZUpzb25GaWVsZCgocHJvamVjdCBhcyBhbnkpLnByb3BlcnR5X3R5cGVzKSxcbiAgICAgICAgc3ViX3Byb2plY3RzOiBwYXJzZUpzb25GaWVsZCgocHJvamVjdCBhcyBhbnkpLnN1Yl9wcm9qZWN0cyksXG4gICAgICAgIG1lZGlhX2ZpbGVzOiBwYXJzZUpzb25GaWVsZCgocHJvamVjdCBhcyBhbnkpLm1lZGlhX2ZpbGVzKSxcbiAgICAgICAgdW5pdHM6IHBhcnNlSnNvbkZpZWxkKHByb2plY3QudW5pdHMpLFxuICAgICAgICBwcm9wZXJ0eV90eXBlOiBwYXJzZUpzb25GaWVsZChwcm9qZWN0LnByb3BlcnR5X3R5cGUpXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9qZWN0IGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0byBsZXQgQVBJIGhhbmRsZSB0aGUgZXJyb3IgcHJvcGVybHlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVByb2plY3QoaWQ6IG51bWJlciwgdXBkYXRlRGF0YTogUGFydGlhbDxQcm9qZWN0Pik6IFByb21pc2U8UHJvamVjdCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgcHJvamVjdCBkYXRhIHRvIGNoZWNrIGlmIGRldmVsb3BlciBpcyBjaGFuZ2luZ1xuICAgICAgY29uc3QgW2N1cnJlbnRSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUIGRldmVsb3BlciBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgY29uc3QgY3VycmVudFByb2plY3QgPSAoY3VycmVudFJvd3MgYXMgYW55W10pWzBdO1xuICAgICAgY29uc3Qgb2xkRGV2ZWxvcGVyID0gY3VycmVudFByb2plY3Q/LmRldmVsb3BlcjtcbiAgICAgIFxuICAgICAgLy8gQnVpbGQgZHluYW1pYyB1cGRhdGUgcXVlcnlcbiAgICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoZmllbGQgPT4gYCR7ZmllbGR9ID0gP2ApLmpvaW4oJywgJyk7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSAodXBkYXRlRGF0YSBhcyBhbnkpW2ZpZWxkXTtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgIGBVUERBVEUgcHJvamVjdHMgU0VUICR7c2V0Q2xhdXNlfSwgdXBkYXRlZF9hdCA9IE5PVygpIFdIRVJFIGlkID0gP2AsXG4gICAgICAgIFsuLi52YWx1ZXMsIGlkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHByb2plY3QgY291bnRzIGlmIGRldmVsb3BlciBjaGFuZ2VkXG4gICAgICBjb25zdCBuZXdEZXZlbG9wZXIgPSB1cGRhdGVEYXRhLmRldmVsb3BlcjtcbiAgICAgIGlmIChuZXdEZXZlbG9wZXIgJiYgbmV3RGV2ZWxvcGVyICE9PSBvbGREZXZlbG9wZXIpIHtcbiAgICAgICAgLy8gVXBkYXRlIGNvdW50IGZvciBvbGQgZGV2ZWxvcGVyXG4gICAgICAgIGlmIChvbGREZXZlbG9wZXIpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZURldmVsb3BlclByb2plY3RDb3VudChvbGREZXZlbG9wZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBjb3VudCBmb3IgbmV3IGRldmVsb3BlclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZURldmVsb3BlclByb2plY3RDb3VudChuZXdEZXZlbG9wZXIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgLy8gTG9nIHRoZSBhY3Rpdml0eVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlZFByb2plY3QgPSBhd2FpdCB0aGlzLmdldFByb2plY3RCeUlkKGlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVBY3Rpdml0eSh7XG4gICAgICAgICAgbGV2ZWw6ICdpbmZvJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3Byb2plY3QnLFxuICAgICAgICAgIG1lc3NhZ2U6IGBQcm9qZWN0IHVwZGF0ZWQ6ICR7dXBkYXRlZFByb2plY3Q/Lm5hbWUgfHwgJ1Vua25vd24nfWAsXG4gICAgICAgICAgZGV0YWlsczogSlNPTi5zdHJpbmdpZnkoeyBwcm9qZWN0SWQ6IGlkLCB1cGRhdGVkRmllbGRzOiBPYmplY3Qua2V5cyh1cGRhdGVEYXRhKSB9KVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgcHJvamVjdCB1cGRhdGUgYWN0aXZpdHk6JywgbG9nRXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRQcm9qZWN0QnlJZChpZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHByb2plY3Q6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZVByb2plY3QoaWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBwcm9qZWN0IGV4aXN0cyBhbmQgZ2V0IGRldmVsb3BlciBuYW1lXG4gICAgICBjb25zdCBbY2hlY2tSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUIGlkLCBkZXZlbG9wZXIgRlJPTSBwcm9qZWN0cyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcbiAgICAgIGlmICgoY2hlY2tSb3dzIGFzIGFueVtdKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9qZWN0IHdpdGggaWQgJHtpZH0gbm90IGZvdW5kYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdERhdGEgPSAoY2hlY2tSb3dzIGFzIGFueVtdKVswXTtcbiAgICAgIGNvbnN0IGRldmVsb3Blck5hbWUgPSBwcm9qZWN0RGF0YS5kZXZlbG9wZXI7XG4gICAgICBcbiAgICAgIC8vIEdldCBwcm9qZWN0IG5hbWUgZm9yIGxvZ2dpbmcgYmVmb3JlIGRlbGV0aW9uXG4gICAgICBjb25zdCBbcHJvamVjdFJvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgbmFtZSBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSAocHJvamVjdFJvd3MgYXMgYW55W10pWzBdPy5uYW1lIHx8ICdVbmtub3duJztcbiAgICAgIFxuICAgICAgLy8gRGVsZXRlIHRoZSBwcm9qZWN0IChDQVNDQURFIHdpbGwgaGFuZGxlIHJlbGF0ZWQgcmVjb3JkcylcbiAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdERUxFVEUgRlJPTSBwcm9qZWN0cyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGRldmVsb3BlciBwcm9qZWN0IGNvdW50IGF1dG9tYXRpY2FsbHlcbiAgICAgIGlmIChkZXZlbG9wZXJOYW1lKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRGV2ZWxvcGVyUHJvamVjdENvdW50KGRldmVsb3Blck5hbWUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgYW55IHJvd3Mgd2VyZSBhZmZlY3RlZFxuICAgICAgY29uc3QgYWZmZWN0ZWRSb3dzID0gKHJlc3VsdCBhcyBhbnkpLmFmZmVjdGVkUm93cztcbiAgICAgIGNvbnNvbGUubG9nKGBEZWxldGUgb3BlcmF0aW9uIGFmZmVjdGVkICR7YWZmZWN0ZWRSb3dzfSByb3dzIGZvciBwcm9qZWN0IGlkICR7aWR9YCk7XG4gICAgICBcbiAgICAgIC8vIExvZyB0aGUgYWN0aXZpdHkgaWYgZGVsZXRpb24gd2FzIHN1Y2Nlc3NmdWxcbiAgICAgIGlmIChhZmZlY3RlZFJvd3MgPiAwKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVBY3Rpdml0eSh7XG4gICAgICAgICAgICBsZXZlbDogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdwcm9qZWN0JyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBQcm9qZWN0IGRlbGV0ZWQ6ICR7cHJvamVjdE5hbWV9YCxcbiAgICAgICAgICAgIGRldGFpbHM6IEpTT04uc3RyaW5naWZ5KHsgcHJvamVjdElkOiBpZCwgZGV2ZWxvcGVyOiBkZXZlbG9wZXJOYW1lIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvZyBwcm9qZWN0IGRlbGV0aW9uIGFjdGl2aXR5OicsIGxvZ0Vycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gYWZmZWN0ZWRSb3dzID4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcHJvamVjdDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gRGV2ZWxvcGVycyBDUlVEIG9wZXJhdGlvbnNcbiAgc3RhdGljIGFzeW5jIGdldERldmVsb3BlcnMoKTogUHJvbWlzZTxEZXZlbG9wZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gZGV2ZWxvcGVycyBPUkRFUiBCWSBuYW1lIEFTQycpO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gcm93cyBhcyBEZXZlbG9wZXJbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZGV2ZWxvcGVyczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZURldmVsb3BlcihkZXZlbG9wZXI6IE9taXQ8RGV2ZWxvcGVyLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8RGV2ZWxvcGVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgYElOU0VSVCBJTlRPIGRldmVsb3BlcnMgKG5hbWUsIHNsdWcsIGRlc2NyaXB0aW9uLCBsb2dvLCBlc3RhYmxpc2hlZCwgcHJvamVjdHNfY291bnQsIFxuICAgICAgICAgbG9jYXRpb24sIHdlYnNpdGUsIHBob25lLCBlbWFpbCwgc3RhdHVzKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgICAgW1xuICAgICAgICAgIGRldmVsb3Blci5uYW1lLCBkZXZlbG9wZXIuc2x1ZywgZGV2ZWxvcGVyLmRlc2NyaXB0aW9uLCBkZXZlbG9wZXIubG9nbyxcbiAgICAgICAgICBkZXZlbG9wZXIuZXN0YWJsaXNoZWQsIGRldmVsb3Blci5wcm9qZWN0c19jb3VudCwgZGV2ZWxvcGVyLmxvY2F0aW9uLFxuICAgICAgICAgIGRldmVsb3Blci53ZWJzaXRlLCBkZXZlbG9wZXIucGhvbmUsIGRldmVsb3Blci5lbWFpbCwgZGV2ZWxvcGVyLnN0YXR1c1xuICAgICAgICBdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgXG4gICAgICAvLyBMb2cgdGhlIGFjdGl2aXR5XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFjdGl2aXR5KHtcbiAgICAgICAgICBsZXZlbDogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnZGV2ZWxvcGVyJyxcbiAgICAgICAgICBtZXNzYWdlOiBgTmV3IGRldmVsb3BlciBjcmVhdGVkOiAke2RldmVsb3Blci5uYW1lfWAsXG4gICAgICAgICAgZGV0YWlsczogSlNPTi5zdHJpbmdpZnkoeyBkZXZlbG9wZXJJZDogaW5zZXJ0SWQsIGxvY2F0aW9uOiBkZXZlbG9wZXIubG9jYXRpb24sIGVzdGFibGlzaGVkOiBkZXZlbG9wZXIuZXN0YWJsaXNoZWQgfSlcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChsb2dFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9nIGRldmVsb3BlciBjcmVhdGlvbiBhY3Rpdml0eTonLCBsb2dFcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldERldmVsb3BlckJ5SWQoaW5zZXJ0SWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBkZXZlbG9wZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldERldmVsb3BlckJ5SWQoaWQ6IG51bWJlcik6IFByb21pc2U8RGV2ZWxvcGVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gZGV2ZWxvcGVycyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgY29uc3QgZGV2ZWxvcGVycyA9IHJvd3MgYXMgRGV2ZWxvcGVyW107XG4gICAgICByZXR1cm4gZGV2ZWxvcGVycy5sZW5ndGggPiAwID8gZGV2ZWxvcGVyc1swXSA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRldmVsb3BlciBieSBJRDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlRGV2ZWxvcGVyKGlkOiBudW1iZXIsIHVwZGF0ZURhdGE6IFBhcnRpYWw8RGV2ZWxvcGVyPik6IFByb21pc2U8RGV2ZWxvcGVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgY3VycmVudCBkZXZlbG9wZXIgbmFtZSBmb3IgbG9nZ2luZ1xuICAgICAgY29uc3QgW2N1cnJlbnRSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUIG5hbWUgRlJPTSBkZXZlbG9wZXJzIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgY29uc3QgY3VycmVudERldmVsb3BlciA9IChjdXJyZW50Um93cyBhcyBhbnlbXSlbMF07XG4gICAgICBjb25zdCBkZXZlbG9wZXJOYW1lID0gY3VycmVudERldmVsb3Blcj8ubmFtZSB8fCAnVW5rbm93biBEZXZlbG9wZXInO1xuICAgICAgXG4gICAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyh1cGRhdGVEYXRhKS5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ2lkJyk7XG4gICAgICBjb25zdCBzZXRDbGF1c2UgPSBmaWVsZHMubWFwKGZpZWxkID0+IGAke2ZpZWxkfSA9ID9gKS5qb2luKCcsICcpO1xuICAgICAgY29uc3QgdmFsdWVzID0gZmllbGRzLm1hcChmaWVsZCA9PiAodXBkYXRlRGF0YSBhcyBhbnkpW2ZpZWxkXSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgYFVQREFURSBkZXZlbG9wZXJzIFNFVCAke3NldENsYXVzZX0sIHVwZGF0ZWRfYXQgPSBOT1coKSBXSEVSRSBpZCA9ID9gLFxuICAgICAgICBbLi4udmFsdWVzLCBpZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgXG4gICAgICAvLyBMb2cgdGhlIGFjdGl2aXR5XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUFjdGl2aXR5KHtcbiAgICAgICAgICBsZXZlbDogJ2luZm8nLFxuICAgICAgICAgIGNhdGVnb3J5OiAnZGV2ZWxvcGVyJyxcbiAgICAgICAgICBtZXNzYWdlOiBgRGV2ZWxvcGVyIHVwZGF0ZWQ6ICR7ZGV2ZWxvcGVyTmFtZX1gLFxuICAgICAgICAgIGRldGFpbHM6IEpTT04uc3RyaW5naWZ5KHsgZGV2ZWxvcGVySWQ6IGlkLCB1cGRhdGVkRmllbGRzOiBmaWVsZHMgfSlcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChsb2dFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9nIGRldmVsb3BlciB1cGRhdGUgYWN0aXZpdHk6JywgbG9nRXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZlbG9wZXJCeUlkKGlkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZGV2ZWxvcGVyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGVEZXZlbG9wZXIoaWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ0RFTEVURSBGUk9NIGRldmVsb3BlcnMgV0hFUkUgaWQgPSA/JywgW2lkXSk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBkZXZlbG9wZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVEZXZlbG9wZXJQcm9qZWN0Q291bnQoZGV2ZWxvcGVyTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gQ291bnQgcHJvamVjdHMgZm9yIHRoaXMgZGV2ZWxvcGVyXG4gICAgICBjb25zdCBbY291bnRSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgJ1NFTEVDVCBDT1VOVCgqKSBhcyBwcm9qZWN0X2NvdW50IEZST00gcHJvamVjdHMgV0hFUkUgZGV2ZWxvcGVyID0gPycsXG4gICAgICAgIFtkZXZlbG9wZXJOYW1lXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdENvdW50ID0gKGNvdW50Um93cyBhcyBhbnlbXSlbMF0ucHJvamVjdF9jb3VudDtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSBkZXZlbG9wZXIncyBwcm9qZWN0IGNvdW50XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICdVUERBVEUgZGV2ZWxvcGVycyBTRVQgcHJvamVjdHNfY291bnQgPSA/LCB1cGRhdGVkX2F0ID0gTk9XKCkgV0hFUkUgbmFtZSA9ID8nLFxuICAgICAgICBbcHJvamVjdENvdW50LCBkZXZlbG9wZXJOYW1lXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBjb25zb2xlLmxvZyhgVXBkYXRlZCBwcm9qZWN0IGNvdW50IGZvciBkZXZlbG9wZXIgJHtkZXZlbG9wZXJOYW1lfTogJHtwcm9qZWN0Q291bnR9IHByb2plY3RzYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGRldmVsb3BlciBwcm9qZWN0IGNvdW50OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBFbmhhbmNlZCBwcm9qZWN0LWRldmVsb3BlciByZWxhdGlvbnNoaXAgbWV0aG9kc1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdHNCeURldmVsb3BlcklkKGRldmVsb3BlcklkOiBudW1iZXIpOiBQcm9taXNlPFByb2plY3RbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgIGBTRUxFQ1QgcC4qLCBkLm5hbWUgYXMgZGV2ZWxvcGVyX25hbWUsIGQuc2x1ZyBhcyBkZXZlbG9wZXJfc2x1ZyBcbiAgICAgICAgIEZST00gcHJvamVjdHMgcCBcbiAgICAgICAgIExFRlQgSk9JTiBkZXZlbG9wZXJzIGQgT04gcC5kZXZlbG9wZXJfaWQgPSBkLmlkIFxuICAgICAgICAgV0hFUkUgcC5kZXZlbG9wZXJfaWQgPSA/IFxuICAgICAgICAgT1JERVIgQlkgcC5jcmVhdGVkX2F0IERFU0NgLFxuICAgICAgICBbZGV2ZWxvcGVySWRdXG4gICAgICApO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gcm93cyBhcyBQcm9qZWN0W107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3RzIGJ5IGRldmVsb3BlciBJRDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldERldmVsb3BlcldpdGhQcm9qZWN0cyhkZXZlbG9wZXJJZDogbnVtYmVyKTogUHJvbWlzZTxEZXZlbG9wZXIgJiB7IHByb2plY3RzOiBQcm9qZWN0W10gfSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBHZXQgZGV2ZWxvcGVyIGRldGFpbHNcbiAgICAgIGNvbnN0IFtkZXZlbG9wZXJSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gZGV2ZWxvcGVycyBXSEVSRSBpZCA9ID8nLFxuICAgICAgICBbZGV2ZWxvcGVySWRdXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoKGRldmVsb3BlclJvd3MgYXMgYW55W10pLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGRldmVsb3BlciA9IChkZXZlbG9wZXJSb3dzIGFzIGFueVtdKVswXSBhcyBEZXZlbG9wZXI7XG4gICAgICBcbiAgICAgIC8vIEdldCBhc3NvY2lhdGVkIHByb2plY3RzXG4gICAgICBjb25zdCBbcHJvamVjdFJvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnU0VMRUNUICogRlJPTSBwcm9qZWN0cyBXSEVSRSBkZXZlbG9wZXJfaWQgPSA/IE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQycsXG4gICAgICAgIFtkZXZlbG9wZXJJZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kZXZlbG9wZXIsXG4gICAgICAgIHByb2plY3RzOiBwcm9qZWN0Um93cyBhcyBQcm9qZWN0W11cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRldmVsb3BlciB3aXRoIHByb2plY3RzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhc3NpZ25Qcm9qZWN0VG9EZXZlbG9wZXIocHJvamVjdElkOiBudW1iZXIsIGRldmVsb3BlcklkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgcHJvamVjdCB3aXRoIGRldmVsb3Blcl9pZFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnVVBEQVRFIHByb2plY3RzIFNFVCBkZXZlbG9wZXJfaWQgPSA/LCB1cGRhdGVkX2F0ID0gTk9XKCkgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgW2RldmVsb3BlcklkLCBwcm9qZWN0SWRdXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgZGV2ZWxvcGVyJ3MgcHJvamVjdCBjb3VudFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnVVBEQVRFIGRldmVsb3BlcnMgU0VUIHByb2plY3RzX2NvdW50ID0gcHJvamVjdHNfY291bnQgKyAxLCB1cGRhdGVkX2F0ID0gTk9XKCkgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgW2RldmVsb3BlcklkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYXNzaWduaW5nIHByb2plY3QgdG8gZGV2ZWxvcGVyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdW5hc3NpZ25Qcm9qZWN0RnJvbURldmVsb3Blcihwcm9qZWN0SWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIEdldCBjdXJyZW50IGRldmVsb3Blcl9pZCBiZWZvcmUgcmVtb3ZpbmdcbiAgICAgIGNvbnN0IFtwcm9qZWN0Um93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICdTRUxFQ1QgZGV2ZWxvcGVyX2lkIEZST00gcHJvamVjdHMgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgW3Byb2plY3RJZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICgocHJvamVjdFJvd3MgYXMgYW55W10pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudERldmVsb3BlcklkID0gKHByb2plY3RSb3dzIGFzIGFueVtdKVswXS5kZXZlbG9wZXJfaWQ7XG4gICAgICAgIFxuICAgICAgICBpZiAoY3VycmVudERldmVsb3BlcklkKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIGRldmVsb3BlciBhc3NpZ25tZW50XG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAgICAgJ1VQREFURSBwcm9qZWN0cyBTRVQgZGV2ZWxvcGVyX2lkID0gTlVMTCwgdXBkYXRlZF9hdCA9IE5PVygpIFdIRVJFIGlkID0gPycsXG4gICAgICAgICAgICBbcHJvamVjdElkXVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIGRldmVsb3BlcidzIHByb2plY3QgY291bnRcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgICAnVVBEQVRFIGRldmVsb3BlcnMgU0VUIHByb2plY3RzX2NvdW50ID0gcHJvamVjdHNfY291bnQgLSAxLCB1cGRhdGVkX2F0ID0gTk9XKCkgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgICAgIFtjdXJyZW50RGV2ZWxvcGVySWRdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1bmFzc2lnbmluZyBwcm9qZWN0IGZyb20gZGV2ZWxvcGVyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlRGV2ZWxvcGVyV2l0aENhc2NhZGUoaWQ6IG51bWJlcik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBkZWxldGVkUHJvamVjdHM6IG51bWJlciB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGRldmVsb3BlciBuYW1lIGZvciBsb2dnaW5nIGJlZm9yZSBkZWxldGlvblxuICAgICAgY29uc3QgW2RldmVsb3BlclJvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgbmFtZSBGUk9NIGRldmVsb3BlcnMgV0hFUkUgaWQgPSA/JywgW2lkXSk7XG4gICAgICBjb25zdCBkZXZlbG9wZXJOYW1lID0gKGRldmVsb3BlclJvd3MgYXMgYW55W10pWzBdPy5uYW1lIHx8ICdVbmtub3duIERldmVsb3Blcic7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHRyYW5zYWN0aW9uXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmJlZ2luVHJhbnNhY3Rpb24oKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ291bnQgcHJvamVjdHMgdGhhdCB3aWxsIGJlIGRlbGV0ZWRcbiAgICAgICAgY29uc3QgW2NvdW50Um93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgJ1NFTEVDVCBDT1VOVCgqKSBhcyBwcm9qZWN0X2NvdW50IEZST00gcHJvamVjdHMgV0hFUkUgZGV2ZWxvcGVyX2lkID0gPycsXG4gICAgICAgICAgW2lkXVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBkZWxldGVkUHJvamVjdHMgPSAoY291bnRSb3dzIGFzIGFueVtdKVswXS5wcm9qZWN0X2NvdW50O1xuICAgICAgICBcbiAgICAgICAgLy8gRGVsZXRlIGFzc29jaWF0ZWQgcHJvamVjdHMgKGNhc2NhZGluZyBkZWxldGUpXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgICAnREVMRVRFIEZST00gcHJvamVjdHMgV0hFUkUgZGV2ZWxvcGVyX2lkID0gPycsXG4gICAgICAgICAgW2lkXVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVsZXRlIHRoZSBkZXZlbG9wZXJcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAgICdERUxFVEUgRlJPTSBkZXZlbG9wZXJzIFdIRVJFIGlkID0gPycsXG4gICAgICAgICAgW2lkXVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29tbWl0IHRyYW5zYWN0aW9uXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWl0KCk7XG4gICAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHRoZSBhY3Rpdml0eVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQWN0aXZpdHkoe1xuICAgICAgICAgICAgbGV2ZWw6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnZGV2ZWxvcGVyJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBEZXZlbG9wZXIgZGVsZXRlZDogJHtkZXZlbG9wZXJOYW1lfWAsXG4gICAgICAgICAgICBkZXRhaWxzOiBKU09OLnN0cmluZ2lmeSh7IGRldmVsb3BlcklkOiBpZCwgZGVsZXRlZFByb2plY3RzIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvZyBkZXZlbG9wZXIgZGVsZXRpb24gYWN0aXZpdHk6JywgbG9nRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkZWxldGVkUHJvamVjdHMgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFJvbGxiYWNrIHRyYW5zYWN0aW9uIG9uIGVycm9yXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucm9sbGJhY2soKTtcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBkZXZlbG9wZXIgd2l0aCBjYXNjYWRlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBkZWxldGVkUHJvamVjdHM6IDAgfTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUHJvamVjdFdpdGhEZXZlbG9wZXIocHJvamVjdERhdGE6IE9taXQ8UHJvamVjdCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4sIGRldmVsb3BlcklkPzogbnVtYmVyKTogUHJvbWlzZTxQcm9qZWN0IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHRyYW5zYWN0aW9uXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmJlZ2luVHJhbnNhY3Rpb24oKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBwcm9qZWN0IHdpdGggZGV2ZWxvcGVyX2lkXG4gICAgICAgIGNvbnN0IHByb2plY3RUb0NyZWF0ZSA9IHtcbiAgICAgICAgICAuLi5wcm9qZWN0RGF0YSxcbiAgICAgICAgICBkZXZlbG9wZXJfaWQ6IGRldmVsb3BlcklkIHx8IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAgIGBJTlNFUlQgSU5UTyBwcm9qZWN0cyAoXG4gICAgICAgICAgICBuYW1lLCBzbHVnLCBwcm9qZWN0X25hbWUsIHN1Yl9wcm9qZWN0LCBkaXNwbGF5X3RpdGxlLCBkZXZlbG9wZXIsIGRldmVsb3Blcl9pZCxcbiAgICAgICAgICAgIGxvY2F0aW9uLCBwcmljZSwgc3RhcnRpbmdfcHJpY2UsIHN0YXR1cywgcHJvamVjdF90eXBlLCB0eXBlLCBjYXRlZ29yeSxcbiAgICAgICAgICAgIGNvbG9yX3BhbGV0dGUsIHByb3BlcnR5X3R5cGUsIHByb3BlcnR5X3R5cGVzLCBzdWJfcHJvamVjdHMsIGJlZHJvb21zLCBiYXRocm9vbXMsXG4gICAgICAgICAgICBzdHVkaW9zLCB1bml0c18xYmVkcm9vbSwgdW5pdHNfMmJlZHJvb20sIHVuaXRzXzNiZWRyb29tLCB1bml0c180YmVkcm9vbSxcbiAgICAgICAgICAgIHVuaXRzXzViZWRyb29tLCB1bml0c19vZmZpY2UsIGxpdmluZ19yb29tcywgdW5pdHMsIGFyZWEsIGRlc2NyaXB0aW9uLCBpbWFnZSxcbiAgICAgICAgICAgIGdhbGxlcnksIGNvb3JkaW5hdGVzX2xhdCwgY29vcmRpbmF0ZXNfbG5nLCBmZWF0dXJlcywgYW1lbml0aWVzLCBpc19mZWF0dXJlZCxcbiAgICAgICAgICAgIGJyb2NodXJlX3VybCwgdGhlbWVfY29sb3IsIHZvaWNlX292ZXJfdXJsLCBwcmVzZW50YXRpb25fZmlsZSwgcHJlc2VudGF0aW9uX3VybCxcbiAgICAgICAgICAgIG1lZGlhX3R5cGUsIGZlYXR1cmVkX3ZpZGVvLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0XG4gICAgICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sIE5PVygpLCBOT1coKSlgLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5uYW1lLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnNsdWcsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUucHJvamVjdF9uYW1lIHx8IG51bGwsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUuc3ViX3Byb2plY3QgfHwgbnVsbCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5kaXNwbGF5X3RpdGxlIHx8IG51bGwsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUuZGV2ZWxvcGVyLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLmRldmVsb3Blcl9pZCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5sb2NhdGlvbixcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5wcmljZSB8fCBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnN0YXJ0aW5nX3ByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUuc3RhdHVzIHx8ICdBY3RpdmUnLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnByb2plY3RfdHlwZSB8fCBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnR5cGUgfHwgbnVsbCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5jYXRlZ29yeSB8fCBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLmNvbG9yX3BhbGV0dGUgfHwgbnVsbCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByb2plY3RUb0NyZWF0ZS5wcm9wZXJ0eV90eXBlIHx8IFtdKSxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByb2plY3RUb0NyZWF0ZS5wcm9wZXJ0eV90eXBlcyB8fCBbXSksXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0VG9DcmVhdGUuc3ViX3Byb2plY3RzIHx8IFtdKSxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5iZWRyb29tcyB8fCAwLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLmJhdGhyb29tcyB8fCAwLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnN0dWRpb3MgfHwgMCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS51bml0c18xYmVkcm9vbSB8fCAwLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnVuaXRzXzJiZWRyb29tIHx8IDAsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUudW5pdHNfM2JlZHJvb20gfHwgMCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS51bml0c180YmVkcm9vbSB8fCAwLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnVuaXRzXzViZWRyb29tIHx8IDAsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUudW5pdHNfb2ZmaWNlIHx8IDAsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUubGl2aW5nX3Jvb21zIHx8IDAsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0VG9DcmVhdGUudW5pdHMgfHwgW10pLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLmFyZWEsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUuaW1hZ2UsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0VG9DcmVhdGUuZ2FsbGVyeSB8fCBbXSksXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUuY29vcmRpbmF0ZXNfbGF0LFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLmNvb3JkaW5hdGVzX2xuZyxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByb2plY3RUb0NyZWF0ZS5mZWF0dXJlcyB8fCBbXSksXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9qZWN0VG9DcmVhdGUuYW1lbml0aWVzIHx8IFtdKSxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5pc19mZWF0dXJlZCB8fCBmYWxzZSxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5icm9jaHVyZV91cmwgfHwgbnVsbCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS50aGVtZV9jb2xvciB8fCBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLnZvaWNlX292ZXJfdXJsIHx8IG51bGwsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUucHJlc2VudGF0aW9uX2ZpbGUgfHwgbnVsbCxcbiAgICAgICAgICAgIHByb2plY3RUb0NyZWF0ZS5wcmVzZW50YXRpb25fdXJsIHx8IG51bGwsXG4gICAgICAgICAgICBwcm9qZWN0VG9DcmVhdGUubWVkaWFfdHlwZSB8fCBudWxsLFxuICAgICAgICAgICAgcHJvamVjdFRvQ3JlYXRlLmZlYXR1cmVkX3ZpZGVvIHx8IG51bGxcbiAgICAgICAgICBdXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBkZXZlbG9wZXIncyBwcm9qZWN0IGNvdW50IGlmIGFzc2lnbmVkXG4gICAgICAgIGlmIChkZXZlbG9wZXJJZCkge1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgICAgICdVUERBVEUgZGV2ZWxvcGVycyBTRVQgcHJvamVjdHNfY291bnQgPSBwcm9qZWN0c19jb3VudCArIDEsIHVwZGF0ZWRfYXQgPSBOT1coKSBXSEVSRSBpZCA9ID8nLFxuICAgICAgICAgICAgW2RldmVsb3BlcklkXVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbW1pdCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmV0Y2ggYW5kIHJldHVybiB0aGUgY3JlYXRlZCBwcm9qZWN0XG4gICAgICAgIGNvbnN0IFtwcm9qZWN0Um93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgJ1NFTEVDVCAqIEZST00gcHJvamVjdHMgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgICBbaW5zZXJ0SWRdXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICgocHJvamVjdFJvd3MgYXMgYW55W10pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gKHByb2plY3RSb3dzIGFzIGFueVtdKVswXSBhcyBQcm9qZWN0O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wcm9qZWN0LFxuICAgICAgICAgICAgcHJvcGVydHlfdHlwZTogcHJvamVjdC5wcm9wZXJ0eV90eXBlID8gKHR5cGVvZiBwcm9qZWN0LnByb3BlcnR5X3R5cGUgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShwcm9qZWN0LnByb3BlcnR5X3R5cGUpIDogcHJvamVjdC5wcm9wZXJ0eV90eXBlKSA6IFtdLFxuICAgICAgICAgICAgcHJvcGVydHlfdHlwZXM6IHByb2plY3QucHJvcGVydHlfdHlwZXMgPyAodHlwZW9mIHByb2plY3QucHJvcGVydHlfdHlwZXMgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShwcm9qZWN0LnByb3BlcnR5X3R5cGVzKSA6IHByb2plY3QucHJvcGVydHlfdHlwZXMpIDogW10sXG4gICAgICAgICAgICBzdWJfcHJvamVjdHM6IHByb2plY3Quc3ViX3Byb2plY3RzID8gKHR5cGVvZiBwcm9qZWN0LnN1Yl9wcm9qZWN0cyA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHByb2plY3Quc3ViX3Byb2plY3RzKSA6IHByb2plY3Quc3ViX3Byb2plY3RzKSA6IFtdLFxuICAgICAgICAgICAgdW5pdHM6IHByb2plY3QudW5pdHMgPyAodHlwZW9mIHByb2plY3QudW5pdHMgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShwcm9qZWN0LnVuaXRzKSA6IHByb2plY3QudW5pdHMpIDogW10sXG4gICAgICAgICAgICBnYWxsZXJ5OiBwcm9qZWN0LmdhbGxlcnkgPyAodHlwZW9mIHByb2plY3QuZ2FsbGVyeSA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHByb2plY3QuZ2FsbGVyeSkgOiBwcm9qZWN0LmdhbGxlcnkpIDogW10sXG4gICAgICAgICAgICBmZWF0dXJlczogcHJvamVjdC5mZWF0dXJlcyA/ICh0eXBlb2YgcHJvamVjdC5mZWF0dXJlcyA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHByb2plY3QuZmVhdHVyZXMpIDogcHJvamVjdC5mZWF0dXJlcykgOiBbXSxcbiAgICAgICAgICAgIGFtZW5pdGllczogcHJvamVjdC5hbWVuaXRpZXMgPyAodHlwZW9mIHByb2plY3QuYW1lbml0aWVzID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UocHJvamVjdC5hbWVuaXRpZXMpIDogcHJvamVjdC5hbWVuaXRpZXMpIDogW11cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFJvbGxiYWNrIHRyYW5zYWN0aW9uIG9uIGVycm9yXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucm9sbGJhY2soKTtcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwcm9qZWN0IHdpdGggZGV2ZWxvcGVyOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFydGljbGVzIENSVUQgb3BlcmF0aW9uc1xuICBzdGF0aWMgYXN5bmMgZ2V0QXJ0aWNsZXMoKTogUHJvbWlzZTxBcnRpY2xlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIGFydGljbGVzIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQycpO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBjb25zdCBhcnRpY2xlcyA9IHJvd3MgYXMgQXJ0aWNsZVtdO1xuICAgICAgXG4gICAgICAvLyBQYXJzZSBKU09OIHRhZ3MgZmllbGQgYW5kIGhhbmRsZSBtaXNzaW5nIGNvbHVtbnNcbiAgICAgIHJldHVybiBhcnRpY2xlcy5tYXAoYXJ0aWNsZSA9PiAoe1xuICAgICAgICAuLi5hcnRpY2xlLFxuICAgICAgICB0YWdzOiBhcnRpY2xlLnRhZ3MgPyAodHlwZW9mIGFydGljbGUudGFncyA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGFydGljbGUudGFncykgOiBhcnRpY2xlLnRhZ3MpIDogW10sXG4gICAgICAgIGNhdGVnb3J5OiBhcnRpY2xlLmNhdGVnb3J5IHx8ICcnLFxuICAgICAgICByZWFkX3RpbWU6IGFydGljbGUucmVhZF90aW1lIHx8IDUsXG4gICAgICAgIG1ldGFfZGVzY3JpcHRpb246IGFydGljbGUubWV0YV9kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgZmVhdHVyZWQ6IGFydGljbGUuZmVhdHVyZWQgfHwgZmFsc2UsXG4gICAgICAgIHZpZXdzX2NvdW50OiBhcnRpY2xlLnZpZXdzX2NvdW50IHx8IDBcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYXJ0aWNsZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVBcnRpY2xlKGFydGljbGU6IE9taXQ8QXJ0aWNsZSwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pOiBQcm9taXNlPEFydGljbGUgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gRmlyc3QgdHJ5IHdpdGggYWxsIGNvbHVtbnNcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAgIGBJTlNFUlQgSU5UTyBhcnRpY2xlcyAodGl0bGUsIHNsdWcsIGNvbnRlbnQsIGV4Y2VycHQsIGZlYXR1cmVkX2ltYWdlLCBhdXRob3IsIHN0YXR1cywgcHVibGlzaGVkX2F0LCB0YWdzLCBjYXRlZ29yeSwgcmVhZF90aW1lLCBtZXRhX2Rlc2NyaXB0aW9uLCBmZWF0dXJlZCwgdmlld3NfY291bnQpXG4gICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIGFydGljbGUudGl0bGUsIGFydGljbGUuc2x1ZywgYXJ0aWNsZS5jb250ZW50LCBhcnRpY2xlLmV4Y2VycHQsXG4gICAgICAgICAgICBhcnRpY2xlLmZlYXR1cmVkX2ltYWdlLCBhcnRpY2xlLmF1dGhvciwgYXJ0aWNsZS5zdGF0dXMsIGFydGljbGUucHVibGlzaGVkX2F0LFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZS50YWdzIHx8IFtdKSwgYXJ0aWNsZS5jYXRlZ29yeSwgYXJ0aWNsZS5yZWFkX3RpbWUsXG4gICAgICAgICAgICBhcnRpY2xlLm1ldGFfZGVzY3JpcHRpb24sIGFydGljbGUuZmVhdHVyZWQgfHwgZmFsc2UsIGFydGljbGUudmlld3NfY291bnQgfHwgMFxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGluc2VydElkID0gKHJlc3VsdCBhcyBhbnkpLmluc2VydElkO1xuICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0QXJ0aWNsZUJ5SWQoaW5zZXJ0SWQpO1xuICAgICAgfSBjYXRjaCAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Z1bGwgaW5zZXJ0IGZhaWxlZCwgdHJ5aW5nIGJhc2ljIGluc2VydDonLCBpbnNlcnRFcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB0aGF0IGZhaWxzLCB0cnkgd2l0aCBiYXNpYyBjb2x1bW5zIG9ubHlcbiAgICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgYElOU0VSVCBJTlRPIGFydGljbGVzICh0aXRsZSwgc2x1ZywgY29udGVudCwgZXhjZXJwdCwgZmVhdHVyZWRfaW1hZ2UsIGF1dGhvciwgc3RhdHVzLCBwdWJsaXNoZWRfYXQpXG4gICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIGFydGljbGUudGl0bGUsIGFydGljbGUuc2x1ZywgYXJ0aWNsZS5jb250ZW50LCBhcnRpY2xlLmV4Y2VycHQsXG4gICAgICAgICAgICBhcnRpY2xlLmZlYXR1cmVkX2ltYWdlLCBhcnRpY2xlLmF1dGhvciwgYXJ0aWNsZS5zdGF0dXMsIGFydGljbGUucHVibGlzaGVkX2F0XG4gICAgICAgICAgXVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5zZXJ0SWQgPSAocmVzdWx0IGFzIGFueSkuaW5zZXJ0SWQ7XG4gICAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRBcnRpY2xlQnlJZChpbnNlcnRJZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGFydGljbGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEFydGljbGVCeUlkKGlkOiBudW1iZXIpOiBQcm9taXNlPEFydGljbGUgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUICogRlJPTSBhcnRpY2xlcyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgY29uc3QgYXJ0aWNsZXMgPSByb3dzIGFzIEFydGljbGVbXTtcbiAgICAgIGlmIChhcnRpY2xlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGFydGljbGUgPSBhcnRpY2xlc1swXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5hcnRpY2xlLFxuICAgICAgICAgIHRhZ3M6IGFydGljbGUudGFncyA/ICh0eXBlb2YgYXJ0aWNsZS50YWdzID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoYXJ0aWNsZS50YWdzKSA6IGFydGljbGUudGFncykgOiBbXSxcbiAgICAgICAgICBjYXRlZ29yeTogYXJ0aWNsZS5jYXRlZ29yeSB8fCAnJyxcbiAgICAgICAgICByZWFkX3RpbWU6IGFydGljbGUucmVhZF90aW1lIHx8IDUsXG4gICAgICAgICAgbWV0YV9kZXNjcmlwdGlvbjogYXJ0aWNsZS5tZXRhX2Rlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgIGZlYXR1cmVkOiBhcnRpY2xlLmZlYXR1cmVkIHx8IGZhbHNlLFxuICAgICAgICAgIHZpZXdzX2NvdW50OiBhcnRpY2xlLnZpZXdzX2NvdW50IHx8IDBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcnRpY2xlIGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVBcnRpY2xlKGlkOiBudW1iZXIsIHVwZGF0ZURhdGE6IFBhcnRpYWw8QXJ0aWNsZT4pOiBQcm9taXNlPEFydGljbGUgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gQ29udmVydCB0YWdzIGFycmF5IHRvIEpTT04gc3RyaW5nIGlmIHByZXNlbnRcbiAgICAgIGNvbnN0IHByb2Nlc3NlZERhdGEgPSB7IC4uLnVwZGF0ZURhdGEgfTtcbiAgICAgIGlmIChwcm9jZXNzZWREYXRhLnRhZ3MpIHtcbiAgICAgICAgcHJvY2Vzc2VkRGF0YS50YWdzID0gSlNPTi5zdHJpbmdpZnkocHJvY2Vzc2VkRGF0YS50YWdzKSBhcyBhbnk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHByb2Nlc3NlZERhdGEpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoZmllbGQgPT4gYCR7ZmllbGR9ID0gP2ApLmpvaW4oJywgJyk7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IChwcm9jZXNzZWREYXRhIGFzIGFueSlbZmllbGRdKTtcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgVVBEQVRFIGFydGljbGVzIFNFVCAke3NldENsYXVzZX0sIHVwZGF0ZWRfYXQgPSBOT1coKSBXSEVSRSBpZCA9ID9gLFxuICAgICAgICBbLi4udmFsdWVzLCBpZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0QXJ0aWNsZUJ5SWQoaWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBhcnRpY2xlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGVBcnRpY2xlKGlkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdERUxFVEUgRlJPTSBhcnRpY2xlcyBXSEVSRSBpZCA9ID8nLCBbaWRdKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFydGljbGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRBcnRpY2xlQnlTbHVnKHNsdWc6IHN0cmluZyk6IFByb21pc2U8QXJ0aWNsZSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIGFydGljbGVzIFdIRVJFIHNsdWcgPSA/IEFORCBzdGF0dXMgPSBcInB1Ymxpc2hlZFwiJywgW3NsdWddKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgY29uc3QgYXJ0aWNsZXMgPSByb3dzIGFzIEFydGljbGVbXTtcbiAgICAgIGlmIChhcnRpY2xlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGFydGljbGUgPSBhcnRpY2xlc1swXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5hcnRpY2xlLFxuICAgICAgICAgIHRhZ3M6IGFydGljbGUudGFncyA/ICh0eXBlb2YgYXJ0aWNsZS50YWdzID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoYXJ0aWNsZS50YWdzKSA6IGFydGljbGUudGFncykgOiBbXSxcbiAgICAgICAgICBjYXRlZ29yeTogYXJ0aWNsZS5jYXRlZ29yeSB8fCAnJyxcbiAgICAgICAgICByZWFkX3RpbWU6IGFydGljbGUucmVhZF90aW1lIHx8IDUsXG4gICAgICAgICAgbWV0YV9kZXNjcmlwdGlvbjogYXJ0aWNsZS5tZXRhX2Rlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgIGZlYXR1cmVkOiBhcnRpY2xlLmZlYXR1cmVkIHx8IGZhbHNlLFxuICAgICAgICAgIHZpZXdzX2NvdW50OiBhcnRpY2xlLnZpZXdzX2NvdW50IHx8IDBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcnRpY2xlIGJ5IHNsdWc6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFB1Ymxpc2hlZEFydGljbGVzKG9wdGlvbnM/OiB7XG4gICAgbGltaXQ/OiBudW1iZXI7XG4gICAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gICAgZmVhdHVyZWQ/OiBib29sZWFuO1xuICB9KTogUHJvbWlzZTxBcnRpY2xlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgbGV0IHF1ZXJ5ID0gJ1NFTEVDVCAqIEZST00gYXJ0aWNsZXMgV0hFUkUgc3RhdHVzID0gXCJwdWJsaXNoZWRcIiBPUkRFUiBCWSBwdWJsaXNoZWRfYXQgREVTQywgY3JlYXRlZF9hdCBERVNDJztcbiAgICAgIGNvbnN0IHBhcmFtczogYW55W10gPSBbXTtcblxuICAgICAgaWYgKG9wdGlvbnM/LmxpbWl0KSB7XG4gICAgICAgIHF1ZXJ5ICs9ICcgTElNSVQgPyc7XG4gICAgICAgIHBhcmFtcy5wdXNoKG9wdGlvbnMubGltaXQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUocXVlcnksIHBhcmFtcyk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIGNvbnN0IGFydGljbGVzID0gcm93cyBhcyBBcnRpY2xlW107XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIEpTT04gdGFncyBmaWVsZCBhbmQgaGFuZGxlIG1pc3NpbmcgY29sdW1uc1xuICAgICAgcmV0dXJuIGFydGljbGVzLm1hcChhcnRpY2xlID0+ICh7XG4gICAgICAgIC4uLmFydGljbGUsXG4gICAgICAgIHRhZ3M6IGFydGljbGUudGFncyA/ICh0eXBlb2YgYXJ0aWNsZS50YWdzID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoYXJ0aWNsZS50YWdzKSA6IGFydGljbGUudGFncykgOiBbXSxcbiAgICAgICAgY2F0ZWdvcnk6IGFydGljbGUuY2F0ZWdvcnkgfHwgJycsXG4gICAgICAgIHJlYWRfdGltZTogYXJ0aWNsZS5yZWFkX3RpbWUgfHwgNSxcbiAgICAgICAgbWV0YV9kZXNjcmlwdGlvbjogYXJ0aWNsZS5tZXRhX2Rlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBmZWF0dXJlZDogYXJ0aWNsZS5mZWF0dXJlZCB8fCBmYWxzZSxcbiAgICAgICAgdmlld3NfY291bnQ6IGFydGljbGUudmlld3NfY291bnQgfHwgMFxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwdWJsaXNoZWQgYXJ0aWNsZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1lZGlhIEZpbGVzIENSVUQgb3BlcmF0aW9uc1xuICBzdGF0aWMgYXN5bmMgZ2V0TWVkaWFGaWxlcygpOiBQcm9taXNlPE1lZGlhRmlsZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUICogRlJPTSBtZWRpYV9maWxlcyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHJvd3MgYXMgTWVkaWFGaWxlW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1lZGlhIGZpbGVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTWVkaWFGaWxlKG1lZGlhRGF0YTogT21pdDxNZWRpYUZpbGUsICdpZCcgfCAnY3JlYXRlZF9hdCc+KTogUHJvbWlzZTxNZWRpYUZpbGUgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgSU5TRVJUIElOVE8gbWVkaWFfZmlsZXMgKGZpbGVuYW1lLCBvcmlnaW5hbF9uYW1lLCBmaWxlX3BhdGgsIGZpbGVfc2l6ZSwgbWltZV90eXBlLCBhbHRfdGV4dCwgdXBsb2FkZWRfYnkpXG4gICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgICAgW1xuICAgICAgICAgIG1lZGlhRGF0YS5maWxlbmFtZSwgbWVkaWFEYXRhLm9yaWdpbmFsX25hbWUsIG1lZGlhRGF0YS5maWxlX3BhdGgsXG4gICAgICAgICAgbWVkaWFEYXRhLmZpbGVfc2l6ZSwgbWVkaWFEYXRhLm1pbWVfdHlwZSwgbWVkaWFEYXRhLmFsdF90ZXh0LCBtZWRpYURhdGEudXBsb2FkZWRfYnlcbiAgICAgICAgXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgaW5zZXJ0SWQgPSAocmVzdWx0IGFzIGFueSkuaW5zZXJ0SWQ7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TWVkaWFGaWxlQnlJZChpbnNlcnRJZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG1lZGlhIGZpbGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldE1lZGlhRmlsZUJ5SWQoaWQ6IG51bWJlcik6IFByb21pc2U8TWVkaWFGaWxlIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gbWVkaWFfZmlsZXMgV0hFUkUgaWQgPSA/JywgW2lkXSk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIGNvbnN0IG1lZGlhRmlsZXMgPSByb3dzIGFzIE1lZGlhRmlsZVtdO1xuICAgICAgcmV0dXJuIG1lZGlhRmlsZXMubGVuZ3RoID4gMCA/IG1lZGlhRmlsZXNbMF0gOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZWRpYSBmaWxlIGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVNZWRpYUZpbGUoaWQ6IG51bWJlciwgdXBkYXRlRGF0YTogUGFydGlhbDxNZWRpYUZpbGU+KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmtleXModXBkYXRlRGF0YSkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAga2V5ICE9PSAnaWQnICYmIGtleSAhPT0gJ2NyZWF0ZWRfYXQnICYmIHVwZGF0ZURhdGFba2V5IGFzIGtleW9mIE1lZGlhRmlsZV0gIT09IHVuZGVmaW5lZFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzZXRDbGF1c2UgPSBmaWVsZHMubWFwKGZpZWxkID0+IGAke2ZpZWxkfSA9ID9gKS5qb2luKCcsICcpO1xuICAgICAgY29uc3QgdmFsdWVzID0gZmllbGRzLm1hcChmaWVsZCA9PiB1cGRhdGVEYXRhW2ZpZWxkIGFzIGtleW9mIE1lZGlhRmlsZV0pO1xuXG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgYFVQREFURSBtZWRpYV9maWxlcyBTRVQgJHtzZXRDbGF1c2V9IFdIRVJFIGlkID0gP2AsXG4gICAgICAgIFsuLi52YWx1ZXMsIGlkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gKHJlc3VsdCBhcyBhbnkpLmFmZmVjdGVkUm93cyA+IDA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG1lZGlhIGZpbGU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGVNZWRpYUZpbGUoaWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ0RFTEVURSBGUk9NIG1lZGlhX2ZpbGVzIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgbWVkaWEgZmlsZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gSGVybyBTZWN0aW9ucyBDUlVEIG9wZXJhdGlvbnNcbiAgc3RhdGljIGFzeW5jIGdldEhlcm9TZWN0aW9ucygpOiBQcm9taXNlPEhlcm9TZWN0aW9uW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIGhlcm9fc2VjdGlvbnMgT1JERVIgQlkgaWQgREVTQycpO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gcm93cyBhcyBIZXJvU2VjdGlvbltdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBoZXJvIHNlY3Rpb25zOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlSGVyb1NlY3Rpb24oaGVyb0RhdGE6IE9taXQ8SGVyb1NlY3Rpb24sICdpZCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTxIZXJvU2VjdGlvbiB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgIGBJTlNFUlQgSU5UTyBoZXJvX3NlY3Rpb25zIChwYWdlLCB0aXRsZSwgc3VidGl0bGUsIGRlc2NyaXB0aW9uLCBiYWNrZ3JvdW5kX2ltYWdlLCBjdGFfdGV4dCwgY3RhX2xpbmssIGlzX2FjdGl2ZSlcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgICBbXG4gICAgICAgICAgaGVyb0RhdGEucGFnZSwgaGVyb0RhdGEudGl0bGUsIGhlcm9EYXRhLnN1YnRpdGxlLCBoZXJvRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICBoZXJvRGF0YS5iYWNrZ3JvdW5kX2ltYWdlLCBoZXJvRGF0YS5jdGFfdGV4dCwgaGVyb0RhdGEuY3RhX2xpbmssIGhlcm9EYXRhLmlzX2FjdGl2ZVxuICAgICAgICBdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRIZXJvU2VjdGlvbkJ5SWQoaW5zZXJ0SWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBoZXJvIHNlY3Rpb246JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEhlcm9TZWN0aW9uQnlJZChpZDogbnVtYmVyKTogUHJvbWlzZTxIZXJvU2VjdGlvbiB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIGhlcm9fc2VjdGlvbnMgV0hFUkUgaWQgPSA/JywgW2lkXSk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIGNvbnN0IGhlcm9TZWN0aW9ucyA9IHJvd3MgYXMgSGVyb1NlY3Rpb25bXTtcbiAgICAgIHJldHVybiBoZXJvU2VjdGlvbnMubGVuZ3RoID4gMCA/IGhlcm9TZWN0aW9uc1swXSA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGhlcm8gc2VjdGlvbiBieSBJRDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlSGVyb1NlY3Rpb24oaWQ6IG51bWJlciwgdXBkYXRlRGF0YTogUGFydGlhbDxIZXJvU2VjdGlvbj4pOiBQcm9taXNlPEhlcm9TZWN0aW9uIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnaWQnKTtcbiAgICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoZmllbGQgPT4gYCR7ZmllbGR9ID0gP2ApLmpvaW4oJywgJyk7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+ICh1cGRhdGVEYXRhIGFzIGFueSlbZmllbGRdKTtcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgVVBEQVRFIGhlcm9fc2VjdGlvbnMgU0VUICR7c2V0Q2xhdXNlfSwgdXBkYXRlZF9hdCA9IE5PVygpIFdIRVJFIGlkID0gP2AsXG4gICAgICAgIFsuLi52YWx1ZXMsIGlkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRIZXJvU2VjdGlvbkJ5SWQoaWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBoZXJvIHNlY3Rpb246JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUhlcm9TZWN0aW9uKGlkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdERUxFVEUgRlJPTSBoZXJvX3NlY3Rpb25zIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaGVybyBzZWN0aW9uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBVc2VycyBhdXRoZW50aWNhdGlvblxuICBzdGF0aWMgYXN5bmMgZ2V0VXNlckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gPyBBTkQgaXNfYWN0aXZlID0gVFJVRScsIFtlbWFpbF0pO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBjb25zdCB1c2VycyA9IHJvd3MgYXMgVXNlcltdO1xuICAgICAgcmV0dXJuIHVzZXJzLmxlbmd0aCA+IDAgPyB1c2Vyc1swXSA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgYnkgZW1haWw6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVVzZXJMYXN0TG9naW4odXNlcklkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdVUERBVEUgdXNlcnMgU0VUIGxhc3RfbG9naW4gPSBOT1coKSBXSEVSRSBpZCA9ID8nLCBbdXNlcklkXSk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIGxhc3QgbG9naW46JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN5c3RlbSBsb2dzXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVMb2cobG9nRGF0YTogT21pdDxTeXN0ZW1Mb2csICdpZCcgfCAndGltZXN0YW1wJz4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgSU5TRVJUIElOVE8gc3lzdGVtX2xvZ3MgKGxldmVsLCBjYXRlZ29yeSwgbWVzc2FnZSwgdXNlcl9pZCwgaXBfYWRkcmVzcywgdXNlcl9hZ2VudCwgZGV0YWlscylcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgICBbXG4gICAgICAgICAgbG9nRGF0YS5sZXZlbCwgbG9nRGF0YS5jYXRlZ29yeSwgbG9nRGF0YS5tZXNzYWdlLCBsb2dEYXRhLnVzZXJfaWQsXG4gICAgICAgICAgbG9nRGF0YS5pcF9hZGRyZXNzLCBsb2dEYXRhLnVzZXJfYWdlbnQsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEuZGV0YWlscyB8fCB7fSlcbiAgICAgICAgXVxuICAgICAgKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGxvZzonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHN5c3RlbSBzdGF0aXN0aWNzXG4gIHN0YXRpYyBhc3luYyBnZXRTeXN0ZW1TdGF0cygpOiBQcm9taXNlPHtcbiAgICB0b3RhbFByb2plY3RzOiBudW1iZXI7XG4gICAgdG90YWxEZXZlbG9wZXJzOiBudW1iZXI7XG4gICAgdG90YWxVc2VyczogbnVtYmVyO1xuICAgIHRvdGFsTG9nczogbnVtYmVyO1xuICAgIGxhc3RCYWNrdXA6IERhdGU7XG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICBjb25zdCBbcHJvamVjdENvdW50XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gcHJvamVjdHMnKTtcbiAgICAgIGNvbnN0IFtkZXZlbG9wZXJDb3VudF0gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGRldmVsb3BlcnMnKTtcbiAgICAgIGNvbnN0IFt1c2VyQ291bnRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSB1c2VycycpO1xuICAgICAgY29uc3QgW2xvZ0NvdW50XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gc3lzdGVtX2xvZ3MnKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsUHJvamVjdHM6IChwcm9qZWN0Q291bnQgYXMgYW55KVswXS5jb3VudCxcbiAgICAgICAgdG90YWxEZXZlbG9wZXJzOiAoZGV2ZWxvcGVyQ291bnQgYXMgYW55KVswXS5jb3VudCxcbiAgICAgICAgdG90YWxVc2VyczogKHVzZXJDb3VudCBhcyBhbnkpWzBdLmNvdW50LFxuICAgICAgICB0b3RhbExvZ3M6IChsb2dDb3VudCBhcyBhbnkpWzBdLmNvdW50LFxuICAgICAgICBsYXN0QmFja3VwOiBuZXcgRGF0ZSgpXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzeXN0ZW0gc3RhdHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxQcm9qZWN0czogMCxcbiAgICAgICAgdG90YWxEZXZlbG9wZXJzOiAwLFxuICAgICAgICB0b3RhbFVzZXJzOiAwLFxuICAgICAgICB0b3RhbExvZ3M6IDAsXG4gICAgICAgIGxhc3RCYWNrdXA6IG5ldyBEYXRlKClcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0dGluZ3MgbWFuYWdlbWVudFxuICBzdGF0aWMgYXN5bmMgZ2V0U2V0dGluZ3MoKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgKiBGUk9NIHNpdGVfc2V0dGluZ3MgT1JERVIgQlkgaWQgREVTQyBMSU1JVCAxJyk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2V0dGluZ3MgPSByb3dzIGFzIGFueVtdO1xuICAgICAgaWYgKHNldHRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZGJTZXR0aW5ncyA9IHNldHRpbmdzWzBdO1xuICAgICAgICAvLyBUcmFuc2Zvcm0gZGF0YWJhc2UgY29sdW1ucyB0byBBUEkgZm9ybWF0XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2l0ZToge1xuICAgICAgICAgICAgdGl0bGU6IGRiU2V0dGluZ3Muc2l0ZV90aXRsZSB8fCAnUHJlbWl1bSBDaG9pY2UnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRiU2V0dGluZ3Muc2l0ZV9kZXNjcmlwdGlvbiB8fCAnWW91ciB0cnVzdGVkIHBhcnRuZXIgaW4gRHViYWkgcmVhbCBlc3RhdGUnLFxuICAgICAgICAgICAgbG9nbzogZGJTZXR0aW5ncy5zaXRlX2xvZ28gfHwgJy9sb2dvLnBuZycsXG4gICAgICAgICAgICBmYXZpY29uOiBkYlNldHRpbmdzLnNpdGVfZmF2aWNvbiB8fCAnL2Zhdmljb24uaWNvJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29udGFjdDoge1xuICAgICAgICAgICAgZW1haWw6IGRiU2V0dGluZ3MuY29udGFjdF9lbWFpbCB8fCAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgcGhvbmU6IGRiU2V0dGluZ3MuY29udGFjdF9waG9uZSB8fCBudWxsLFxuICAgICAgYWRkcmVzczogZGJTZXR0aW5ncy5jb250YWN0X2FkZHJlc3MgfHwgJ0R1YmFpLCBVQUUnLFxuICAgICAgd2hhdHNhcHA6IGRiU2V0dGluZ3MuY29udGFjdF93aGF0c2FwcCB8fCBkYlNldHRpbmdzLndoYXRzYXBwX3Bob25lIHx8IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNvY2lhbDoge1xuICAgICAgICAgICAgZmFjZWJvb2s6IGRiU2V0dGluZ3Muc29jaWFsX2ZhY2Vib29rIHx8ICcnLFxuICAgICAgICAgICAgaW5zdGFncmFtOiBkYlNldHRpbmdzLnNvY2lhbF9pbnN0YWdyYW0gfHwgJycsXG4gICAgICAgICAgICB0d2l0dGVyOiBkYlNldHRpbmdzLnNvY2lhbF90d2l0dGVyIHx8ICcnLFxuICAgICAgICAgICAgbGlua2VkaW46IGRiU2V0dGluZ3Muc29jaWFsX2xpbmtlZGluIHx8ICcnLFxuICAgICAgICAgICAgeW91dHViZTogZGJTZXR0aW5ncy5zb2NpYWxfeW91dHViZSB8fCAnJyxcbiAgICAgICAgICAgIHRpa3RvazogZGJTZXR0aW5ncy5zb2NpYWxfdGlrdG9rIHx8ICcnLFxuICAgICAgICAgICAgc25hcGNoYXQ6IGRiU2V0dGluZ3Muc29jaWFsX3NuYXBjaGF0IHx8ICcnLFxuICAgICAgICAgICAgdGVsZWdyYW06IGRiU2V0dGluZ3Muc29jaWFsX3RlbGVncmFtIHx8ICcnLFxuICAgICAgICAgICAgd2hhdHNhcHA6IGRiU2V0dGluZ3Muc29jaWFsX3doYXRzYXBwIHx8ICcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZW86IHtcbiAgICAgICAgICAgIG1ldGFUaXRsZTogZGJTZXR0aW5ncy5zZW9fbWV0YV90aXRsZSB8fCAnUHJlbWl1bSBDaG9pY2UgLSBEdWJhaSBSZWFsIEVzdGF0ZScsXG4gICAgICAgICAgICBtZXRhRGVzY3JpcHRpb246IGRiU2V0dGluZ3Muc2VvX21ldGFfZGVzY3JpcHRpb24gfHwgJ0Rpc2NvdmVyIHByZW1pdW0gcmVhbCBlc3RhdGUgb3Bwb3J0dW5pdGllcyBpbiBEdWJhaSB3aXRoIFByZW1pdW0gQ2hvaWNlLiBZb3VyIHRydXN0ZWQgcGFydG5lciBmb3IgbHV4dXJ5IHByb3BlcnRpZXMgYW5kIGludmVzdG1lbnQgc29sdXRpb25zLicsXG4gICAgICAgICAgICBrZXl3b3JkczogZGJTZXR0aW5ncy5zZW9fa2V5d29yZHMgfHwgJ0R1YmFpIHJlYWwgZXN0YXRlLCBsdXh1cnkgcHJvcGVydGllcywgaW52ZXN0bWVudCwgUHJlbWl1bSBDaG9pY2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmZWF0dXJlczoge1xuICAgICAgICAgICAgZW5hYmxlQmxvZzogZGJTZXR0aW5ncy5mZWF0dXJlc19lbmFibGVfYmxvZyAhPT0gZmFsc2UsXG4gICAgICAgICAgICBlbmFibGVOZXdzbGV0dGVyOiBkYlNldHRpbmdzLmZlYXR1cmVzX2VuYWJsZV9uZXdzbGV0dGVyICE9PSBmYWxzZSxcbiAgICAgICAgICAgIGVuYWJsZVdoYXRzQXBwOiBkYlNldHRpbmdzLmZlYXR1cmVzX2VuYWJsZV93aGF0c2FwcCAhPT0gZmFsc2UsXG4gICAgICAgICAgICBlbmFibGVMaXZlQ2hhdDogZGJTZXR0aW5ncy5mZWF0dXJlc19lbmFibGVfbGl2ZV9jaGF0ID09PSB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB3aGF0c2FwcDoge1xuICAgICAgICAgICAgcGhvbmU6IGRiU2V0dGluZ3Mud2hhdHNhcHBfcGhvbmUgfHwgZGJTZXR0aW5ncy5jb250YWN0X3doYXRzYXBwIHx8IG51bGwsXG4gICAgICAgICAgICBlbmFibGVkOiBkYlNldHRpbmdzLndoYXRzYXBwX2VuYWJsZWQgIT09IGZhbHNlLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6IGRiU2V0dGluZ3Mud2hhdHNhcHBfZGVmYXVsdF9tZXNzYWdlIHx8ICdIZWxsbyEgSVxcJ20gaW50ZXJlc3RlZCBpbiB5b3VyIHJlYWwgZXN0YXRlIHNlcnZpY2VzLicsXG4gICAgICAgICAgICBidXNpbmVzc0hvdXJzOiBkYlNldHRpbmdzLndoYXRzYXBwX2J1c2luZXNzX2hvdXJzID8gSlNPTi5wYXJzZShkYlNldHRpbmdzLndoYXRzYXBwX2J1c2luZXNzX2hvdXJzKSA6IG51bGwsXG4gICAgICAgICAgICBhdXRvUmVwbHk6IGRiU2V0dGluZ3Mud2hhdHNhcHBfYXV0b19yZXBseSB8fCBudWxsLFxuICAgICAgICAgICAgc2hvd09uUGFnZXM6IGRiU2V0dGluZ3Mud2hhdHNhcHBfc2hvd19vbl9wYWdlcyA/IEpTT04ucGFyc2UoZGJTZXR0aW5ncy53aGF0c2FwcF9zaG93X29uX3BhZ2VzKSA6IFsnaG9tZScsICdwcm9qZWN0cycsICdjb250YWN0J11cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gZGVmYXVsdCBzZXR0aW5ncyBpZiBub25lIGV4aXN0XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2l0ZToge1xuICAgICAgICAgICAgdGl0bGU6ICdQcmVtaXVtIENob2ljZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1lvdXIgdHJ1c3RlZCBwYXJ0bmVyIGluIER1YmFpIHJlYWwgZXN0YXRlJyxcbiAgICAgICAgICAgIGxvZ286ICcvbG9nby5wbmcnLFxuICAgICAgICAgICAgZmF2aWNvbjogJy9mYXZpY29uLmljbydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRhY3Q6IHtcbiAgICAgICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgcGhvbmU6IG51bGwsXG4gICAgICBhZGRyZXNzOiAnRHViYWksIFVBRScsXG4gICAgICB3aGF0c2FwcDogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc29jaWFsOiB7XG4gICAgICAgICAgICBmYWNlYm9vazogJycsXG4gICAgICAgICAgICBpbnN0YWdyYW06ICcnLFxuICAgICAgICAgICAgdHdpdHRlcjogJycsXG4gICAgICAgICAgICBsaW5rZWRpbjogJycsXG4gICAgICAgICAgICB5b3V0dWJlOiAnJyxcbiAgICAgICAgICAgIHRpa3RvazogJycsXG4gICAgICAgICAgICBzbmFwY2hhdDogJycsXG4gICAgICAgICAgICB0ZWxlZ3JhbTogJycsXG4gICAgICAgICAgICB3aGF0c2FwcDogJydcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbzoge1xuICAgICAgICAgICAgbWV0YVRpdGxlOiAnUHJlbWl1bSBDaG9pY2UgLSBEdWJhaSBSZWFsIEVzdGF0ZScsXG4gICAgICAgICAgICBtZXRhRGVzY3JpcHRpb246ICdEaXNjb3ZlciBwcmVtaXVtIHJlYWwgZXN0YXRlIG9wcG9ydHVuaXRpZXMgaW4gRHViYWkgd2l0aCBQcmVtaXVtIENob2ljZS4gWW91ciB0cnVzdGVkIHBhcnRuZXIgZm9yIGx1eHVyeSBwcm9wZXJ0aWVzIGFuZCBpbnZlc3RtZW50IHNvbHV0aW9ucy4nLFxuICAgICAgICAgICAga2V5d29yZHM6ICdEdWJhaSByZWFsIGVzdGF0ZSwgbHV4dXJ5IHByb3BlcnRpZXMsIGludmVzdG1lbnQsIFByZW1pdW0gQ2hvaWNlJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmVhdHVyZXM6IHtcbiAgICAgICAgICAgIGVuYWJsZUJsb2c6IHRydWUsXG4gICAgICAgICAgICBlbmFibGVOZXdzbGV0dGVyOiB0cnVlLFxuICAgICAgICAgICAgZW5hYmxlV2hhdHNBcHA6IHRydWUsXG4gICAgICAgICAgICBlbmFibGVMaXZlQ2hhdDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIHdoYXRzYXBwOiB7XG4gICAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0hlbGxvISBJXFwnbSBpbnRlcmVzdGVkIGluIHlvdXIgcmVhbCBlc3RhdGUgc2VydmljZXMuJyxcbiAgICAgICAgICAgIGJ1c2luZXNzSG91cnM6IG51bGwsXG4gICAgICAgICAgICBhdXRvUmVwbHk6IG51bGwsXG4gICAgICAgICAgICBzaG93T25QYWdlczogWydob21lJywgJ3Byb2plY3RzJywgJ2NvbnRhY3QnXVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2V0dGluZ3M6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIGRlZmF1bHQgc2V0dGluZ3Mgb24gZXJyb3JcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNpdGU6IHtcbiAgICAgICAgICB0aXRsZTogJ1ByZW1pdW0gQ2hvaWNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1lvdXIgdHJ1c3RlZCBwYXJ0bmVyIGluIER1YmFpIHJlYWwgZXN0YXRlJyxcbiAgICAgICAgICBsb2dvOiAnL2xvZ28ucG5nJyxcbiAgICAgICAgICBmYXZpY29uOiAnL2Zhdmljb24uaWNvJ1xuICAgICAgICB9LFxuICAgICAgICBjb250YWN0OiB7XG4gICAgICAgICAgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICBwaG9uZTogbnVsbCxcbiAgICAgIGFkZHJlc3M6ICdEdWJhaSwgVUFFJyxcbiAgICAgIHdoYXRzYXBwOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHNvY2lhbDoge1xuICAgICAgICAgIGZhY2Vib29rOiAnJyxcbiAgICAgICAgICBpbnN0YWdyYW06ICcnLFxuICAgICAgICAgIHR3aXR0ZXI6ICcnLFxuICAgICAgICAgIGxpbmtlZGluOiAnJyxcbiAgICAgICAgICB5b3V0dWJlOiAnJyxcbiAgICAgICAgICB0aWt0b2s6ICcnLFxuICAgICAgICAgIHNuYXBjaGF0OiAnJyxcbiAgICAgICAgICB0ZWxlZ3JhbTogJycsXG4gICAgICAgICAgd2hhdHNhcHA6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIHNlbzoge1xuICAgICAgICAgIG1ldGFUaXRsZTogJ1ByZW1pdW0gQ2hvaWNlIC0gRHViYWkgUmVhbCBFc3RhdGUnLFxuICAgICAgICAgIG1ldGFEZXNjcmlwdGlvbjogJ0Rpc2NvdmVyIHByZW1pdW0gcmVhbCBlc3RhdGUgb3Bwb3J0dW5pdGllcyBpbiBEdWJhaSB3aXRoIFByZW1pdW0gQ2hvaWNlLiBZb3VyIHRydXN0ZWQgcGFydG5lciBmb3IgbHV4dXJ5IHByb3BlcnRpZXMgYW5kIGludmVzdG1lbnQgc29sdXRpb25zLicsXG4gICAgICAgICAga2V5d29yZHM6ICdEdWJhaSByZWFsIGVzdGF0ZSwgbHV4dXJ5IHByb3BlcnRpZXMsIGludmVzdG1lbnQsIFByZW1pdW0gQ2hvaWNlJ1xuICAgICAgICB9LFxuICAgICAgICBmZWF0dXJlczoge1xuICAgICAgICAgIGVuYWJsZUJsb2c6IHRydWUsXG4gICAgICAgICAgZW5hYmxlTmV3c2xldHRlcjogdHJ1ZSxcbiAgICAgICAgICBlbmFibGVXaGF0c0FwcDogdHJ1ZSxcbiAgICAgICAgICBlbmFibGVMaXZlQ2hhdDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgd2hhdHNhcHA6IHtcbiAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSGVsbG8hIElcXCdtIGludGVyZXN0ZWQgaW4geW91ciByZWFsIGVzdGF0ZSBzZXJ2aWNlcy4nLFxuICAgICAgICAgIGJ1c2luZXNzSG91cnM6IG51bGwsXG4gICAgICAgICAgYXV0b1JlcGx5OiBudWxsLFxuICAgICAgICAgIHNob3dPblBhZ2VzOiBbJ2hvbWUnLCAncHJvamVjdHMnLCAnY29udGFjdCddXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzRGF0YTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBUcmFuc2Zvcm0gQVBJIGZvcm1hdCB0byBkYXRhYmFzZSBjb2x1bW5zXG4gICAgICBjb25zdCBkYkRhdGE6IGFueSA9IHt9O1xuICAgICAgXG4gICAgICBpZiAoc2V0dGluZ3NEYXRhLnNpdGUpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5zaXRlLnRpdGxlKSBkYkRhdGEuc2l0ZV90aXRsZSA9IHNldHRpbmdzRGF0YS5zaXRlLnRpdGxlO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNpdGUuZGVzY3JpcHRpb24pIGRiRGF0YS5zaXRlX2Rlc2NyaXB0aW9uID0gc2V0dGluZ3NEYXRhLnNpdGUuZGVzY3JpcHRpb247XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEuc2l0ZS5sb2dvKSBkYkRhdGEuc2l0ZV9sb2dvID0gc2V0dGluZ3NEYXRhLnNpdGUubG9nbztcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5zaXRlLmZhdmljb24pIGRiRGF0YS5zaXRlX2Zhdmljb24gPSBzZXR0aW5nc0RhdGEuc2l0ZS5mYXZpY29uO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2V0dGluZ3NEYXRhLmNvbnRhY3QpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5jb250YWN0LmVtYWlsKSBkYkRhdGEuY29udGFjdF9lbWFpbCA9IHNldHRpbmdzRGF0YS5jb250YWN0LmVtYWlsO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLmNvbnRhY3QucGhvbmUpIGRiRGF0YS5jb250YWN0X3Bob25lID0gc2V0dGluZ3NEYXRhLmNvbnRhY3QucGhvbmU7XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEuY29udGFjdC5hZGRyZXNzKSBkYkRhdGEuY29udGFjdF9hZGRyZXNzID0gc2V0dGluZ3NEYXRhLmNvbnRhY3QuYWRkcmVzcztcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5jb250YWN0LndoYXRzYXBwKSBkYkRhdGEuY29udGFjdF93aGF0c2FwcCA9IHNldHRpbmdzRGF0YS5jb250YWN0LndoYXRzYXBwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2V0dGluZ3NEYXRhLnNvY2lhbCkge1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNvY2lhbC5mYWNlYm9vayAhPT0gdW5kZWZpbmVkKSBkYkRhdGEuc29jaWFsX2ZhY2Vib29rID0gc2V0dGluZ3NEYXRhLnNvY2lhbC5mYWNlYm9vaztcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5zb2NpYWwuaW5zdGFncmFtICE9PSB1bmRlZmluZWQpIGRiRGF0YS5zb2NpYWxfaW5zdGFncmFtID0gc2V0dGluZ3NEYXRhLnNvY2lhbC5pbnN0YWdyYW07XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEuc29jaWFsLnR3aXR0ZXIgIT09IHVuZGVmaW5lZCkgZGJEYXRhLnNvY2lhbF90d2l0dGVyID0gc2V0dGluZ3NEYXRhLnNvY2lhbC50d2l0dGVyO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNvY2lhbC5saW5rZWRpbiAhPT0gdW5kZWZpbmVkKSBkYkRhdGEuc29jaWFsX2xpbmtlZGluID0gc2V0dGluZ3NEYXRhLnNvY2lhbC5saW5rZWRpbjtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5zb2NpYWwueW91dHViZSAhPT0gdW5kZWZpbmVkKSBkYkRhdGEuc29jaWFsX3lvdXR1YmUgPSBzZXR0aW5nc0RhdGEuc29jaWFsLnlvdXR1YmU7XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEuc29jaWFsLnRpa3RvayAhPT0gdW5kZWZpbmVkKSBkYkRhdGEuc29jaWFsX3Rpa3RvayA9IHNldHRpbmdzRGF0YS5zb2NpYWwudGlrdG9rO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNvY2lhbC5zbmFwY2hhdCAhPT0gdW5kZWZpbmVkKSBkYkRhdGEuc29jaWFsX3NuYXBjaGF0ID0gc2V0dGluZ3NEYXRhLnNvY2lhbC5zbmFwY2hhdDtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5zb2NpYWwudGVsZWdyYW0gIT09IHVuZGVmaW5lZCkgZGJEYXRhLnNvY2lhbF90ZWxlZ3JhbSA9IHNldHRpbmdzRGF0YS5zb2NpYWwudGVsZWdyYW07XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEuc29jaWFsLndoYXRzYXBwICE9PSB1bmRlZmluZWQpIGRiRGF0YS5zb2NpYWxfd2hhdHNhcHAgPSBzZXR0aW5nc0RhdGEuc29jaWFsLndoYXRzYXBwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2V0dGluZ3NEYXRhLnNlbykge1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNlby5tZXRhVGl0bGUpIGRiRGF0YS5zZW9fbWV0YV90aXRsZSA9IHNldHRpbmdzRGF0YS5zZW8ubWV0YVRpdGxlO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNlby5tZXRhRGVzY3JpcHRpb24pIGRiRGF0YS5zZW9fbWV0YV9kZXNjcmlwdGlvbiA9IHNldHRpbmdzRGF0YS5zZW8ubWV0YURlc2NyaXB0aW9uO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLnNlby5rZXl3b3JkcykgZGJEYXRhLnNlb19rZXl3b3JkcyA9IHNldHRpbmdzRGF0YS5zZW8ua2V5d29yZHM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChzZXR0aW5nc0RhdGEuZmVhdHVyZXMpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5mZWF0dXJlcy5lbmFibGVCbG9nICE9PSB1bmRlZmluZWQpIGRiRGF0YS5mZWF0dXJlc19lbmFibGVfYmxvZyA9IHNldHRpbmdzRGF0YS5mZWF0dXJlcy5lbmFibGVCbG9nO1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLmZlYXR1cmVzLmVuYWJsZU5ld3NsZXR0ZXIgIT09IHVuZGVmaW5lZCkgZGJEYXRhLmZlYXR1cmVzX2VuYWJsZV9uZXdzbGV0dGVyID0gc2V0dGluZ3NEYXRhLmZlYXR1cmVzLmVuYWJsZU5ld3NsZXR0ZXI7XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEuZmVhdHVyZXMuZW5hYmxlV2hhdHNBcHAgIT09IHVuZGVmaW5lZCkgZGJEYXRhLmZlYXR1cmVzX2VuYWJsZV93aGF0c2FwcCA9IHNldHRpbmdzRGF0YS5mZWF0dXJlcy5lbmFibGVXaGF0c0FwcDtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS5mZWF0dXJlcy5lbmFibGVMaXZlQ2hhdCAhPT0gdW5kZWZpbmVkKSBkYkRhdGEuZmVhdHVyZXNfZW5hYmxlX2xpdmVfY2hhdCA9IHNldHRpbmdzRGF0YS5mZWF0dXJlcy5lbmFibGVMaXZlQ2hhdDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHNldHRpbmdzRGF0YS53aGF0c2FwcCkge1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLndoYXRzYXBwLnBob25lICE9PSB1bmRlZmluZWQpIGRiRGF0YS53aGF0c2FwcF9waG9uZSA9IHNldHRpbmdzRGF0YS53aGF0c2FwcC5waG9uZTtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS53aGF0c2FwcC5lbmFibGVkICE9PSB1bmRlZmluZWQpIGRiRGF0YS53aGF0c2FwcF9lbmFibGVkID0gc2V0dGluZ3NEYXRhLndoYXRzYXBwLmVuYWJsZWQ7XG4gICAgICAgIGlmIChzZXR0aW5nc0RhdGEud2hhdHNhcHAuZGVmYXVsdE1lc3NhZ2UgIT09IHVuZGVmaW5lZCkgZGJEYXRhLndoYXRzYXBwX2RlZmF1bHRfbWVzc2FnZSA9IHNldHRpbmdzRGF0YS53aGF0c2FwcC5kZWZhdWx0TWVzc2FnZTtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS53aGF0c2FwcC5idXNpbmVzc0hvdXJzICE9PSB1bmRlZmluZWQpIGRiRGF0YS53aGF0c2FwcF9idXNpbmVzc19ob3VycyA9IHNldHRpbmdzRGF0YS53aGF0c2FwcC5idXNpbmVzc0hvdXJzID8gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NEYXRhLndoYXRzYXBwLmJ1c2luZXNzSG91cnMpIDogbnVsbDtcbiAgICAgICAgaWYgKHNldHRpbmdzRGF0YS53aGF0c2FwcC5hdXRvUmVwbHkgIT09IHVuZGVmaW5lZCkgZGJEYXRhLndoYXRzYXBwX2F1dG9fcmVwbHkgPSBzZXR0aW5nc0RhdGEud2hhdHNhcHAuYXV0b1JlcGx5O1xuICAgICAgICBpZiAoc2V0dGluZ3NEYXRhLndoYXRzYXBwLnNob3dPblBhZ2VzICE9PSB1bmRlZmluZWQpIGRiRGF0YS53aGF0c2FwcF9zaG93X29uX3BhZ2VzID0gc2V0dGluZ3NEYXRhLndoYXRzYXBwLnNob3dPblBhZ2VzID8gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NEYXRhLndoYXRzYXBwLnNob3dPblBhZ2VzKSA6IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHNldHRpbmdzIGV4aXN0XG4gICAgICBjb25zdCBbZXhpc3RpbmdSb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VMRUNUIGlkIEZST00gc2l0ZV9zZXR0aW5ncyBMSU1JVCAxJyk7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGV4aXN0aW5nUm93cyBhcyBhbnlbXTtcbiAgICAgIFxuICAgICAgaWYgKGV4aXN0aW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHNldHRpbmdzXG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKGRiRGF0YSk7XG4gICAgICAgIGlmIChmaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoZmllbGQgPT4gYCR7ZmllbGR9ID0gP2ApLmpvaW4oJywgJyk7XG4gICAgICAgICAgY29uc3QgdmFsdWVzID0gZmllbGRzLm1hcChmaWVsZCA9PiBkYkRhdGFbZmllbGRdKTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgICBgVVBEQVRFIHNpdGVfc2V0dGluZ3MgU0VUICR7c2V0Q2xhdXNlfSwgdXBkYXRlZF9hdCA9IE5PVygpIFdIRVJFIGlkID0gP2AsXG4gICAgICAgICAgICBbLi4udmFsdWVzLCBleGlzdGluZ1swXS5pZF1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJbnNlcnQgbmV3IHNldHRpbmdzIHdpdGggZGVmYXVsdHNcbiAgICAgICAgY29uc3QgZGVmYXVsdERhdGEgPSB7XG4gICAgICAgICAgc2l0ZV90aXRsZTogJ1ByZW1pdW0gQ2hvaWNlJyxcbiAgICAgICAgICBzaXRlX2Rlc2NyaXB0aW9uOiAnWW91ciB0cnVzdGVkIHBhcnRuZXIgaW4gRHViYWkgcmVhbCBlc3RhdGUnLFxuICAgICAgICAgIHNpdGVfbG9nbzogJy9sb2dvLnBuZycsXG4gICAgICAgICAgc2l0ZV9mYXZpY29uOiAnL2Zhdmljb24uaWNvJyxcbiAgICAgICAgICBjb250YWN0X2VtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgY29udGFjdF9waG9uZTogbnVsbCxcbiAgICAgIGNvbnRhY3RfYWRkcmVzczogJ0R1YmFpLCBVQUUnLFxuICAgICAgY29udGFjdF93aGF0c2FwcDogbnVsbCxcbiAgICAgICAgICBzb2NpYWxfZmFjZWJvb2s6ICcnLFxuICAgICAgICAgIHNvY2lhbF9pbnN0YWdyYW06ICcnLFxuICAgICAgICAgIHNvY2lhbF90d2l0dGVyOiAnJyxcbiAgICAgICAgICBzb2NpYWxfbGlua2VkaW46ICcnLFxuICAgICAgICAgIHNvY2lhbF95b3V0dWJlOiAnJyxcbiAgICAgICAgICBzZW9fbWV0YV90aXRsZTogJ1ByZW1pdW0gQ2hvaWNlIC0gRHViYWkgUmVhbCBFc3RhdGUnLFxuICAgICAgICAgIHNlb19tZXRhX2Rlc2NyaXB0aW9uOiAnRGlzY292ZXIgcHJlbWl1bSByZWFsIGVzdGF0ZSBvcHBvcnR1bml0aWVzIGluIER1YmFpIHdpdGggUHJlbWl1bSBDaG9pY2UuIFlvdXIgdHJ1c3RlZCBwYXJ0bmVyIGZvciBsdXh1cnkgcHJvcGVydGllcyBhbmQgaW52ZXN0bWVudCBzb2x1dGlvbnMuJyxcbiAgICAgICAgICBzZW9fa2V5d29yZHM6ICdEdWJhaSByZWFsIGVzdGF0ZSwgbHV4dXJ5IHByb3BlcnRpZXMsIGludmVzdG1lbnQsIFByZW1pdW0gQ2hvaWNlJyxcbiAgICAgICAgICBmZWF0dXJlc19lbmFibGVfYmxvZzogdHJ1ZSxcbiAgICAgICAgICBmZWF0dXJlc19lbmFibGVfbmV3c2xldHRlcjogdHJ1ZSxcbiAgICAgICAgICBmZWF0dXJlc19lbmFibGVfd2hhdHNhcHA6IHRydWUsXG4gICAgICAgICAgZmVhdHVyZXNfZW5hYmxlX2xpdmVfY2hhdDogZmFsc2UsXG4gICAgICAgICAgLi4uZGJEYXRhXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhkZWZhdWx0RGF0YSk7XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IGZpZWxkcy5tYXAoKCkgPT4gJz8nKS5qb2luKCcsICcpO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IGRlZmF1bHREYXRhW2ZpZWxkXSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgYElOU0VSVCBJTlRPIHNpdGVfc2V0dGluZ3MgKCR7ZmllbGRzLmpvaW4oJywgJyl9LCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0KSBWQUxVRVMgKCR7cGxhY2Vob2xkZXJzfSwgTk9XKCksIE5PVygpKWAsXG4gICAgICAgICAgdmFsdWVzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U2V0dGluZ3MoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc2V0dGluZ3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJlc2VudGF0aW9uIHNsaWRlcyBtYW5hZ2VtZW50XG4gIHN0YXRpYyBhc3luYyBnZXRQcmVzZW50YXRpb25TbGlkZXMocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPFByZXNlbnRhdGlvblNsaWRlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnU0VMRUNUICogRlJPTSBwcmVzZW50YXRpb25fc2xpZGVzIFdIRVJFIHByb2plY3RfaWQgPSA/IE9SREVSIEJZIHNsaWRlX251bWJlciBBU0MnLFxuICAgICAgICBbcHJvamVjdElkXVxuICAgICAgKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHJvd3MgYXMgUHJlc2VudGF0aW9uU2xpZGVbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJlc2VudGF0aW9uIHNsaWRlczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZVByZXNlbnRhdGlvblNsaWRlKHNsaWRlRGF0YTogT21pdDxQcmVzZW50YXRpb25TbGlkZSwgJ2lkJyB8ICdjcmVhdGVkX2F0Jz4pOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgbmV4dCBzbGlkZSBudW1iZXIgZm9yIHRoaXMgcHJvamVjdFxuICAgICAgY29uc3QgW21heFNsaWRlUm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICdTRUxFQ1QgQ09BTEVTQ0UoTUFYKHNsaWRlX251bWJlciksIDApICsgMSBhcyBuZXh0X3NsaWRlX251bWJlciBGUk9NIHByZXNlbnRhdGlvbl9zbGlkZXMgV0hFUkUgcHJvamVjdF9pZCA9ID8nLFxuICAgICAgICBbc2xpZGVEYXRhLnByb2plY3RfaWRdXG4gICAgICApO1xuICAgICAgY29uc3QgbmV4dFNsaWRlTnVtYmVyID0gKG1heFNsaWRlUm93cyBhcyBhbnkpWzBdLm5leHRfc2xpZGVfbnVtYmVyO1xuXG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgYElOU0VSVCBJTlRPIHByZXNlbnRhdGlvbl9zbGlkZXMgXG4gICAgICAgICAocHJvamVjdF9pZCwgc2xpZGVfbnVtYmVyLCB0aXRsZSwgY29udGVudCwgZGVzY3JpcHRpb24sIGltYWdlX3VybCwgYmFja2dyb3VuZF9pbWFnZSwgYW5pbWF0aW9uX3R5cGUsIGR1cmF0aW9uLCB2b2ljZV9vdmVyX3VybClcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgICBbXG4gICAgICAgICAgc2xpZGVEYXRhLnByb2plY3RfaWQsXG4gICAgICAgICAgc2xpZGVEYXRhLnNsaWRlX251bWJlciB8fCBuZXh0U2xpZGVOdW1iZXIsXG4gICAgICAgICAgc2xpZGVEYXRhLnRpdGxlLFxuICAgICAgICAgIHNsaWRlRGF0YS5jb250ZW50LFxuICAgICAgICAgIHNsaWRlRGF0YS5kZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgICAgIHNsaWRlRGF0YS5pbWFnZV91cmwgfHwgbnVsbCxcbiAgICAgICAgICBzbGlkZURhdGEuYmFja2dyb3VuZF9pbWFnZSB8fCBudWxsLFxuICAgICAgICAgIHNsaWRlRGF0YS5hbmltYXRpb25fdHlwZSB8fCAnZmFkZUluJyxcbiAgICAgICAgICBzbGlkZURhdGEuZHVyYXRpb24gfHwgNTAwMCxcbiAgICAgICAgICBzbGlkZURhdGEudm9pY2Vfb3Zlcl91cmwgfHwgbnVsbFxuICAgICAgICBdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiAocmVzdWx0IGFzIGFueSkuaW5zZXJ0SWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHByZXNlbnRhdGlvbiBzbGlkZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlUHJlc2VudGF0aW9uU2xpZGUoc2xpZGVJZDogbnVtYmVyLCBzbGlkZURhdGE6IFBhcnRpYWw8UHJlc2VudGF0aW9uU2xpZGU+KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmtleXMoc2xpZGVEYXRhKS5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ2lkJyAmJiBrZXkgIT09ICdjcmVhdGVkX2F0Jyk7XG4gICAgICBjb25zdCBzZXRDbGF1c2UgPSBmaWVsZHMubWFwKGZpZWxkID0+IGAke2ZpZWxkfSA9ID9gKS5qb2luKCcsICcpO1xuICAgICAgY29uc3QgdmFsdWVzID0gZmllbGRzLm1hcChmaWVsZCA9PiBzbGlkZURhdGFbZmllbGQgYXMga2V5b2YgUHJlc2VudGF0aW9uU2xpZGVdKTtcblxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgVVBEQVRFIHByZXNlbnRhdGlvbl9zbGlkZXMgU0VUICR7c2V0Q2xhdXNlfSBXSEVSRSBpZCA9ID9gLFxuICAgICAgICBbLi4udmFsdWVzLCBzbGlkZUlkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcHJlc2VudGF0aW9uIHNsaWRlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlUHJlc2VudGF0aW9uU2xpZGUoc2xpZGVJZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnREVMRVRFIEZST00gcHJlc2VudGF0aW9uX3NsaWRlcyBXSEVSRSBpZCA9ID8nLCBbc2xpZGVJZF0pO1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcHJlc2VudGF0aW9uIHNsaWRlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGVsZXRlUHJlc2VudGF0aW9uU2xpZGVzQnlQcm9qZWN0KHByb2plY3RJZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnREVMRVRFIEZST00gcHJlc2VudGF0aW9uX3NsaWRlcyBXSEVSRSBwcm9qZWN0X2lkID0gPycsIFtwcm9qZWN0SWRdKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHByZXNlbnRhdGlvbiBzbGlkZXMgZm9yIHByb2plY3Q6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlcm8gSW1hZ2VzIE1hbmFnZW1lbnRcbiAgc3RhdGljIGFzeW5jIGdldEhlcm9JbWFnZXMoKTogUHJvbWlzZTxIZXJvSW1hZ2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICdTRUxFQ1QgKiBGUk9NIGhlcm9faW1hZ2VzIE9SREVSIEJZIG9yZGVyX2luZGV4IEFTQywgY3JlYXRlZF9hdCBERVNDJ1xuICAgICAgKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIHJvd3MgYXMgSGVyb0ltYWdlW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGhlcm8gaW1hZ2VzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlSGVyb0ltYWdlKGltYWdlRGF0YTogT21pdDxIZXJvSW1hZ2UsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTxIZXJvSW1hZ2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBHZXQgdGhlIG5leHQgb3JkZXIgaW5kZXhcbiAgICAgIGNvbnN0IFttYXhPcmRlclJvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnU0VMRUNUIENPQUxFU0NFKE1BWChvcmRlcl9pbmRleCksIDApICsgMSBhcyBuZXh0X29yZGVyIEZST00gaGVyb19pbWFnZXMnXG4gICAgICApO1xuICAgICAgY29uc3QgbmV4dE9yZGVyID0gKG1heE9yZGVyUm93cyBhcyBhbnkpWzBdLm5leHRfb3JkZXI7XG5cbiAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgSU5TRVJUIElOVE8gaGVyb19pbWFnZXMgXG4gICAgICAgICAodXJsLCB0aXRsZSwgZGVzY3JpcHRpb24sIGFsdF90ZXh0LCBpc19hY3RpdmUsIG9yZGVyX2luZGV4LCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0KVxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCBOT1coKSwgTk9XKCkpYCxcbiAgICAgICAgW1xuICAgICAgICAgIGltYWdlRGF0YS51cmwsXG4gICAgICAgICAgaW1hZ2VEYXRhLnRpdGxlLFxuICAgICAgICAgIGltYWdlRGF0YS5kZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgICAgIGltYWdlRGF0YS5hbHRfdGV4dCB8fCBpbWFnZURhdGEudGl0bGUsXG4gICAgICAgICAgaW1hZ2VEYXRhLmlzX2FjdGl2ZSAhPT0gdW5kZWZpbmVkID8gaW1hZ2VEYXRhLmlzX2FjdGl2ZSA6IHRydWUsXG4gICAgICAgICAgaW1hZ2VEYXRhLm9yZGVyX2luZGV4IHx8IG5leHRPcmRlclxuICAgICAgICBdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggYW5kIHJldHVybiB0aGUgY3JlYXRlZCBpbWFnZVxuICAgICAgY29uc3QgW25ld0ltYWdlUm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICdTRUxFQ1QgKiBGUk9NIGhlcm9faW1hZ2VzIFdIRVJFIGlkID0gPycsXG4gICAgICAgIFtpbnNlcnRJZF1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmV0dXJuIChuZXdJbWFnZVJvd3MgYXMgSGVyb0ltYWdlW10pWzBdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBoZXJvIGltYWdlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVIZXJvSW1hZ2UoaW1hZ2VJZDogbnVtYmVyLCBpbWFnZURhdGE6IFBhcnRpYWw8SGVyb0ltYWdlPik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKGltYWdlRGF0YSkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAga2V5ICE9PSAnaWQnICYmIGtleSAhPT0gJ2NyZWF0ZWRfYXQnICYmIGtleSAhPT0gJ3VwZGF0ZWRfYXQnXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNldENsYXVzZSA9IGZpZWxkcy5tYXAoZmllbGQgPT4gYCR7ZmllbGR9ID0gP2ApLmpvaW4oJywgJyk7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBmaWVsZHMubWFwKGZpZWxkID0+IGltYWdlRGF0YVtmaWVsZCBhcyBrZXlvZiBIZXJvSW1hZ2VdKTtcblxuICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgIGBVUERBVEUgaGVyb19pbWFnZXMgU0VUICR7c2V0Q2xhdXNlfSwgdXBkYXRlZF9hdCA9IE5PVygpIFdIRVJFIGlkID0gP2AsXG4gICAgICAgIFsuLi52YWx1ZXMsIGltYWdlSWRdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiAocmVzdWx0IGFzIGFueSkuYWZmZWN0ZWRSb3dzID4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgaGVybyBpbWFnZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUhlcm9JbWFnZShpbWFnZUlkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ0RFTEVURSBGUk9NIGhlcm9faW1hZ2VzIFdIRVJFIGlkID0gPycsIFtpbWFnZUlkXSk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiAocmVzdWx0IGFzIGFueSkuYWZmZWN0ZWRSb3dzID4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgaGVybyBpbWFnZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gQUkgQVBJIFNldHRpbmdzIE1hbmFnZW1lbnRcbiAgc3RhdGljIGFzeW5jIGdldEFJU2V0dGluZ3MoKTogUHJvbWlzZTxBSUFwaVNldHRpbmdzIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoJ1NFTEVDVCAqIEZST00gYWlfYXBpX3NldHRpbmdzIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCAxJyk7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2V0dGluZ3MgPSByb3dzIGFzIEFJQXBpU2V0dGluZ3NbXTtcbiAgICAgIHJldHVybiBzZXR0aW5ncy5sZW5ndGggPiAwID8gc2V0dGluZ3NbMF0gOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBBSSBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2F2ZUFJU2V0dGluZ3Moc2V0dGluZ3NEYXRhOiBPbWl0PEFJQXBpU2V0dGluZ3MsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTxBSUFwaVNldHRpbmdzPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgc2V0dGluZ3MgZXhpc3RcbiAgICAgIGNvbnN0IFtleGlzdGluZ1Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRUxFQ1QgaWQgRlJPTSBhaV9hcGlfc2V0dGluZ3MgTElNSVQgMScpO1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBleGlzdGluZ1Jvd3MgYXMgYW55W107XG4gICAgICBcbiAgICAgIGlmIChleGlzdGluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBzZXR0aW5nc1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoXG4gICAgICAgICAgYFVQREFURSBhaV9hcGlfc2V0dGluZ3MgU0VUIFxuICAgICAgICAgICBvcGVuYWlfYXBpX2tleSA9ID8sIG9wZW5haV9tb2RlbCA9ID8sIG9wZW5haV9tYXhfdG9rZW5zID0gPywgb3BlbmFpX3RlbXBlcmF0dXJlID0gPyxcbiAgICAgICAgICAgZ2VtaW5pX2FwaV9rZXkgPSA/LCBnZW1pbmlfbW9kZWwgPSA/LCBjbGF1ZGVfYXBpX2tleSA9ID8sIGNsYXVkZV9tb2RlbCA9ID8sXG4gICAgICAgICAgIGRlZXBzZWVrX2FwaV9rZXkgPSA/LCBkZWVwc2Vla19tb2RlbCA9ID8sIGRlZXBzZWVrX21heF90b2tlbnMgPSA/LCBkZWVwc2Vla190ZW1wZXJhdHVyZSA9ID8sXG4gICAgICAgICAgIGRlZmF1bHRfcHJvdmlkZXIgPSA/LCBhaV9lbmFibGVkID0gPywgcmF0ZV9saW1pdF9wZXJfbWludXRlID0gPywgcmF0ZV9saW1pdF9wZXJfaG91ciA9ID8sXG4gICAgICAgICAgIHN5c3RlbV9wcm9tcHQgPSA/LCBwcm9wZXJ0eV9zdWdnZXN0aW9uc19lbmFibGVkID0gPywgcHJvcGVydHlfc3VnZ2VzdGlvbnNfY291bnQgPSA/LCBjb250YWN0X2luZm9faW5fcmVzcG9uc2VzID0gPyxcbiAgICAgICAgICAgdXBkYXRlZF9hdCA9IE5PVygpXG4gICAgICAgICAgIFdIRVJFIGlkID0gP2AsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLm9wZW5haV9hcGlfa2V5IHx8ICcnLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLm9wZW5haV9tb2RlbCB8fCAnZ3B0LTMuNS10dXJibycsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEub3BlbmFpX21heF90b2tlbnMgfHwgMTAwMCxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5vcGVuYWlfdGVtcGVyYXR1cmUgfHwgMC43LFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmdlbWluaV9hcGlfa2V5IHx8ICcnLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmdlbWluaV9tb2RlbCB8fCAnZ2VtaW5pLXBybycsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuY2xhdWRlX2FwaV9rZXkgfHwgJycsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuY2xhdWRlX21vZGVsIHx8ICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmRlZXBzZWVrX2FwaV9rZXkgfHwgJycsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuZGVlcHNlZWtfbW9kZWwgfHwgJ2RlZXBzZWVrLWNoYXQnLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmRlZXBzZWVrX21heF90b2tlbnMgfHwgMTAwMCxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5kZWVwc2Vla190ZW1wZXJhdHVyZSB8fCAwLjcsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuZGVmYXVsdF9wcm92aWRlciB8fCAnb3BlbmFpJyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5haV9lbmFibGVkICE9PSB1bmRlZmluZWQgPyBzZXR0aW5nc0RhdGEuYWlfZW5hYmxlZCA6IHRydWUsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEucmF0ZV9saW1pdF9wZXJfbWludXRlIHx8IDEwLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLnJhdGVfbGltaXRfcGVyX2hvdXIgfHwgMTAwLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLnN5c3RlbV9wcm9tcHQgfHwgJ1lvdSBhcmUgYW4gZXhwZXJ0IHJlYWwgZXN0YXRlIGNvbnN1bHRhbnQgd2l0aCBkZWVwIGtub3dsZWRnZSBvZiB0aGUgRHViYWkgYW5kIFVBRSBwcm9wZXJ0eSBtYXJrZXQuJyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5wcm9wZXJ0eV9zdWdnZXN0aW9uc19lbmFibGVkICE9PSB1bmRlZmluZWQgPyBzZXR0aW5nc0RhdGEucHJvcGVydHlfc3VnZ2VzdGlvbnNfZW5hYmxlZCA6IHRydWUsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEucHJvcGVydHlfc3VnZ2VzdGlvbnNfY291bnQgfHwgNCxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5jb250YWN0X2luZm9faW5fcmVzcG9uc2VzICE9PSB1bmRlZmluZWQgPyBzZXR0aW5nc0RhdGEuY29udGFjdF9pbmZvX2luX3Jlc3BvbnNlcyA6IHRydWUsXG4gICAgICAgICAgICBleGlzdGluZ1swXS5pZFxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEluc2VydCBuZXcgc2V0dGluZ3NcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAgIGBJTlNFUlQgSU5UTyBhaV9hcGlfc2V0dGluZ3MgXG4gICAgICAgICAgIChvcGVuYWlfYXBpX2tleSwgb3BlbmFpX21vZGVsLCBvcGVuYWlfbWF4X3Rva2Vucywgb3BlbmFpX3RlbXBlcmF0dXJlLFxuICAgICAgICAgICAgZ2VtaW5pX2FwaV9rZXksIGdlbWluaV9tb2RlbCwgY2xhdWRlX2FwaV9rZXksIGNsYXVkZV9tb2RlbCxcbiAgICAgICAgICAgIGRlZXBzZWVrX2FwaV9rZXksIGRlZXBzZWVrX21vZGVsLCBkZWVwc2Vla19tYXhfdG9rZW5zLCBkZWVwc2Vla190ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIGRlZmF1bHRfcHJvdmlkZXIsIGFpX2VuYWJsZWQsIHJhdGVfbGltaXRfcGVyX21pbnV0ZSwgcmF0ZV9saW1pdF9wZXJfaG91cixcbiAgICAgICAgICAgIHN5c3RlbV9wcm9tcHQsIHByb3BlcnR5X3N1Z2dlc3Rpb25zX2VuYWJsZWQsIHByb3BlcnR5X3N1Z2dlc3Rpb25zX2NvdW50LCBjb250YWN0X2luZm9faW5fcmVzcG9uc2VzLFxuICAgICAgICAgICAgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCBOT1coKSwgTk9XKCkpYCxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEub3BlbmFpX2FwaV9rZXkgfHwgJycsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEub3BlbmFpX21vZGVsIHx8ICdncHQtMy41LXR1cmJvJyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5vcGVuYWlfbWF4X3Rva2VucyB8fCAxMDAwLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLm9wZW5haV90ZW1wZXJhdHVyZSB8fCAwLjcsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuZ2VtaW5pX2FwaV9rZXkgfHwgJycsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuZ2VtaW5pX21vZGVsIHx8ICdnZW1pbmktcHJvJyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5jbGF1ZGVfYXBpX2tleSB8fCAnJyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5jbGF1ZGVfbW9kZWwgfHwgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOScsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuZGVlcHNlZWtfYXBpX2tleSB8fCAnJyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5kZWVwc2Vla19tb2RlbCB8fCAnZGVlcHNlZWstY2hhdCcsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuZGVlcHNlZWtfbWF4X3Rva2VucyB8fCAxMDAwLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmRlZXBzZWVrX3RlbXBlcmF0dXJlIHx8IDAuNyxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5kZWZhdWx0X3Byb3ZpZGVyIHx8ICdvcGVuYWknLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmFpX2VuYWJsZWQgIT09IHVuZGVmaW5lZCA/IHNldHRpbmdzRGF0YS5haV9lbmFibGVkIDogdHJ1ZSxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5yYXRlX2xpbWl0X3Blcl9taW51dGUgfHwgMTAsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEucmF0ZV9saW1pdF9wZXJfaG91ciB8fCAxMDAsXG4gICAgICAgICAgICBzZXR0aW5nc0RhdGEuc3lzdGVtX3Byb21wdCB8fCAnWW91IGFyZSBhbiBleHBlcnQgcmVhbCBlc3RhdGUgY29uc3VsdGFudCB3aXRoIGRlZXAga25vd2xlZGdlIG9mIHRoZSBEdWJhaSBhbmQgVUFFIHByb3BlcnR5IG1hcmtldC4nLFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLnByb3BlcnR5X3N1Z2dlc3Rpb25zX2VuYWJsZWQgIT09IHVuZGVmaW5lZCA/IHNldHRpbmdzRGF0YS5wcm9wZXJ0eV9zdWdnZXN0aW9uc19lbmFibGVkIDogdHJ1ZSxcbiAgICAgICAgICAgIHNldHRpbmdzRGF0YS5wcm9wZXJ0eV9zdWdnZXN0aW9uc19jb3VudCB8fCA0LFxuICAgICAgICAgICAgc2V0dGluZ3NEYXRhLmNvbnRhY3RfaW5mb19pbl9yZXNwb25zZXMgIT09IHVuZGVmaW5lZCA/IHNldHRpbmdzRGF0YS5jb250YWN0X2luZm9faW5fcmVzcG9uc2VzIDogdHJ1ZVxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRBSVNldHRpbmdzKCkgYXMgQUlBcGlTZXR0aW5ncztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIEFJIHNldHRpbmdzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFjdGl2aXR5IExvZ2dpbmcgTWV0aG9kc1xuICBhc3luYyBnZXRSZWNlbnRBY3Rpdml0aWVzKGxpbWl0OiBudW1iZXIgPSAxMCwgZnJvbnRlbmRPbmx5OiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPFN5c3RlbUFjdGl2aXR5W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICBsZXQgcXVlcnkgPSBgU0VMRUNUIGlkLCB0aW1lc3RhbXAsIGxldmVsLCBjYXRlZ29yeSwgbWVzc2FnZSwgZGV0YWlscyBcbiAgICAgICAgICAgICAgICAgICBGUk9NIHN5c3RlbV9sb2dzYDtcbiAgICAgIGxldCBwYXJhbXM6IGFueVtdID0gW107XG4gICAgICBcbiAgICAgIGlmIChmcm9udGVuZE9ubHkpIHtcbiAgICAgICAgLy8gRmlsdGVyIGZvciBmcm9udGVuZC1yZWxldmFudCBhY3Rpdml0aWVzIG9ubHlcbiAgICAgICAgcXVlcnkgKz0gYCBXSEVSRSBjYXRlZ29yeSBJTiAoJ3Byb2plY3QnLCAnZGV2ZWxvcGVyJywgJ2FydGljbGUnLCAnbWVkaWEnKWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHF1ZXJ5ICs9IGAgT1JERVIgQlkgdGltZXN0YW1wIERFU0MgTElNSVQgP2A7XG4gICAgICBwYXJhbXMucHVzaChsaW1pdCk7XG4gICAgICBcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShxdWVyeSwgcGFyYW1zKTtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgXG4gICAgICByZXR1cm4gKHJvd3MgYXMgYW55W10pLm1hcChyb3cgPT4gKHtcbiAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgdGltZXN0YW1wOiByb3cudGltZXN0YW1wLFxuICAgICAgICBsZXZlbDogcm93LmxldmVsLFxuICAgICAgICBjYXRlZ29yeTogcm93LmNhdGVnb3J5LFxuICAgICAgICBtZXNzYWdlOiByb3cubWVzc2FnZSxcbiAgICAgICAgZGV0YWlsczogcm93LmRldGFpbHMgPyBKU09OLnBhcnNlKHJvdy5kZXRhaWxzKSA6IG51bGxcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcmVjZW50IGFjdGl2aXRpZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQWN0aXZpdHkoYWN0aXZpdHlEYXRhOiB7XG4gICAgbGV2ZWw6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnc3VjY2Vzcyc7XG4gICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgZGV0YWlscz86IHN0cmluZyB8IG51bGw7XG4gIH0pOiBQcm9taXNlPFN5c3RlbUFjdGl2aXR5PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICBgSU5TRVJUIElOVE8gc3lzdGVtX2xvZ3MgKGxldmVsLCBjYXRlZ29yeSwgbWVzc2FnZSwgZGV0YWlscywgdGltZXN0YW1wKSBcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgTk9XKCkpYCxcbiAgICAgICAgW2FjdGl2aXR5RGF0YS5sZXZlbCwgYWN0aXZpdHlEYXRhLmNhdGVnb3J5LCBhY3Rpdml0eURhdGEubWVzc2FnZSwgYWN0aXZpdHlEYXRhLmRldGFpbHNdXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBpbnNlcnRJZCA9IChyZXN1bHQgYXMgYW55KS5pbnNlcnRJZDtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggdGhlIGNyZWF0ZWQgYWN0aXZpdHlcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICAgICAgYFNFTEVDVCBpZCwgdGltZXN0YW1wLCBsZXZlbCwgY2F0ZWdvcnksIG1lc3NhZ2UsIGRldGFpbHMgXG4gICAgICAgICBGUk9NIHN5c3RlbV9sb2dzIFxuICAgICAgICAgV0hFUkUgaWQgPSA/YCxcbiAgICAgICAgW2luc2VydElkXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJvdyA9IChyb3dzIGFzIGFueVtdKVswXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgIHRpbWVzdGFtcDogcm93LnRpbWVzdGFtcCxcbiAgICAgICAgbGV2ZWw6IHJvdy5sZXZlbCxcbiAgICAgICAgY2F0ZWdvcnk6IHJvdy5jYXRlZ29yeSxcbiAgICAgICAgbWVzc2FnZTogcm93Lm1lc3NhZ2UsXG4gICAgICAgIGRldGFpbHM6IHJvdy5kZXRhaWxzID8gSlNPTi5wYXJzZShyb3cuZGV0YWlscykgOiBudWxsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBhY3Rpdml0eTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuLy8gU3RhbmRhbG9uZSBxdWVyeSBmdW5jdGlvbiBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGNvbnN0IHF1ZXJ5ID0gTXlTUUxEYXRhYmFzZS5xdWVyeS5iaW5kKE15U1FMRGF0YWJhc2UpO1xuXG4vLyBFeHBvcnQgZ2V0RGF0YWJhc2UgZnVuY3Rpb24gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYXRhYmFzZSgpIHtcbiAgcmV0dXJuIHBvb2w7XG59XG5cbi8vIEV4cG9ydCBnZXRDb25uZWN0aW9uIGZ1bmN0aW9uIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHtcbiAgcmV0dXJuIGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xufVxuXG4vLyBFeHBvcnQgRGF0YWJhc2UgY2xhc3MgYWxpYXMgZm9yIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBEYXRhYmFzZSA9IE15U1FMRGF0YWJhc2U7XG5cbmV4cG9ydCBkZWZhdWx0IE15U1FMRGF0YWJhc2U7Il0sIm5hbWVzIjpbIm15c3FsIiwiZGJDb25maWciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUiIsInBhc3N3b3JkIiwiREJfUEFTU1dPUkQiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJwb3J0IiwiREJfUE9SVCIsIk51bWJlciIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiLCJhY3F1aXJlVGltZW91dCIsInRpbWVvdXQiLCJlbmFibGVLZWVwQWxpdmUiLCJrZWVwQWxpdmVJbml0aWFsRGVsYXkiLCJpZGxlVGltZW91dCIsIm1heElkbGUiLCJtdWx0aXBsZVN0YXRlbWVudHMiLCJwb29sIiwiY3JlYXRlUG9vbCIsIk15U1FMRGF0YWJhc2UiLCJ0ZXN0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJnZXRDb25uZWN0aW9uIiwicGluZyIsInJlbGVhc2UiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJjbGVhbnVwIiwiZW5kIiwiZXhlY3V0ZVF1ZXJ5IiwicXVlcnkiLCJwYXJhbXMiLCJyZXN1bHQiLCJleGVjdXRlIiwic3FsIiwiaW5pdGlhbGl6ZSIsImlzQ29ubmVjdGVkIiwiRXJyb3IiLCJpbml0aWFsaXplVGFibGVzIiwiYWRkTWlzc2luZ1NvY2lhbENvbHVtbnMiLCJhbHRlclRhYmxlU1FMIiwiY3JlYXRlVGFibGVzU1FMIiwiY3JlYXRlRGVmYXVsdEFkbWluIiwiZXhpc3RpbmdVc2VycyIsImxlbmd0aCIsInVwZGF0ZUFydGljbGVzVGFibGUiLCJjb2x1bW5zVG9BZGQiLCJuYW1lIiwiZGVmaW5pdGlvbiIsImNvbHVtbiIsInJvd3MiLCJnZXRQcm9qZWN0cyIsInBhcnNlSnNvbkZpZWxkIiwiZmllbGQiLCJKU09OIiwicGFyc2UiLCJzcGxpdCIsIm1hcCIsIml0ZW0iLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsInByb2plY3RzIiwicHJvamVjdCIsImdhbGxlcnkiLCJmZWF0dXJlcyIsImFtZW5pdGllcyIsInByb3BlcnR5X3R5cGVzIiwic3ViX3Byb2plY3RzIiwibWVkaWFfZmlsZXMiLCJ1bml0cyIsInByb3BlcnR5X3R5cGUiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJyZWxlYXNlRXJyb3IiLCJnZXRQcm9qZWN0c0J5RGV2ZWxvcGVyIiwiZGV2ZWxvcGVyTmFtZSIsImdldFByb2plY3RCeVNsdWciLCJzbHVnIiwicHJvamVjdFJvd3MiLCJzbGlkZVJvd3MiLCJpZCIsInBhcnNlQ29sb3JQYWxldHRlIiwiY29sb3JQYWxldHRlIiwicHJlc2VudGF0aW9uX3NsaWRlcyIsImNyZWF0ZVByb2plY3QiLCJkZXNjcmlwdGlvbiIsInRvTnVsbElmVW5kZWZpbmVkIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJmaW5hbFNsdWciLCJleGlzdGluZ1Jvd3MiLCJEYXRlIiwibm93IiwiZGV2ZWxvcGVyIiwiZGV2ZWxvcGVyX2lkIiwibG9jYXRpb24iLCJwcmljZSIsInN0YXR1cyIsImJlZHJvb21zIiwiYmF0aHJvb21zIiwiYXJlYSIsImltYWdlIiwic3RyaW5naWZ5IiwiY29vcmRpbmF0ZXNfbGF0IiwiY29vcmRpbmF0ZXNfbG5nIiwicHJlc2VudGF0aW9uX2ZpbGUiLCJwcmVzZW50YXRpb25fdXJsIiwicHJlc2VudGF0aW9uX2FuaW1hdGlvbnMiLCJwcmVzZW50YXRpb25fZWZmZWN0cyIsImZlYXR1cmVkX3ZpZGVvIiwic3R1ZGlvcyIsImluc2VydElkIiwiZGV2Um93cyIsInVwZGF0ZURldmVsb3BlclByb2plY3RDb3VudCIsImNyZWF0ZUFjdGl2aXR5IiwibGV2ZWwiLCJjYXRlZ29yeSIsImRldGFpbHMiLCJwcm9qZWN0SWQiLCJsb2dFcnJvciIsImdldFByb2plY3RCeUlkIiwiY29kZSIsInVwZGF0ZVByb2plY3QiLCJ1cGRhdGVEYXRhIiwiY3VycmVudFJvd3MiLCJjdXJyZW50UHJvamVjdCIsIm9sZERldmVsb3BlciIsImZpZWxkcyIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJzZXRDbGF1c2UiLCJqb2luIiwidmFsdWVzIiwibmV3RGV2ZWxvcGVyIiwidXBkYXRlZFByb2plY3QiLCJ1cGRhdGVkRmllbGRzIiwiZGVsZXRlUHJvamVjdCIsImNoZWNrUm93cyIsInByb2plY3REYXRhIiwicHJvamVjdE5hbWUiLCJhZmZlY3RlZFJvd3MiLCJnZXREZXZlbG9wZXJzIiwiY3JlYXRlRGV2ZWxvcGVyIiwibG9nbyIsImVzdGFibGlzaGVkIiwicHJvamVjdHNfY291bnQiLCJ3ZWJzaXRlIiwicGhvbmUiLCJlbWFpbCIsImRldmVsb3BlcklkIiwiZ2V0RGV2ZWxvcGVyQnlJZCIsImRldmVsb3BlcnMiLCJ1cGRhdGVEZXZlbG9wZXIiLCJjdXJyZW50RGV2ZWxvcGVyIiwiZGVsZXRlRGV2ZWxvcGVyIiwiY291bnRSb3dzIiwicHJvamVjdENvdW50IiwicHJvamVjdF9jb3VudCIsImdldFByb2plY3RzQnlEZXZlbG9wZXJJZCIsImdldERldmVsb3BlcldpdGhQcm9qZWN0cyIsImRldmVsb3BlclJvd3MiLCJhc3NpZ25Qcm9qZWN0VG9EZXZlbG9wZXIiLCJ1bmFzc2lnblByb2plY3RGcm9tRGV2ZWxvcGVyIiwiY3VycmVudERldmVsb3BlcklkIiwiZGVsZXRlRGV2ZWxvcGVyV2l0aENhc2NhZGUiLCJiZWdpblRyYW5zYWN0aW9uIiwiZGVsZXRlZFByb2plY3RzIiwiY29tbWl0Iiwic3VjY2VzcyIsInJvbGxiYWNrIiwiY3JlYXRlUHJvamVjdFdpdGhEZXZlbG9wZXIiLCJwcm9qZWN0VG9DcmVhdGUiLCJwcm9qZWN0X25hbWUiLCJzdWJfcHJvamVjdCIsImRpc3BsYXlfdGl0bGUiLCJzdGFydGluZ19wcmljZSIsInByb2plY3RfdHlwZSIsInR5cGUiLCJjb2xvcl9wYWxldHRlIiwidW5pdHNfMWJlZHJvb20iLCJ1bml0c18yYmVkcm9vbSIsInVuaXRzXzNiZWRyb29tIiwidW5pdHNfNGJlZHJvb20iLCJ1bml0c181YmVkcm9vbSIsInVuaXRzX29mZmljZSIsImxpdmluZ19yb29tcyIsImlzX2ZlYXR1cmVkIiwiYnJvY2h1cmVfdXJsIiwidGhlbWVfY29sb3IiLCJ2b2ljZV9vdmVyX3VybCIsIm1lZGlhX3R5cGUiLCJnZXRBcnRpY2xlcyIsImFydGljbGVzIiwiYXJ0aWNsZSIsInRhZ3MiLCJyZWFkX3RpbWUiLCJtZXRhX2Rlc2NyaXB0aW9uIiwiZmVhdHVyZWQiLCJ2aWV3c19jb3VudCIsImNyZWF0ZUFydGljbGUiLCJ0aXRsZSIsImNvbnRlbnQiLCJleGNlcnB0IiwiZmVhdHVyZWRfaW1hZ2UiLCJhdXRob3IiLCJwdWJsaXNoZWRfYXQiLCJnZXRBcnRpY2xlQnlJZCIsImluc2VydEVycm9yIiwidXBkYXRlQXJ0aWNsZSIsInByb2Nlc3NlZERhdGEiLCJkZWxldGVBcnRpY2xlIiwiZ2V0QXJ0aWNsZUJ5U2x1ZyIsImdldFB1Ymxpc2hlZEFydGljbGVzIiwib3B0aW9ucyIsImxpbWl0IiwicHVzaCIsImdldE1lZGlhRmlsZXMiLCJjcmVhdGVNZWRpYUZpbGUiLCJtZWRpYURhdGEiLCJmaWxlbmFtZSIsIm9yaWdpbmFsX25hbWUiLCJmaWxlX3BhdGgiLCJmaWxlX3NpemUiLCJtaW1lX3R5cGUiLCJhbHRfdGV4dCIsInVwbG9hZGVkX2J5IiwiZ2V0TWVkaWFGaWxlQnlJZCIsIm1lZGlhRmlsZXMiLCJ1cGRhdGVNZWRpYUZpbGUiLCJkZWxldGVNZWRpYUZpbGUiLCJnZXRIZXJvU2VjdGlvbnMiLCJjcmVhdGVIZXJvU2VjdGlvbiIsImhlcm9EYXRhIiwicGFnZSIsInN1YnRpdGxlIiwiYmFja2dyb3VuZF9pbWFnZSIsImN0YV90ZXh0IiwiY3RhX2xpbmsiLCJpc19hY3RpdmUiLCJnZXRIZXJvU2VjdGlvbkJ5SWQiLCJoZXJvU2VjdGlvbnMiLCJ1cGRhdGVIZXJvU2VjdGlvbiIsImRlbGV0ZUhlcm9TZWN0aW9uIiwiZ2V0VXNlckJ5RW1haWwiLCJ1c2VycyIsInVwZGF0ZVVzZXJMYXN0TG9naW4iLCJ1c2VySWQiLCJjcmVhdGVMb2ciLCJsb2dEYXRhIiwidXNlcl9pZCIsImlwX2FkZHJlc3MiLCJ1c2VyX2FnZW50IiwiZ2V0U3lzdGVtU3RhdHMiLCJkZXZlbG9wZXJDb3VudCIsInVzZXJDb3VudCIsImxvZ0NvdW50IiwidG90YWxQcm9qZWN0cyIsImNvdW50IiwidG90YWxEZXZlbG9wZXJzIiwidG90YWxVc2VycyIsInRvdGFsTG9ncyIsImxhc3RCYWNrdXAiLCJnZXRTZXR0aW5ncyIsInNldHRpbmdzIiwiZGJTZXR0aW5ncyIsInNpdGUiLCJzaXRlX3RpdGxlIiwic2l0ZV9kZXNjcmlwdGlvbiIsInNpdGVfbG9nbyIsImZhdmljb24iLCJzaXRlX2Zhdmljb24iLCJjb250YWN0IiwiY29udGFjdF9lbWFpbCIsImNvbnRhY3RfcGhvbmUiLCJhZGRyZXNzIiwiY29udGFjdF9hZGRyZXNzIiwid2hhdHNhcHAiLCJjb250YWN0X3doYXRzYXBwIiwid2hhdHNhcHBfcGhvbmUiLCJzb2NpYWwiLCJmYWNlYm9vayIsInNvY2lhbF9mYWNlYm9vayIsImluc3RhZ3JhbSIsInNvY2lhbF9pbnN0YWdyYW0iLCJ0d2l0dGVyIiwic29jaWFsX3R3aXR0ZXIiLCJsaW5rZWRpbiIsInNvY2lhbF9saW5rZWRpbiIsInlvdXR1YmUiLCJzb2NpYWxfeW91dHViZSIsInRpa3RvayIsInNvY2lhbF90aWt0b2siLCJzbmFwY2hhdCIsInNvY2lhbF9zbmFwY2hhdCIsInRlbGVncmFtIiwic29jaWFsX3RlbGVncmFtIiwic29jaWFsX3doYXRzYXBwIiwic2VvIiwibWV0YVRpdGxlIiwic2VvX21ldGFfdGl0bGUiLCJtZXRhRGVzY3JpcHRpb24iLCJzZW9fbWV0YV9kZXNjcmlwdGlvbiIsImtleXdvcmRzIiwic2VvX2tleXdvcmRzIiwiZW5hYmxlQmxvZyIsImZlYXR1cmVzX2VuYWJsZV9ibG9nIiwiZW5hYmxlTmV3c2xldHRlciIsImZlYXR1cmVzX2VuYWJsZV9uZXdzbGV0dGVyIiwiZW5hYmxlV2hhdHNBcHAiLCJmZWF0dXJlc19lbmFibGVfd2hhdHNhcHAiLCJlbmFibGVMaXZlQ2hhdCIsImZlYXR1cmVzX2VuYWJsZV9saXZlX2NoYXQiLCJlbmFibGVkIiwid2hhdHNhcHBfZW5hYmxlZCIsImRlZmF1bHRNZXNzYWdlIiwid2hhdHNhcHBfZGVmYXVsdF9tZXNzYWdlIiwiYnVzaW5lc3NIb3VycyIsIndoYXRzYXBwX2J1c2luZXNzX2hvdXJzIiwiYXV0b1JlcGx5Iiwid2hhdHNhcHBfYXV0b19yZXBseSIsInNob3dPblBhZ2VzIiwid2hhdHNhcHBfc2hvd19vbl9wYWdlcyIsInVwZGF0ZVNldHRpbmdzIiwic2V0dGluZ3NEYXRhIiwiZGJEYXRhIiwiZXhpc3RpbmciLCJkZWZhdWx0RGF0YSIsInBsYWNlaG9sZGVycyIsImdldFByZXNlbnRhdGlvblNsaWRlcyIsImNyZWF0ZVByZXNlbnRhdGlvblNsaWRlIiwic2xpZGVEYXRhIiwibWF4U2xpZGVSb3dzIiwicHJvamVjdF9pZCIsIm5leHRTbGlkZU51bWJlciIsIm5leHRfc2xpZGVfbnVtYmVyIiwic2xpZGVfbnVtYmVyIiwiaW1hZ2VfdXJsIiwiYW5pbWF0aW9uX3R5cGUiLCJkdXJhdGlvbiIsInVwZGF0ZVByZXNlbnRhdGlvblNsaWRlIiwic2xpZGVJZCIsImRlbGV0ZVByZXNlbnRhdGlvblNsaWRlIiwiZGVsZXRlUHJlc2VudGF0aW9uU2xpZGVzQnlQcm9qZWN0IiwiZ2V0SGVyb0ltYWdlcyIsImNyZWF0ZUhlcm9JbWFnZSIsImltYWdlRGF0YSIsIm1heE9yZGVyUm93cyIsIm5leHRPcmRlciIsIm5leHRfb3JkZXIiLCJ1cmwiLCJvcmRlcl9pbmRleCIsIm5ld0ltYWdlUm93cyIsInVwZGF0ZUhlcm9JbWFnZSIsImltYWdlSWQiLCJkZWxldGVIZXJvSW1hZ2UiLCJnZXRBSVNldHRpbmdzIiwic2F2ZUFJU2V0dGluZ3MiLCJvcGVuYWlfYXBpX2tleSIsIm9wZW5haV9tb2RlbCIsIm9wZW5haV9tYXhfdG9rZW5zIiwib3BlbmFpX3RlbXBlcmF0dXJlIiwiZ2VtaW5pX2FwaV9rZXkiLCJnZW1pbmlfbW9kZWwiLCJjbGF1ZGVfYXBpX2tleSIsImNsYXVkZV9tb2RlbCIsImRlZXBzZWVrX2FwaV9rZXkiLCJkZWVwc2Vla19tb2RlbCIsImRlZXBzZWVrX21heF90b2tlbnMiLCJkZWVwc2Vla190ZW1wZXJhdHVyZSIsImRlZmF1bHRfcHJvdmlkZXIiLCJhaV9lbmFibGVkIiwicmF0ZV9saW1pdF9wZXJfbWludXRlIiwicmF0ZV9saW1pdF9wZXJfaG91ciIsInN5c3RlbV9wcm9tcHQiLCJwcm9wZXJ0eV9zdWdnZXN0aW9uc19lbmFibGVkIiwicHJvcGVydHlfc3VnZ2VzdGlvbnNfY291bnQiLCJjb250YWN0X2luZm9faW5fcmVzcG9uc2VzIiwiZ2V0UmVjZW50QWN0aXZpdGllcyIsImZyb250ZW5kT25seSIsInJvdyIsInRpbWVzdGFtcCIsImFjdGl2aXR5RGF0YSIsImJpbmQiLCJnZXREYXRhYmFzZSIsIkRhdGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/mysql-database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/long","vendor-chunks/lru-cache","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/named-placeholders","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fvideo-settings%2Froute&page=%2Fapi%2Fadmin%2Fvideo-settings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fvideo-settings%2Froute.ts&appDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CBerlin%5CDesktop%5Csssq-main%5Csssq-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();