"use strict";(()=>{var e={};e.id=2351,e.ids=[2351],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},73837:e=>{e.exports=require("util")},51931:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>x,patchFetch:()=>b,requestAsyncStorage:()=>w,routeModule:()=>g,serverHooks:()=>A,staticGenerationAsyncStorage:()=>C});var s={};a.r(s),a.d(s,{GET:()=>h,HEAD:()=>m});var r=a(49303),o=a(88716),n=a(60670),i=a(87070),p=a(57147),c=a(73837),l=a(71017),u=a.n(l);let d=(0,c.promisify)(p.stat);async function h(e,{params:t}){try{let a;let s=u().join(process.cwd(),"public","uploads",...t.path);try{a=await d(s)}catch(e){return new i.NextResponse("File not found",{status:404})}let r=a.size,o=e.headers.get("range"),n=u().extname(s).toLowerCase(),c="application/octet-stream";switch(n){case".mp4":c="video/mp4";break;case".webm":c="video/webm";break;case".mov":c="video/quicktime";break;case".avi":c="video/x-msvideo";break;case".jpg":case".jpeg":c="image/jpeg";break;case".png":c="image/png";break;case".pdf":c="application/pdf"}if(o&&c.startsWith("video/")){let e=o.replace(/bytes=/,"").split("-"),t=parseInt(e[0],10),a=e[1]?parseInt(e[1],10):Math.min(t+1048576,r-1),n=a-t+1,l=(0,p.createReadStream)(s,{start:t,end:a}),u=[];for await(let e of l)u.push(e);let d=Buffer.concat(u);return new i.NextResponse(d,{status:206,headers:{"Content-Range":`bytes ${t}-${a}/${r}`,"Accept-Ranges":"bytes","Content-Length":n.toString(),"Content-Type":c,"Cache-Control":"public, max-age=3600","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, HEAD, OPTIONS","Access-Control-Allow-Headers":"Range"}})}if(c.startsWith("video/")){let e=Math.min(1048576,r),t=(0,p.createReadStream)(s,{start:0,end:e-1}),a=[];for await(let e of t)a.push(e);let o=Buffer.concat(a);return new i.NextResponse(o,{status:206,headers:{"Content-Range":`bytes 0-${e-1}/${r}`,"Accept-Ranges":"bytes","Content-Length":e.toString(),"Content-Type":c,"Cache-Control":"public, max-age=3600","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, HEAD, OPTIONS","Access-Control-Allow-Headers":"Range"}})}let l=(0,p.createReadStream)(s),h=[];for await(let e of l)h.push(e);let m=Buffer.concat(h);return new i.NextResponse(m,{headers:{"Content-Type":c,"Content-Length":r.toString(),"Cache-Control":"public, max-age=3600"}})}catch(e){return new i.NextResponse("Internal Server Error",{status:500})}}async function m(e,{params:t}){try{let e;let a=u().join(process.cwd(),"public","uploads",...t.path);try{e=await d(a)}catch{return new i.NextResponse(null,{status:404})}let s=e.size,r=u().extname(a).toLowerCase(),o="application/octet-stream";switch(r){case".mp4":o="video/mp4";break;case".webm":o="video/webm";break;case".mov":o="video/quicktime"}return new i.NextResponse(null,{headers:{"Content-Type":o,"Content-Length":s.toString(),"Accept-Ranges":"bytes","Cache-Control":"public, max-age=3600","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, HEAD, OPTIONS","Access-Control-Allow-Headers":"Range"}})}catch(e){return new i.NextResponse(null,{status:500})}}let g=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/uploads/[...path]/route",pathname:"/api/uploads/[...path]",filename:"route",bundlePath:"app/api/uploads/[...path]/route"},resolvedPagePath:"C:\\Users\\Berlin\\Desktop\\sssq-main\\sssq-main\\app\\api\\uploads\\[...path]\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:w,staticGenerationAsyncStorage:C,serverHooks:A}=g,x="/api/uploads/[...path]/route";function b(){return(0,n.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:C})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>a(51931));module.exports=s})();