"use strict";(()=>{var e={};e.id=7255,e.ids=[7255],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},71017:e=>{e.exports=require("path")},570:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>j,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var t={};s.r(t),s.d(t,{GET:()=>d,POST:()=>m});var a=s(49303),i=s(88716),o=s(60670),n=s(87070),p=s(73292),u=s(71017),l=s(57147);async function d(){try{let e=(0,u.join)(process.cwd(),"public","uploads"),r=await (0,p.readdir)(e),s=[".jpg",".jpeg",".png",".gif",".webp"],t=r.filter(e=>s.some(r=>e.toLowerCase().endsWith(r))).map(e=>`/uploads/${e}`);return n.NextResponse.json({images:t})}catch(e){return n.NextResponse.json({images:[]},{status:500})}}async function m(e){try{let r=(await e.formData()).get("file");if(!r)return n.NextResponse.json({error:"No file provided"},{status:400});if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type))return n.NextResponse.json({error:"Invalid file type. Only images are allowed."},{status:400});if(r.size>10485760)return n.NextResponse.json({error:"File too large. Maximum size is 10MB."},{status:400});let s=(0,u.join)(process.cwd(),"public","uploads");(0,l.existsSync)(s)||await (0,p.mkdir)(s,{recursive:!0});let t=Date.now(),a=r.name.split(".").pop(),i=`main_image_${t}.${a}`,o=(0,u.join)(s,i),d=await r.arrayBuffer(),m=Buffer.from(d);await (0,p.writeFile)(o,m);let c=`/uploads/${i}`;return n.NextResponse.json({success:!0,url:c,fileName:i})}catch(e){return n.NextResponse.json({error:"Failed to upload file"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/uploads/route",pathname:"/api/admin/uploads",filename:"route",bundlePath:"app/api/admin/uploads/route"},resolvedPagePath:"C:\\Users\\Berlin\\Desktop\\sssq-main\\sssq-main\\app\\api\\admin\\uploads\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:x}=c,j="/api/admin/uploads/route";function w(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>s(570));module.exports=t})();