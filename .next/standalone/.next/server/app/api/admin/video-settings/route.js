"use strict";(()=>{var e={};e.id=2500,e.ids=[2500],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},41808:e=>{e.exports=require("net")},77282:e=>{e.exports=require("process")},12781:e=>{e.exports=require("stream")},71576:e=>{e.exports=require("string_decoder")},39512:e=>{e.exports=require("timers")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},33937:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>T,patchFetch:()=>m,requestAsyncStorage:()=>x,routeModule:()=>y,serverHooks:()=>R,staticGenerationAsyncStorage:()=>g});var i={};s.r(i),s.d(i,{DELETE:()=>E,GET:()=>p,POST:()=>_,PUT:()=>v});var u=s(49303),r=s(88716),o=s(60670),a=s(87070),n=s(8852);let d=[{id:1,video_type:"youtube",video_url:null,youtube_url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",title:"Welcome to Premium Choice Real Estate",description:"Discover luxury properties in Dubai with our expert team.",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];async function c(){try{return await n.uu.executeQuery("SELECT 1"),!0}catch(e){return!1}}async function l(){try{let e=`
      CREATE TABLE IF NOT EXISTS video_settings (
        id INT AUTO_INCREMENT PRIMARY KEY,
        video_type ENUM('youtube', 'upload') NOT NULL,
        video_url VARCHAR(500),
        youtube_url VARCHAR(500),
        selected_media_id VARCHAR(50),
        title VARCHAR(255) NOT NULL,
        description TEXT,
        is_active BOOLEAN DEFAULT FALSE,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
      )
    `;await n.uu.executeQuery(e);let t=await n.uu.executeQuery("SELECT COUNT(*) as count FROM video_settings");if(0===t[0].count){let e=`
        INSERT INTO video_settings (video_type, youtube_url, title, description, is_active)
        VALUES ('youtube', 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', 'Welcome to Premium Choice Real Estate', 'Discover luxury properties in Dubai with our expert team.', true)
      `;await n.uu.executeQuery(e)}}catch(e){throw e}}async function p(){try{if(await c()){await l();let e=(await n.uu.executeQuery("SELECT * FROM video_settings WHERE is_active = 1 ORDER BY updated_at DESC LIMIT 1"))[0]||null;return a.NextResponse.json({success:!0,settings:e?{id:e.id,videoType:e.video_type,videoUrl:e.video_url,youtubeUrl:e.youtube_url,selectedMediaId:e.selected_media_id,title:e.title,description:e.description,isActive:!!e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}:null})}{let e=d.find(e=>e.is_active);return a.NextResponse.json({success:!0,settings:e?{id:e.id,videoType:e.video_type,videoUrl:e.video_url,youtubeUrl:e.youtube_url,selectedMediaId:e.selected_media_id,title:e.title,description:e.description,isActive:!!e.is_active,createdAt:e.created_at,updatedAt:e.updated_at}:null})}}catch(e){return a.NextResponse.json({success:!1,error:"Failed to fetch video settings"},{status:500})}}async function _(e){try{let{videoType:t,videoUrl:s,youtubeUrl:i,selectedMediaId:u,title:r,description:o,isActive:p}=await e.json();if(await c()){await l(),await n.uu.executeQuery("UPDATE video_settings SET is_active = 0");let e=await n.uu.executeQuery(`INSERT INTO video_settings 
         (video_type, video_url, youtube_url, selected_media_id, title, description, is_active) 
         VALUES (?, ?, ?, ?, ?, ?, ?)`,[t,s||null,i||null,u||null,r,o||null,p?1:0]);return a.NextResponse.json({success:!0,message:"Video settings saved successfully",id:e.insertId})}{d.forEach(e=>e.is_active=!1);let e=Math.max(...d.map(e=>e.id),0)+1,n={id:e,video_type:t,video_url:s||null,youtube_url:i||null,selected_media_id:u||null,title:r,description:o||null,is_active:p,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return d.push(n),a.NextResponse.json({success:!0,message:"Video settings saved successfully (fallback)",id:e})}}catch(e){return a.NextResponse.json({success:!1,error:"Failed to save video settings"},{status:500})}}async function v(e){try{let{id:t,videoType:s,videoUrl:i,youtubeUrl:u,selectedMediaId:r,title:o,description:p,isActive:_}=await e.json();if(!t)return a.NextResponse.json({success:!1,error:"Video settings ID is required"},{status:400});if(await c())return await l(),_&&await n.uu.executeQuery("UPDATE video_settings SET is_active = 0 WHERE id != ?",[t]),await n.uu.executeQuery(`UPDATE video_settings 
         SET video_type = ?, video_url = ?, youtube_url = ?, selected_media_id = ?, title = ?, description = ?, is_active = ?
         WHERE id = ?`,[s,i||null,u||null,r||null,o,p||null,_?1:0,t]),a.NextResponse.json({success:!0,message:"Video settings updated successfully"});{let e=d.findIndex(e=>e.id===parseInt(t));if(-1===e)return a.NextResponse.json({success:!1,error:"Video settings not found"},{status:404});return _&&d.forEach(e=>{e.id!==parseInt(t)&&(e.is_active=!1)}),d[e]={...d[e],video_type:s,video_url:i||null,youtube_url:u||null,title:o,description:p||null,is_active:_,updated_at:new Date().toISOString()},a.NextResponse.json({success:!0,message:"Video settings updated successfully (fallback)"})}}catch(e){return a.NextResponse.json({success:!1,error:"Failed to update video settings"},{status:500})}}async function E(e){try{let{searchParams:t}=new URL(e.url),s=t.get("id");if(!s)return a.NextResponse.json({success:!1,error:"Video settings ID is required"},{status:400});if(await c())return await l(),await n.uu.executeQuery("DELETE FROM video_settings WHERE id = ?",[s]),a.NextResponse.json({success:!0,message:"Video settings deleted successfully"});{let e=d.findIndex(e=>e.id===parseInt(s));if(-1===e)return a.NextResponse.json({success:!1,error:"Video settings not found"},{status:404});return d.splice(e,1),a.NextResponse.json({success:!0,message:"Video settings deleted successfully (fallback)"})}}catch(e){return a.NextResponse.json({success:!1,error:"Failed to delete video settings"},{status:500})}}let y=new u.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/admin/video-settings/route",pathname:"/api/admin/video-settings",filename:"route",bundlePath:"app/api/admin/video-settings/route"},resolvedPagePath:"C:\\Users\\Berlin\\Desktop\\sssq-main\\sssq-main\\app\\api\\admin\\video-settings\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:R}=y,T="/api/admin/video-settings/route";function m(){return(0,o.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[8948,5972,3785,5802],()=>s(33937));module.exports=i})();