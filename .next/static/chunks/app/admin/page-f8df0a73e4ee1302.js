(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9323:function(e,t,a){Promise.resolve().then(a.bind(a,7576))},7576:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var r=a(7437),s=a(2265),l=a(1513),i=a(7138);function n(e){let{onLogin:t}=e,[a,n]=(0,s.useState)({email:"",password:""}),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(""),x=async e=>{e.preventDefault(),d(!0),m("");try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){let a=await e.json();localStorage.setItem("admin_token",a.token),localStorage.setItem("admin_user",JSON.stringify(a.user)),t(a.token)}else{let t=await e.json();m(t.error||"Invalid credentials")}}catch(e){m("Connection error. Please try again.")}finally{d(!1)}};return(0,r.jsxs)("div",{className:"admin-panel min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-30 dark:opacity-10",children:(0,r.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300A693' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),(0,r.jsx)("header",{className:"relative z-10 p-6 lg:p-8",children:(0,r.jsxs)(i.default,{href:"/",className:"flex items-center space-x-3 group w-fit",children:[(0,r.jsx)(l.E.div,{className:"w-12 h-12 bg-green-ocean rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300",whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},children:(0,r.jsx)("span",{className:"text-white font-bold text-xl",children:"PC"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xl font-bold text-slate-800 dark:text-white font-serif",children:"Premium Choice"}),(0,r.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Admin Panel"})]})]})}),(0,r.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-[calc(100vh-120px)] px-6",children:(0,r.jsx)(l.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-800 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-slate-200 dark:border-slate-700",children:[(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white font-serif mb-2",children:"Welcome Back"}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Sign in to access the admin dashboard"})]}),(0,r.jsxs)(l.E.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Email Address"}),(0,r.jsx)("input",{type:"email",id:"email",value:a.email,onChange:e=>n({...a,email:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-ocean focus:border-transparent transition-all duration-300",placeholder:"Enter your email address",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",value:a.password,onChange:e=>n({...a,password:e.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-ocean focus:border-transparent transition-all duration-300",placeholder:"Enter your password",required:!0})]}),c&&(0,r.jsx)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm font-medium",children:c}),(0,r.jsx)(l.E.button,{type:"submit",disabled:o,className:"w-full bg-green-ocean hover:bg-green-ocean-light text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98]",whileHover:{scale:o?1:1.02},whileTap:{scale:o?1:.98},children:o?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Signing In..."})]}):"Sign In"})]}),(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"mt-6 text-center",children:(0,r.jsx)(i.default,{href:"/",className:"text-slate-600 dark:text-slate-400 hover:text-green-ocean transition-colors text-sm font-medium",children:"← Back to Website"})})]})})})]})}var o=a(4446),d=a(6648);function c(e){let{projects:t,onUpdate:a}=e,[i,n]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[x,u]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),[p,g]=(0,s.useState)([]),[f,y]=(0,s.useState)(null),[v,j]=(0,s.useState)(null),[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(0),[_,D]=(0,s.useState)(""),[S,E]=(0,s.useState)(!1),[P,T]=(0,s.useState)(null),[A,F]=(0,s.useState)([]),[L,I]=(0,s.useState)([]),[M,U]=(0,s.useState)(!1),[B,V]=(0,s.useState)(!1),[z,O]=(0,s.useState)([]),[W,R]=(0,s.useState)(""),[q,H]=(0,s.useState)({name:"",description:"",image:"",featured_video:"",type:"Apartment",developer:"",location:"",starting_price:"",bedrooms:0,bathrooms:0,studios:0,units_1bedroom:0,units_2bedroom:0,units_3bedroom:0,units_4bedroom:0,units_5bedroom:0,units_6bedroom:0,units_7bedroom:0,units_office:0,shop_commercial:0,area:"",features:[],property_types:[],gallery:[],presentation_file:"",project_type:"ready",status:"Available",is_featured:!1,units_8plus_bedrooms:"",custom_bedroom_count:""});(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/uploads");if(e.ok){let t=await e.json();g(t.images||[])}else g(["/uploads/photo_1_2025-07-24_19-59-29.jpg","/uploads/photo_2_2025-07-24_19-59-29.jpg","/uploads/photo_3_2025-07-24_19-59-29.jpg","/uploads/photo_4_2025-07-24_19-59-29.jpg","/uploads/photo_5_2025-07-24_19-59-29.jpg"])}catch(e){g(["/uploads/photo_1_2025-07-24_19-59-29.jpg","/uploads/photo_2_2025-07-24_19-59-29.jpg","/uploads/photo_3_2025-07-24_19-59-29.jpg","/uploads/photo_4_2025-07-24_19-59-29.jpg","/uploads/photo_5_2025-07-24_19-59-29.jpg"])}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/developers");if(e.ok){let t=await e.json();F(t)}}catch(e){}})()},[]);let J=e=>{H(t=>({...t,developer:e})),e.length>0?(I(A.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))),U(!0)):U(!1)},Y=e=>{H(t=>({...t,developer:e.name})),U(!1),V(!1)},G=async e=>{V(!1);try{let t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),a=await fetch("/api/admin/developers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,slug:t,description:"".concat(e," - Real Estate Developer"),projects_count:0,status:"Active",location:"Dubai, UAE",established:new Date().getFullYear()})});if(a.ok){let t=await a.json(),r=t.data||t;F(e=>[...e,r]),H(t=>({...t,developer:e})),U(!1),localStorage.setItem("developer_added","true"),alert('✅ New developer "'.concat(e,'" created successfully!\nYou can now assign projects to this developer.'))}else{let e=await a.json();alert("❌ Failed to create new developer: ".concat(e.message||e.error||"Unknown error"))}}catch(e){alert("❌ Error creating new developer. Please check your connection and try again.")}},K=(e,t)=>{t?O(t=>[...t,e]):O(t=>t.filter(t=>t!==e))},X=async()=>{if(!q.developer||0===z.length){alert("Please select a developer and unit types first");return}try{let e=await fetch("/api/admin/ai-description",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({developer:q.developer,unitTypes:z,projectName:q.name,location:q.location})});if(e.ok){let t=await e.json();R(t.description),H(e=>({...e,description:t.description}))}else alert("Failed to generate AI description")}catch(e){alert("Error generating AI description")}},$=async e=>{var t;if(!e)return;let r=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();if(!["video/mp4","video/webm","video/mov","video/quicktime"].includes(e.type)&&!["mp4","webm","mov","quicktime"].includes(r||"")){alert("Please select a valid video file (MP4, WebM, MOV)");return}if(e.size>262144e3){alert("Video file is too large. Maximum size is 250MB");return}try{let t=new FormData;if(t.append("file",e),t.append("mediaType","video"),null==c?void 0:c.id){t.append("projectId",c.id.toString());let e=await fetch("/api/admin/projects/upload-video",{method:"POST",body:t}),r=await e.json();if(e.ok&&r.success){let e=r.data.filePath;H(t=>({...t,featured_video:e})),alert("Video uploaded successfully!"),a()}else throw Error(r.error||"Upload failed")}else j(e),H(e=>({...e,featured_video:""})),alert("Video selected! It will be uploaded when you save the project.")}catch(t){let e=t instanceof Error?t.message:"Failed to upload video";alert("Error uploading video: ".concat(e))}},Q=async e=>{var t,r,s,l,i,o;if(e.preventDefault(),w)return;let d=[];if((null===(t=q.name)||void 0===t?void 0:t.trim())||d.push("Project name is required"),(null===(r=q.developer)||void 0===r?void 0:r.trim())||d.push("Developer assignment is required"),(null===(s=q.location)||void 0===s?void 0:s.trim())||d.push("Location is required"),(null===(l=q.starting_price)||void 0===l?void 0:l.trim())||d.push("Starting price is required"),(null===(i=q.description)||void 0===i?void 0:i.trim())||d.push("Description is required"),v&&(v.size>262144e3&&d.push("Video file must be smaller than 250MB"),["video/mp4","video/webm","video/quicktime"].includes(v.type)||d.push("Video must be MP4, WebM, or MOV format")),d.length>0){alert("Please fix the following errors:\n\n"+d.join("\n"));return}N(!0),C(0),D("Preparing project...");try{let e=A.find(e=>e.name===q.developer),t=null==e?void 0:e.id,r=!1;if(!t&&q.developer)try{D("Creating developer profile..."),C(10);let e=q.developer.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),a=await fetch("/api/admin/developers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q.developer,slug:e,description:"".concat(q.developer," - Real Estate Developer"),projects_count:0,status:"Active",location:"Dubai, UAE",established:new Date().getFullYear()})});if(a.ok){let e=await a.json(),s=e.data||e;t=s.id,F(e=>[...e,s]),localStorage.setItem("developer_added","true"),r=!0}else{let e=await a.json();alert("❌ Failed to create developer: ".concat(e.message||e.error||"Unknown error"));return}}catch(e){alert("❌ Error creating developer. Please check your connection and try again.");return}D(c?"Updating project...":"Creating project..."),C(30);let s=c?"/api/admin/projects/".concat(c.id):"/api/admin/projects",l={...q,developer_id:t},i=new AbortController,d=setTimeout(()=>i.abort(),3e4),x=await fetch(s,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),signal:i.signal});if(clearTimeout(d),x.ok){let e=await x.json();if(!c&&v){D("Uploading video file..."),C(50);let t=null===(o=e.data)||void 0===o?void 0:o.id;if(t)try{let e=(v.size/1048576).toFixed(2);D("Uploading video (".concat(e,"MB)..."));let a=new FormData;a.append("file",v),a.append("projectId",t.toString()),a.append("mediaType","video");let s=await fetch("/api/admin/projects/upload-video",{method:"POST",body:a}),l=await s.json();if(s.ok&&l.success){if(C(80),D("Finalizing project..."),(await fetch("/api/admin/projects/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...q,featured_video:l.data.filePath})})).ok){C(100),D("Upload completed successfully!");let e=r?'✅ Project and video uploaded successfully! Developer "'.concat(q.developer,'" was automatically created.'):"✅ Project and video uploaded successfully!";alert(e)}else{let e=r?'Video uploaded and developer "'.concat(q.developer,'" was auto-created, but failed to update project. Please refresh the page.'):"Video uploaded but failed to update project. Please refresh the page.";alert(e)}}else{let e=r?'Project created and developer "'.concat(q.developer,'" was auto-created, but video upload failed: ').concat(l.error||"Unknown error"):"Project created but video upload failed: ".concat(l.error||"Unknown error");alert(e)}j(null)}catch(t){let e=r?'Project created and developer "'.concat(q.developer,'" was auto-created, but video upload failed. Please try uploading the video again by editing the project.'):"Project created but video upload failed. Please try uploading the video again by editing the project.";alert(e),j(null)}else{let e=r?'Project created and developer "'.concat(q.developer,'" was auto-created, but could not upload video - no project ID found. Please edit the project to add the video.'):"Project created but could not upload video - no project ID found. Please edit the project to add the video.";alert(e),j(null)}}else{C(100),D("Project created successfully!");let e=r?'✅ Project created successfully! Developer "'.concat(q.developer,'" was automatically created.'):"✅ Project created successfully!";alert(e)}a(),n(!1),m(null),j(null),setTimeout(()=>{N(!1),C(0),D("")},1500),H({name:"",description:"",image:"",featured_video:"",type:"Apartment",developer:"",location:"",starting_price:"",bedrooms:0,bathrooms:0,studios:0,units_1bedroom:0,units_2bedroom:0,units_3bedroom:0,units_4bedroom:0,units_5bedroom:0,units_office:0,area:"",features:[],property_types:[],gallery:[],presentation_file:"",project_type:"ready",status:"Available",is_featured:!1})}else{try{let e=await x.json();alert("Error saving project: ".concat(e.message||e.error||"Failed to save project"))}catch(e){alert("Error saving project: HTTP ".concat(x.status," - ").concat(x.statusText))}v&&j(null),N(!1),C(0),D("")}}catch(t){let e="Error saving project";"AbortError"===t.name?e="Request timed out. Please check your connection and try again.":t.message&&(e="Error: ".concat(t.message)),alert(e),v&&j(null),N(!1),C(0),D("")}},Z=e=>{m(e),H(e),j(null),n(!0)},ee=async e=>{T(e),E(!0)},et=async()=>{if(P)try{(await fetch("/api/admin/projects/".concat(P),{method:"DELETE"})).ok?(a(),E(!1),T(null)):alert("Error deleting project")}catch(e){alert("Error deleting project")}},ea=()=>{E(!1),T(null)},er=(e,t)=>{H(a=>{var r;return{...a,features:(null===(r=a.features)||void 0===r?void 0:r.map((a,r)=>r===e?t:a))||[]}})},es=e=>{H(t=>{var a;return{...t,features:(null===(a=t.features)||void 0===a?void 0:a.filter((t,a)=>a!==e))||[]}})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Projects"}),(0,r.jsx)("p",{className:"text-brand-gray",children:"Manage your property listings"})]}),(0,r.jsxs)("button",{onClick:()=>{m(null),H({name:"",description:"",image:"",featured_video:"",type:"Apartment",developer:"",location:"",starting_price:"",bedrooms:0,bathrooms:0,studios:0,units_1bedroom:0,units_2bedroom:0,units_3bedroom:0,units_4bedroom:0,units_5bedroom:0,units_6bedroom:0,units_7bedroom:0,units_office:0,shop_commercial:0,area:"",features:[],property_types:[],gallery:[],presentation_file:"",project_type:"ready",status:"Available",is_featured:!1,units_8plus_bedrooms:"",custom_bedroom_count:""}),j(null),O([]),U(!1),V(!1),R(""),n(!0)},className:"flex items-center space-x-2 px-6 py-3 bg-brand-green hover:bg-brand-green/80 text-white rounded-lg transition-colors hover:scale-105 active:scale-95",children:[(0,r.jsx)("i",{className:"ri-add-line"}),(0,r.jsx)("span",{children:"Add Project"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden hover:scale-102 transition-transform",children:[(0,r.jsxs)("div",{className:"relative h-48",children:[e.image&&""!==e.image.trim()?(0,r.jsx)(d.default,{src:e.image,alt:e.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-brand-green/20 to-brand-green/5 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white/60",children:[(0,r.jsx)("i",{className:"ri-image-line text-3xl mb-2 block"}),(0,r.jsx)("span",{className:"text-sm",children:"No Image"})]})}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[e.is_featured&&(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-green text-white text-xs rounded-full",children:"Featured"}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Available"===e.status?"bg-green-500/20 text-green-400":"Sold"===e.status?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"),children:e.status})]})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-brand-gray text-sm mb-4 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-map-pin-line mr-2"}),e.location]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-price-tag-3-line mr-2"}),"Starting from ",e.starting_price]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>Z(e),className:"flex-1 px-4 py-2 bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 rounded-lg transition-colors text-sm",children:[(0,r.jsx)("i",{className:"ri-edit-line mr-1"}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>e.id&&ee(e.id),className:"flex-1 px-4 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-lg transition-colors text-sm",children:[(0,r.jsx)("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]})]})]},e.id))}),i&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fadeIn",children:(0,r.jsxs)("div",{className:"bg-brand-dark border border-white/10 rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto animate-scaleIn",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:c?"Edit Project":"Add New Project"}),(0,r.jsx)("button",{onClick:()=>{n(!1),j(null)},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("i",{className:"ri-close-line text-xl text-white"})})]}),(0,r.jsxs)("form",{onSubmit:Q,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Developer"}),(0,r.jsx)("input",{type:"text",value:q.developer||"",onChange:e=>J(e.target.value),onFocus:()=>{q.developer&&L.length>0&&U(!0)},className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter developer name",required:!0}),M&&(0,r.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-gray-800 border border-white/10 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[L.map(e=>(0,r.jsxs)("div",{onClick:()=>Y(e),className:"px-4 py-2 hover:bg-white/10 cursor-pointer text-white border-b border-white/5 last:border-b-0",children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),e.projects_count>0&&(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:[e.projects_count," projects"]})]},e.id)),q.developer&&!A.some(e=>{var t;return e.name.toLowerCase()===(null===(t=q.developer)||void 0===t?void 0:t.toLowerCase())})&&(0,r.jsxs)("div",{onClick:()=>V(!0),className:"px-4 py-2 hover:bg-brand-green/20 cursor-pointer text-brand-green border-t border-white/10",children:[(0,r.jsxs)("div",{className:"font-medium",children:['+ Add "',q.developer,'" as new developer']}),(0,r.jsx)("div",{className:"text-xs",children:"Create new developer entry"})]})]}),B&&(0,r.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-gray-800 border border-white/10 rounded-lg shadow-lg p-4",children:[(0,r.jsxs)("div",{className:"text-white mb-3",children:[(0,r.jsx)("div",{className:"font-medium",children:"Create New Developer"}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["Name: ",q.developer]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>G(q.developer||""),className:"px-3 py-1 bg-brand-green text-white rounded text-sm hover:bg-brand-green/80",children:"Create"}),(0,r.jsx)("button",{type:"button",onClick:()=>V(!1),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-500",children:"Cancel"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Sub-Project"}),(0,r.jsx)("input",{type:"text",value:q.category||"",onChange:e=>H(t=>({...t,category:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter sub-project name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Type of Project"}),(0,r.jsxs)("select",{value:q.type||"Apartment",onChange:e=>H(t=>({...t,type:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-brand-green",children:[(0,r.jsx)("option",{value:"Apartment",children:"Apartment"}),(0,r.jsx)("option",{value:"Villa",children:"Villa"}),(0,r.jsx)("option",{value:"Townhouse",children:"Townhouse"}),(0,r.jsx)("option",{value:"Office",children:"Office"}),(0,r.jsx)("option",{value:"Community",children:"Community"}),(0,r.jsx)("option",{value:"Commercial",children:"Commercial"}),(0,r.jsx)("option",{value:"Stand-alone",children:"Stand-alone"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Property Type"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["Apartment","Villa","Town House","Office"].map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:(q.property_types||[]).includes(e),onChange:t=>{let a=q.property_types||[];t.target.checked?H(t=>({...t,property_types:[...a,e]})):H(t=>({...t,property_types:a.filter(t=>t!==e)}))},className:"w-4 h-4 text-brand-green bg-white/5 border-white/20 rounded focus:ring-brand-green focus:ring-2"}),(0,r.jsx)("span",{className:"text-white text-sm",children:e})]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Project Name"}),(0,r.jsx)("input",{type:"text",value:q.name||"",onChange:e=>H(t=>({...t,name:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter project name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:q.location||"",onChange:e=>H(t=>({...t,location:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter location",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Status"}),(0,r.jsxs)("select",{value:q.project_type||"ready",onChange:e=>H(t=>({...t,project_type:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-brand-green",children:[(0,r.jsx)("option",{value:"available",children:"Available"}),(0,r.jsx)("option",{value:"ready",children:"Ready"}),(0,r.jsx)("option",{value:"off-plan",children:"Off-Plan"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Available Unit Types"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-8 gap-3",children:[{key:"studios",label:"Studio"},{key:"units_1bedroom",label:"1 Bedroom"},{key:"units_2bedroom",label:"2 Bedroom"},{key:"units_3bedroom",label:"3 Bedroom"},{key:"units_4bedroom",label:"4 Bedroom"},{key:"units_5bedroom",label:"5 Bedroom"},{key:"units_6bedroom",label:"6 Bedroom"},{key:"units_7bedroom",label:"7 Bedroom"},{key:"office",label:"Office"},{key:"shop_commercial",label:"Shop"},{key:"bathrooms",label:"Bathrooms"}].map(e=>(z.includes(e.label),(0,r.jsxs)("button",{type:"button",onClick:()=>{let t=(q[e.key]||0)>0?0:1;H(a=>({...a,[e.key]:t})),K(e.label,t>0)},className:"p-3 rounded-lg border text-sm font-medium transition-all ".concat((q[e.key]||0)>0?"bg-brand-green/20 border-brand-green text-brand-green":"bg-white/5 border-white/10 text-gray-400"),children:[(0,r.jsx)("div",{children:e.label}),(0,r.jsx)("div",{className:"text-xs mt-1",children:(q[e.key]||0)>0?"Available":"Not Available"})]},e.key)))}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"8+ Bedrooms (Custom)"}),(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsxs)("select",{value:q.units_8plus_bedrooms||"",onChange:e=>H(t=>({...t,units_8plus_bedrooms:e.target.value})),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-brand-green",children:[(0,r.jsx)("option",{value:"",children:"Select bedrooms"}),(0,r.jsx)("option",{value:"8",children:"8 Bedrooms"}),(0,r.jsx)("option",{value:"9",children:"9 Bedrooms"}),(0,r.jsx)("option",{value:"10",children:"10 Bedrooms"}),(0,r.jsx)("option",{value:"11",children:"11 Bedrooms"}),(0,r.jsx)("option",{value:"12",children:"12 Bedrooms"}),(0,r.jsx)("option",{value:"custom",children:"Custom (specify below)"})]}),"custom"===q.units_8plus_bedrooms&&(0,r.jsx)("input",{type:"number",min:"8",placeholder:"Enter number of bedrooms",value:q.custom_bedroom_count||"",onChange:e=>H(t=>({...t,custom_bedroom_count:e.target.value})),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green"})]}),q.units_8plus_bedrooms&&""!==q.units_8plus_bedrooms&&(0,r.jsxs)("div",{className:"mt-2 text-xs text-brand-green",children:["✓ ","custom"===q.units_8plus_bedrooms?"".concat(q.custom_bedroom_count||"Custom"):q.units_8plus_bedrooms," bedroom units available"]})]}),z.length>0&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-brand-green/10 border border-brand-green/20 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-brand-green mb-2",children:"Selected Unit Types:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:z.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-green/20 text-brand-green text-xs rounded-full",children:e},e))})]}),z.includes("Bathrooms")&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-white/5 border border-white/10 rounded-lg",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Bathroom Configuration"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"1 Bathroom Units"}),(0,r.jsx)("input",{type:"number",min:"0",value:q.bathrooms||0,onChange:e=>H(t=>({...t,bathrooms:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:border-brand-green",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"2+ Bathroom Units"}),(0,r.jsx)("input",{type:"number",min:"0",value:q.bathrooms||0,onChange:e=>H(t=>({...t,bathrooms:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:border-brand-green",placeholder:"0"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Starting Price"}),(0,r.jsx)("input",{type:"text",value:q.starting_price||"",onChange:e=>H(t=>({...t,starting_price:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"AED 1,500,000",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white",children:"Description"}),(0,r.jsx)("button",{type:"button",onClick:X,disabled:!q.developer||0===z.length,className:"px-3 py-1 bg-gradient-to-r from-purple-500 to-blue-500 text-white text-xs rounded-lg hover:from-purple-600 hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"✨ AI Generate"})]}),(0,r.jsx)("textarea",{value:q.description||"",onChange:e=>H(t=>({...t,description:e.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter project description or use AI to generate one",rows:4,required:!0}),W&&(0,r.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:'\uD83D\uDCA1 AI-generated description available. Click "AI Generate" to use it.'})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:q.featured||!1,onChange:e=>H(t=>({...t,featured:e.target.checked})),className:"w-5 h-5 text-brand-green bg-white/5 border-white/20 rounded focus:ring-brand-green focus:ring-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-white",children:"Featured Project"}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Highlight this project on homepage and promotional components"})]})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Main Image"}),(0,r.jsxs)("div",{className:"space-y-4",children:[q.image&&(0,r.jsx)("div",{className:"relative w-full h-48 bg-white/5 rounded-lg overflow-hidden",children:(0,r.jsx)(d.default,{src:q.image,alt:"Project preview",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover"})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>b(!0),className:"flex-1 px-4 py-2 bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 rounded-lg transition-colors text-sm",children:[(0,r.jsx)("i",{className:"ri-image-line mr-2"}),"Pick Image"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{H(t=>{var a;return{...t,image:null===(a=e.target)||void 0===a?void 0:a.result}})},e.readAsDataURL(a)}},e.click()},className:"flex-1 px-4 py-2 bg-brand-green/20 text-brand-green hover:bg-brand-green/30 rounded-lg transition-colors text-sm",children:[(0,r.jsx)("i",{className:"ri-upload-line mr-2"}),"Upload New"]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Project Video"}),(0,r.jsxs)("div",{className:"space-y-4",children:[q.featured_video&&(0,r.jsx)("div",{className:"relative w-full h-48 bg-white/5 rounded-lg overflow-hidden",children:(0,r.jsxs)("video",{controls:!0,className:"w-full h-full object-cover",preload:"metadata",children:[(0,r.jsx)("source",{src:q.featured_video,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="video/mp4,video/webm,video/mov,video/quicktime",e.onchange=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&$(a)},e.click()},className:"flex-1 px-4 py-2 bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 rounded-lg transition-colors text-sm",children:[(0,r.jsx)("i",{className:"ri-video-line mr-2"}),"Upload Video"]}),q.featured_video&&(0,r.jsxs)("button",{type:"button",onClick:()=>H(e=>({...e,featured_video:""})),className:"px-4 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-lg transition-colors text-sm",children:[(0,r.jsx)("i",{className:"ri-delete-bin-line mr-2"}),"Remove"]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Supported formats: MP4, WebM, MOV. Maximum size: 250MB"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"featured",checked:q.is_featured||!1,onChange:e=>H(t=>({...t,is_featured:e.target.checked})),className:"w-4 h-4 text-brand-green bg-white/5 border-white/20 rounded focus:ring-brand-green focus:ring-2"}),(0,r.jsx)("label",{htmlFor:"featured",className:"text-white text-sm font-medium cursor-pointer",children:"Featured Project"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Features"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(q.features||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>er(t,e.target.value),className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter feature"}),(0,r.jsx)("button",{type:"button",onClick:()=>es(t),className:"px-3 py-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-lg transition-colors",children:(0,r.jsx)("i",{className:"ri-delete-bin-line"})})]},t)),(0,r.jsxs)("button",{type:"button",onClick:()=>{H(e=>({...e,features:[...e.features||[],""]}))},className:"px-4 py-2 bg-brand-green/20 text-brand-green hover:bg-brand-green/30 rounded-lg transition-colors",children:[(0,r.jsx)("i",{className:"ri-add-line mr-2"}),"Add Feature"]})]})]}),w&&(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:_}),(0,r.jsxs)("span",{className:"text-brand-green text-sm font-medium",children:[k,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-brand-green to-green-400 h-2 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(k,"%")}})}),v&&(0,r.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Uploading: ",v.name," (",(v.size/1048576).toFixed(2),"MB)"]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{n(!1),j(null)},className:"flex-1 px-6 py-3 bg-white/5 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:w,className:"flex-1 px-6 py-3 rounded-lg transition-colors flex items-center justify-center gap-2 ".concat(w?"bg-gray-500 cursor-not-allowed":"bg-brand-green hover:bg-brand-green/80"," text-white"),children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Processing..."})]}):(0,r.jsxs)("span",{children:[c?"Update":"Create"," Project"]})})]})]})]})}),h&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-brand-dark border border-white/10 rounded-xl p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Select Image"}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("i",{className:"ri-close-line text-xl text-white"})})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map((e,t)=>(0,r.jsxs)("div",{onClick:()=>{H(t=>({...t,image:e})),b(!1)},className:"relative aspect-square bg-white/5 rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-brand-green transition-all",children:[(0,r.jsx)(d.default,{src:e,alt:"Option ".concat(t+1),fill:!0,sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw",className:"object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/0 hover:bg-black/20 transition-colors flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-check-line text-2xl text-white opacity-0 hover:opacity-100 transition-opacity"})})]},t))})]})}),(0,r.jsx)(o.M,{children:S&&(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:ea,children:(0,r.jsx)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-brand-dark/90 backdrop-blur-lg rounded-2xl p-8 border border-white/10 w-full max-w-md",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-red-500/20 text-red-500",children:(0,r.jsx)("i",{className:"ri-delete-bin-line text-3xl"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Delete Project"}),(0,r.jsx)("p",{className:"text-brand-gray",children:"Are you sure you want to delete this project? This action cannot be undone."}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:ea,className:"flex-1 px-6 py-3 bg-white/10 text-white hover:bg-white/20 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:et,className:"flex-1 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Confirm"})]})]})})})})]})}function m(e){let{developer:t,onBack:a,onUpdate:i}=e,[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[m,x]=(0,s.useState)({totalProjects:0,activeProjects:0,completedProjects:0,totalUnits:0,totalValue:0});(0,s.useEffect)(()=>{u()},[t.id]);let u=async()=>{try{c(!0);let i=await fetch("/api/admin/developers/".concat(t.id,"/projects"));if(i.ok){var e,a,r,s,l;let t=await i.json();o(t.projects||[]);let n=(null===(e=t.projects)||void 0===e?void 0:e.length)||0,d=(null===(a=t.projects)||void 0===a?void 0:a.filter(e=>"active"===e.status).length)||0,c=(null===(r=t.projects)||void 0===r?void 0:r.filter(e=>"completed"===e.status).length)||0,m=(null===(s=t.projects)||void 0===s?void 0:s.reduce((e,t)=>e+(t.totalUnits||0),0))||0,u=(null===(l=t.projects)||void 0===l?void 0:l.reduce((e,t)=>e+(Number(t.price)||0),0))||0;x({totalProjects:n,activeProjects:d,completedProjects:c,totalUnits:m,totalValue:u})}}catch(e){}finally{c(!1)}},h=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M AED"):e>=1e3?"".concat((e/1e3).toFixed(0),"K AED"):"".concat(e," AED"),b=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"upcoming":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"on-hold":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{children:"Back to Developers"})]})}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Developer Profile"})]}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-8 border border-blue-200 dark:border-blue-700/50",children:(0,r.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:t.logo?(0,r.jsx)("img",{src:t.logo,alt:t.name,className:"w-24 h-24 rounded-xl object-cover border-4 border-white dark:border-gray-700 shadow-lg"}):(0,r.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center border-4 border-white dark:border-gray-700 shadow-lg",children:(0,r.jsx)("span",{className:"text-white text-2xl font-bold",children:t.name.charAt(0)})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.name}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("Active"===t.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"),children:"Active"===t.status?"Active":"Inactive"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[t.established&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-blue-500",children:"\uD83D\uDCC5"}),(0,r.jsxs)("span",{children:["Established: ",t.established]})]}),t.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-blue-500",children:"\uD83D\uDCCD"}),(0,r.jsx)("span",{children:t.location})]}),t.email&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-blue-500",children:"✉️"}),(0,r.jsx)("a",{href:"mailto:".concat(t.email),className:"hover:text-blue-600 dark:hover:text-blue-400",children:t.email})]}),t.phone&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-blue-500",children:"\uD83D\uDCDE"}),(0,r.jsx)("a",{href:"tel:".concat(t.phone),className:"hover:text-blue-600 dark:hover:text-blue-400",children:t.phone})]}),t.website&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-blue-500",children:"\uD83C\uDF10"}),(0,r.jsx)("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Visit Website"})]})]}),t.description&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.description})})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:m.totalProjects}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total Projects"})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:m.activeProjects}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Active Projects"})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:m.completedProjects}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Completed"})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:m.totalUnits.toLocaleString()}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total Units"})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:h(m.totalValue)}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total Value"})]})})]}),(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Associated Projects (",n.length,")"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["All projects developed by ",t.name]})]}),(0,r.jsx)("div",{className:"p-6",children:d?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading projects..."})]}):0===n.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFD7️"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Projects Found"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"This developer doesn't have any associated projects yet."})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(e=>(0,r.jsxs)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6 border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(b(e.status||"unknown")),children:(e.status||"unknown").charAt(0).toUpperCase()+(e.status||"unknown").slice(1)}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.type})]})]}),e.image&&(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-200 dark:border-gray-600"})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCCD"}),(0,r.jsx)("span",{children:e.location})]}),e.price&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCB0"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:h(Number(e.price))})]})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-3 line-clamp-2",children:e.description})]},e.id))})})]})]})}function x(e){let{developers:t,onUpdate:a}=e,[i,n]=(0,s.useState)(!1),[c,x]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)([]),[g,f]=(0,s.useState)("list"),[y,v]=(0,s.useState)(null),[j,w]=(0,s.useState)({name:"",slug:"",description:"",logo:"",established:"",projects_count:0,location:"",website:"",phone:"",email:"",status:"Active"}),[N,k]=(0,s.useState)({}),[C,_]=(0,s.useState)(!1),[D,S]=(0,s.useState)(!1),[E,P]=(0,s.useState)(null),[T,A]=(0,s.useState)([]),[F,L]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/media");if(e.ok){let t=await e.json();if(t.success){let e=t.data.filter(e=>{var t;return null===(t=e.mime_type)||void 0===t?void 0:t.startsWith("image/")}).map(e=>"/uploads/".concat(e.filename));p(e)}}}catch(e){}})()},[]);let I=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),M=()=>{var e,t;let a={};return(null===(e=j.name)||void 0===e?void 0:e.trim())||(a.name="Company name is required"),(null===(t=j.description)||void 0===t?void 0:t.trim())||(a.description="Description is required"),j.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)&&(a.email="Please enter a valid email address"),j.website&&!/^https?:\/\/.+/.test(j.website)&&(a.website="Website must start with http:// or https://"),j.phone&&!/^[\+]?[1-9][\d]{0,15}$/.test(j.phone.replace(/[\s\-\(\)]/g,""))&&(a.phone="Please enter a valid phone number"),k(a),0===Object.keys(a).length},U=async e=>{if(e.preventDefault(),M()){_(!0),k({});try{let e;let t={...j,slug:j.slug||I(j.name||""),projects_count:Number(j.projects_count)||0};e=c?await fetch("/api/admin/developers?id=".concat(c.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):await fetch("/api/admin/developers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let r=await e.json();e.ok?(n(!1),x(null),B(),a()):k({submit:r.message||"Failed to save developer"})}catch(e){k({submit:"An unexpected error occurred. Please try again."})}finally{_(!1)}}},B=()=>{w({name:"",slug:"",description:"",logo:"",established:"",projects_count:0,location:"",website:"",phone:"",email:"",status:"Active"}),k({})},V=e=>{x(e),w({name:e.name,slug:e.slug,description:e.description,logo:e.logo||"",established:e.established||"",projects_count:e.projects_count,location:e.location||"",website:e.website||"",phone:e.phone||"",email:e.email||"",status:e.status}),n(!0)},z=async e=>{if(e.id){P(e),L(!0),S(!0);try{let t=await fetch("/api/admin/developers/".concat(e.id,"/projects")),a=await t.json(),r=a.success?a.data:[];A(r)}catch(e){A([])}finally{L(!1)}}},O=async e=>{if(e)try{let t=await fetch("/api/admin/developers?id=".concat(e),{method:"DELETE"}),r=await t.json();t.ok?(S(!1),P(null),A([]),r.deletedProjects>0?alert("Developer deleted successfully! ".concat(r.deletedProjects," associated project(s) were also removed.")):alert("Developer deleted successfully!"),a()):alert("Failed to delete developer: ".concat(r.message))}catch(e){alert("An error occurred while deleting the developer. Please try again.")}},W=e=>{v(e),f("profile")},R=e=>{w({...j,logo:e}),h(!1)};return"profile"===g&&y?(0,r.jsx)(m,{developer:y,onBack:()=>{f("list"),v(null)},onUpdate:a}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Developers Management"}),(0,r.jsx)("p",{className:"text-brand-gray",children:"Manage real estate developers and companies"})]}),(0,r.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!0),className:"flex items-center space-x-2 px-6 py-3 bg-brand-green hover:bg-brand-green/80 text-white rounded-lg transition-colors",children:[(0,r.jsx)("i",{className:"ri-add-line text-xl"}),(0,r.jsx)("span",{children:"Add Developer"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,t)=>(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10 hover:border-brand-green/30 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-lg flex items-center justify-center overflow-hidden relative",children:e.logo?(0,r.jsx)(d.default,{src:e.logo,alt:e.name,fill:!0,sizes:"64px",className:"object-cover"}):(0,r.jsx)("i",{className:"ri-building-line text-2xl text-brand-green"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Active"===e.status?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"),children:e.status}),e.established&&(0,r.jsxs)("span",{className:"text-brand-gray text-sm",children:["Est. ",e.established]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[e.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-map-pin-line"}),(0,r.jsx)("span",{className:"text-sm",children:e.location})]}),e.projects_count>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-building-2-line"}),(0,r.jsxs)("span",{className:"text-sm",children:[e.projects_count," Projects"]})]}),e.website&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-global-line"}),(0,r.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:text-brand-green transition-colors",children:"Website"})]}),e.email&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-mail-line"}),(0,r.jsx)("span",{className:"text-sm",children:e.email})]}),e.phone&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-brand-gray",children:[(0,r.jsx)("i",{className:"ri-phone-line"}),(0,r.jsx)("span",{className:"text-sm",children:e.phone})]})]}),(0,r.jsx)("p",{className:"text-brand-gray text-sm mb-4 line-clamp-3",children:e.description}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>W(e),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-green-500/20 text-green-300 hover:bg-green-500/30 rounded-lg transition-colors",children:[(0,r.jsx)("i",{className:"ri-eye-line"}),(0,r.jsx)("span",{children:"Profile"})]}),(0,r.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>V(e),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-500/20 text-blue-300 hover:bg-blue-500/30 rounded-lg transition-colors",children:[(0,r.jsx)("i",{className:"ri-edit-line"}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(e),disabled:F,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-500/20 text-red-300 hover:bg-red-500/30 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors",children:[F?(0,r.jsx)("i",{className:"ri-loader-4-line animate-spin"}):(0,r.jsx)("i",{className:"ri-delete-bin-line"}),(0,r.jsx)("span",{children:"Delete"})]})]})]},e.id))}),0===t.length&&(0,r.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[(0,r.jsx)("i",{className:"ri-building-line text-6xl text-brand-gray mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"No Developers Found"}),(0,r.jsx)("p",{className:"text-brand-gray mb-6",children:"Start by adding your first developer"}),(0,r.jsx)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!0),className:"px-6 py-3 bg-brand-green hover:bg-brand-green/80 text-white rounded-lg transition-colors",children:"Add First Developer"})]}),(0,r.jsx)(o.M,{children:i&&(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",onClick:()=>n(!1),children:(0,r.jsxs)(l.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-brand-dark/90 backdrop-blur-lg rounded-2xl p-8 border border-white/10 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-white",children:c?"Edit Developer":"Add New Developer"}),(0,r.jsx)("button",{onClick:()=>n(!1),className:"text-brand-gray hover:text-white transition-colors",children:(0,r.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,r.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Company Name *"}),(0,r.jsx)("input",{type:"text",value:j.name||"",onChange:e=>{let t=e.target.value;w({...j,name:t,slug:I(t)}),N.name&&k({...N,name:""})},className:"w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-brand-gray focus:outline-none ".concat(N.name?"border-red-500 focus:border-red-500":"border-white/20 focus:border-brand-green"),placeholder:"Enter company name",required:!0}),N.name&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:N.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Slug"}),(0,r.jsx)("input",{type:"text",value:j.slug||"",onChange:e=>w({...j,slug:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"company-slug"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Company Logo"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-white/10 rounded-lg flex items-center justify-center overflow-hidden relative",children:j.logo?(0,r.jsx)(d.default,{src:j.logo,alt:"Logo preview",fill:!0,sizes:"80px",className:"object-cover"}):(0,r.jsx)("i",{className:"ri-image-line text-2xl text-brand-gray"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("input",{type:"text",value:j.logo||"",onChange:e=>w({...j,logo:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green mb-2",placeholder:"Enter logo URL or select from gallery"}),(0,r.jsx)("button",{type:"button",onClick:()=>h(!0),className:"px-4 py-2 bg-brand-green/20 text-brand-green hover:bg-brand-green/30 rounded-lg transition-colors",children:"Select from Gallery"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:j.location||"",onChange:e=>w({...j,location:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"City, Country"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Established Year"}),(0,r.jsx)("input",{type:"text",value:j.established||"",onChange:e=>w({...j,established:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"2020"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:j.email||"",onChange:e=>{w({...j,email:e.target.value}),N.email&&k({...N,email:""})},className:"w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-brand-gray focus:outline-none ".concat(N.email?"border-red-500 focus:border-red-500":"border-white/20 focus:border-brand-green"),placeholder:"contact@company.com"}),N.email&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:N.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:j.phone||"",onChange:e=>{w({...j,phone:e.target.value}),N.phone&&k({...N,phone:""})},className:"w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-brand-gray focus:outline-none ".concat(N.phone?"border-red-500 focus:border-red-500":"border-white/20 focus:border-brand-green"),placeholder:"+1 (555) 123-4567"}),N.phone&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:N.phone})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Website"}),(0,r.jsx)("input",{type:"url",value:j.website||"",onChange:e=>{w({...j,website:e.target.value}),N.website&&k({...N,website:""})},className:"w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-brand-gray focus:outline-none ".concat(N.website?"border-red-500 focus:border-red-500":"border-white/20 focus:border-brand-green"),placeholder:"https://company.com"}),N.website&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:N.website})]}),(j.projects_count&&j.projects_count>0||c)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Projects Count"}),(0,r.jsx)("input",{type:"number",value:j.projects_count||"",onChange:e=>w({...j,projects_count:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Enter project count (optional)",min:"0"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Status"}),(0,r.jsxs)("select",{value:j.status||"Active",onChange:e=>w({...j,status:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-brand-green",children:[(0,r.jsx)("option",{value:"Active",children:"Active"}),(0,r.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Description *"}),(0,r.jsx)("textarea",{value:j.description||"",onChange:e=>{w({...j,description:e.target.value}),N.description&&k({...N,description:""})},className:"w-full px-4 py-3 bg-white/10 border rounded-lg text-white placeholder-brand-gray focus:outline-none ".concat(N.description?"border-red-500 focus:border-red-500":"border-white/20 focus:border-brand-green"),placeholder:"Enter company description...",rows:4,required:!0}),N.description&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:N.description})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)(l.E.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!1),className:"flex-1 px-6 py-3 bg-white/10 text-white hover:bg-white/20 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)(l.E.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:C,className:"flex-1 px-6 py-3 bg-brand-green hover:bg-brand-green/80 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),c?"Updating...":"Creating..."]}):c?"Update Developer":"Create Developer"})]})]})]})})}),(0,r.jsx)(o.M,{children:u&&(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",onClick:()=>h(!1),children:(0,r.jsxs)(l.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-brand-dark/90 backdrop-blur-lg rounded-2xl p-8 border border-white/10 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Select Logo"}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"text-brand-gray hover:text-white transition-colors",children:(0,r.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:b.map((e,t)=>(0,r.jsx)(l.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(e),className:"aspect-square bg-white/10 rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-brand-green transition-all",children:e&&""!==e.trim()?(0,r.jsx)(d.default,{src:e,alt:"Option ".concat(t+1),fill:!0,sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw",className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"No Image"})},t))}),0===b.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("i",{className:"ri-image-line text-4xl text-brand-gray mb-4"}),(0,r.jsx)("p",{className:"text-brand-gray",children:"No images available"})]})]})})}),(0,r.jsx)(o.M,{children:D&&E&&(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",onClick:()=>S(!1),children:(0,r.jsx)(l.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-brand-dark/90 backdrop-blur-lg rounded-2xl p-8 border border-white/10 w-full max-w-md",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,r.jsx)("i",{className:"ri-delete-bin-line text-red-600 text-xl"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Delete Developer"}),(0,r.jsxs)("p",{className:"text-brand-gray mb-4",children:["Are you sure you want to delete ",(0,r.jsx)("span",{className:"font-semibold text-white",children:E.name}),"?"]}),F?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-green"}),(0,r.jsx)("span",{className:"ml-2 text-brand-gray",children:"Checking associated projects..."})]}):T.length>0&&(0,r.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 mb-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-alert-line text-yellow-500 text-lg mr-2"}),(0,r.jsxs)("p",{className:"text-yellow-200 text-sm",children:["This developer has ",T.length," associated project",1!==T.length?"s":"",". Deleting will remove these associations."]})]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(l.E.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>S(!1),className:"flex-1 px-4 py-2 bg-white/10 text-white hover:bg-white/20 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)(l.E.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(E.id),disabled:F,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]})]})})})})]})}var u=a(8059),h=a.n(u);function b(e){let{mediaFiles:t,onSelect:a,onUpload:l,onClose:i}=e,[n,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),m=async e=>{if(!e.type.startsWith("image/")){alert("Please select an image file");return}o(!0);try{await l(e)}catch(e){alert("Failed to upload image. Please try again.")}finally{o(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-black/90 backdrop-blur-xl border border-amber-500/30 rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-amber-500/20",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg sm:text-2xl font-bold text-white font-cormorant",children:"Select or Upload Image"}),(0,r.jsx)("p",{className:"text-amber-400/70 mt-1 text-sm sm:text-base",children:"Choose from existing media or upload new images"})]}),(0,r.jsx)("button",{onClick:i,className:"text-amber-400 hover:text-white transition-colors text-xl sm:text-2xl font-bold",children:"✕"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,r.jsx)("div",{className:"border-2 border-dashed rounded-xl p-4 sm:p-8 mb-6 text-center transition-all ".concat(d?"border-amber-500 bg-amber-500/10":"border-amber-500/30 hover:border-amber-500/50"),onDrop:e=>{e.preventDefault(),c(!1);let t=Array.from(e.dataTransfer.files).find(e=>e.type.startsWith("image/"));t&&m(t)},onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:e=>{e.preventDefault(),c(!1)},children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-3 sm:space-y-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-amber-500/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium mb-1 sm:mb-2 text-sm sm:text-base",children:n?"Uploading...":"Drag and drop images here, or click to browse"}),(0,r.jsx)("p",{className:"text-amber-400/70 text-xs sm:text-sm",children:"Supports JPG, PNG, GIF, WebP up to 10MB"})]}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&m(a)},className:"hidden",id:"file-upload",disabled:n}),(0,r.jsx)("label",{htmlFor:"file-upload",className:"px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-medium cursor-pointer transition-all text-sm sm:text-base ".concat(n?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 text-black hover:shadow-lg"),children:n?"Uploading...":"Browse Files"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 font-montserrat",children:["Existing Media (",t.length,")"]}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,r.jsx)("div",{className:"text-4xl sm:text-6xl mb-3 sm:mb-4",children:"\uD83D\uDDBC️"}),(0,r.jsx)("p",{className:"text-amber-400/70 text-sm sm:text-base",children:"No media files found. Upload your first image above."})]}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 sm:gap-4",children:t.map(e=>(0,r.jsxs)("div",{onClick:()=>a(e.file_path),className:"relative group cursor-pointer rounded-lg overflow-hidden border border-amber-500/20 hover:border-amber-500 transition-all hover:scale-105",children:[(0,r.jsx)("div",{className:"aspect-square",children:(0,r.jsx)("img",{src:e.file_path,alt:e.alt_text||e.filename,className:"w-full h-full object-cover",loading:"lazy"})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/60 transition-all flex items-center justify-center",children:(0,r.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-center",children:[(0,r.jsx)("div",{className:"bg-amber-500 text-black px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Select"}),(0,r.jsx)("p",{className:"text-white text-xs truncate px-1 sm:px-2",children:e.filename})]})})]},e.id))})]})]})]})})}let p=[{name:"Playfair Display",value:"Playfair Display, serif",category:"Elegant Serif"},{name:"Cormorant Garamond",value:"Cormorant Garamond, serif",category:"Luxury Serif"},{name:"Crimson Text",value:"Crimson Text, serif",category:"Classic Serif"},{name:"Libre Baskerville",value:"Libre Baskerville, serif",category:"Modern Serif"}],g=[{name:"Montserrat",value:"Montserrat, sans-serif",category:"Modern Sans"},{name:"Source Sans Pro",value:"Source Sans Pro, sans-serif",category:"Clean Sans"},{name:"Lato",value:"Lato, sans-serif",category:"Friendly Sans"},{name:"Open Sans",value:"Open Sans, sans-serif",category:"Versatile Sans"}],f=[{name:"Inter",value:"Inter, sans-serif",category:"Reading Sans"},{name:"Source Serif Pro",value:"Source Serif Pro, serif",category:"Reading Serif"},{name:"Merriweather",value:"Merriweather, serif",category:"Web Serif"},{name:"PT Serif",value:"PT Serif, serif",category:"Elegant Reading"}];function y(e){var t;let{onClose:a,onSave:l,editingArticle:i,mediaFiles:n}=e,[o,d]=(0,s.useState)({title:(null==i?void 0:i.title)||"",slug:(null==i?void 0:i.slug)||"",excerpt:(null==i?void 0:i.excerpt)||"",content:(null==i?void 0:i.content)||"",featured_image:(null==i?void 0:i.featured_image)||"",status:(null==i?void 0:i.status)||"draft",tags:(null==i?void 0:i.tags)||[],meta_title:(null==i?void 0:i.meta_title)||"",meta_description:(null==i?void 0:i.meta_description)||"",author_id:(null==i?void 0:i.author_id)||1}),[c,m]=(0,s.useState)({content:o.content||"",selection:null}),[x,u]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[C,_]=(0,s.useState)(!1),[D,S]=(0,s.useState)(0),[E,P]=(0,s.useState)("Inter, sans-serif"),T=(0,s.useRef)(null);(0,s.useRef)(null);let A=n.filter(e=>{var t;return null===(t=e.mime_type)||void 0===t?void 0:t.startsWith("image/")}),F=e=>{let t=T.current;if(t){switch(t.focus(),e){case"bold":document.execCommand("bold",!1);break;case"italic":document.execCommand("italic",!1);break;case"underline":document.execCommand("underline",!1);break;case"strikethrough":document.execCommand("strikeThrough",!1);break;case"link":let a=prompt("Enter URL:");a&&document.execCommand("createLink",!1,a);break;case"image":u(!0);break;case"formula":v(!0);break;case"quote":M();break;case"code":I();break;case"table":L();break;case"h1":case"h2":case"h3":case"h4":case"p":document.execCommand("formatBlock",!1,e);break;case"bulletlist":document.execCommand("insertUnorderedList",!1);break;case"numberlist":document.execCommand("insertOrderedList",!1);break;case"alignleft":document.execCommand("justifyLeft",!1);break;case"aligncenter":document.execCommand("justifyCenter",!1);break;case"alignright":document.execCommand("justifyRight",!1)}V()}},L=()=>{document.execCommand("insertHTML",!1,'\n      <table class="w-full border-collapse border border-amber-500/30 my-4">\n        <thead>\n          <tr class="bg-amber-500/10">\n            <th class="border border-amber-500/30 px-4 py-2 text-amber-300">Header 1</th>\n            <th class="border border-amber-500/30 px-4 py-2 text-amber-300">Header 2</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td class="border border-amber-500/30 px-4 py-2 text-white">Cell 1</td>\n            <td class="border border-amber-500/30 px-4 py-2 text-white">Cell 2</td>\n          </tr>\n        </tbody>\n      </table>\n    '),V()},I=()=>{document.execCommand("insertHTML",!1,'<pre class="bg-gray-800 border border-gray-600 rounded-lg p-4 my-4 overflow-x-auto"><code class="text-green-400 font-mono text-sm">// Your code here\nconsole.log(\'Hello, World!\');</code></pre>'),V()},M=()=>{let e=window.getSelection();if(e&&e.rangeCount>0){let t=e.getRangeAt(0),a=document.createElement("blockquote");if(a.className="border-l-4 border-amber-500 pl-4 italic text-amber-100 my-4 bg-black/20 py-2",e.toString())try{t.surroundContents(a)}catch(e){a.appendChild(t.extractContents()),t.insertNode(a)}else a.textContent="Enter your quote here...",t.insertNode(a)}V()},U=e=>{document.execCommand("insertHTML",!1,'<img src="'.concat(e,'" alt="Article image" class="max-w-full h-auto rounded-lg shadow-lg my-4" />')),u(!1),V()},B=async e=>{let t=new FormData;t.append("file",e),t.append("alt_text","Article image: ".concat(e.name)),t.append("uploaded_by","1");let a=await fetch("/api/admin/media",{method:"POST",body:t});if(!a.ok)throw Error("Failed to upload ".concat(e.name));let r=await a.json();if(r.success&&r.data)return U(r.data.url||"/uploads/".concat(r.data.filename)),r.data;throw Error("Upload failed")},V=()=>{let e=T.current;if(e){let t=e.innerHTML;m(e=>({...e,content:t})),d(e=>({...e,content:t}))}},z=()=>{var e;!N.trim()||(null===(e=o.tags)||void 0===e?void 0:e.includes(N.trim()))||(d(e=>({...e,tags:[...e.tags||[],N.trim()]})),k(""))},O=e=>{d(t=>{var a;return{...t,tags:(null===(a=t.tags)||void 0===a?void 0:a.filter(t=>t!==e))||[]}})},W=async()=>{try{await l(o)}catch(e){}};return(0,s.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),F("bold");break;case"i":e.preventDefault(),F("italic");break;case"u":e.preventDefault(),F("underline");break;case"s":e.preventDefault(),W()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o]),(0,r.jsxs)("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-900 via-black to-gray-900 z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 opacity-5",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-400/20 via-transparent to-amber-600/20"}),(0,r.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),\n                           radial-gradient(circle at 75% 75%, rgba(255, 215, 0, 0.1) 0%, transparent 50%)"}})]}),(0,r.jsxs)("div",{className:"relative h-full flex flex-col",children:[(0,r.jsx)("div",{className:"bg-black/80 backdrop-blur-xl border-b border-amber-500/20 px-4 sm:px-8 py-4 sm:py-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("button",{onClick:a,className:"text-amber-400 hover:text-amber-300 transition-colors p-1 sm:p-2",children:"← Back to Admin"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)("button",{onClick:W,className:"bg-amber-500 hover:bg-amber-600 text-black px-3 sm:px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base",children:"Save Draft"}),(0,r.jsx)("button",{onClick:()=>{d(e=>({...e,status:"published"})),W()},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base",children:"Publish"})]})]})}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-80 bg-black/60 backdrop-blur-xl border-r border-amber-500/20 p-4 sm:p-6 overflow-y-auto",children:[(0,r.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-amber-400 mb-4 sm:mb-6",children:"Add New Article"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 mb-6 sm:mb-8",children:"Craft your story with luxury and precision"}),(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Title"}),(0,r.jsx)("input",{type:"text",value:o.title,onChange:e=>d(t=>({...t,title:e.target.value})),className:"w-full bg-black/40 border border-amber-500/30 rounded-lg px-3 sm:px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-amber-500 text-sm sm:text-base",placeholder:"Enter article title..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Slug"}),(0,r.jsx)("input",{type:"text",value:o.slug,onChange:e=>d(t=>({...t,slug:e.target.value})),className:"w-full bg-black/40 border border-amber-500/30 rounded-lg px-3 sm:px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-amber-500 text-sm sm:text-base",placeholder:"article-slug"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Excerpt"}),(0,r.jsx)("textarea",{value:o.excerpt,onChange:e=>d(t=>({...t,excerpt:e.target.value})),className:"w-full bg-black/40 border border-amber-500/30 rounded-lg px-3 sm:px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-amber-500 resize-none text-sm sm:text-base",rows:3,placeholder:"Brief description..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Featured Image"}),(0,r.jsx)("button",{onClick:()=>u(!0),className:"w-full bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/30 rounded-lg px-3 sm:px-4 py-2 text-amber-300 transition-colors text-sm sm:text-base",children:o.featured_image?"Change Image":"Select Image"}),o.featured_image&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:o.featured_image,alt:"Featured",className:"w-full h-20 object-cover rounded"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:null===(t=o.tags)||void 0===t?void 0:t.map((e,t)=>(0,r.jsxs)("span",{className:"bg-amber-500/20 text-amber-300 px-2 py-1 rounded text-xs flex items-center gap-1",children:[e,(0,r.jsx)("button",{onClick:()=>O(e),className:"hover:text-red-400 transition-colors",children:"✕"})]},t))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(),className:"flex-1 bg-black/40 border border-amber-500/30 rounded px-2 py-1 text-white placeholder-gray-400 focus:outline-none focus:border-amber-500 text-xs sm:text-sm",placeholder:"Add tag..."}),(0,r.jsx)("button",{onClick:z,className:"bg-amber-500 hover:bg-amber-600 text-black px-3 py-1 rounded font-medium transition-colors text-xs sm:text-sm",children:"Add"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Meta Title"}),(0,r.jsx)("input",{type:"text",value:o.meta_title,onChange:e=>d(t=>({...t,meta_title:e.target.value})),className:"w-full bg-black/40 border border-amber-500/30 rounded-lg px-3 sm:px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-amber-500 text-sm sm:text-base",placeholder:"SEO title..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-amber-300 mb-2",children:"Meta Description"}),(0,r.jsx)("textarea",{value:o.meta_description,onChange:e=>d(t=>({...t,meta_description:e.target.value})),className:"w-full bg-black/40 border border-amber-500/30 rounded-lg px-3 sm:px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-amber-500 resize-none text-sm sm:text-base",rows:3,placeholder:"SEO description..."})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-black/40 backdrop-blur-xl border-b border-amber-500/20 p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 text-xs sm:text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>F("bold"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Bold (Ctrl+B)",children:"\uD835\uDC01"}),(0,r.jsx)("button",{onClick:()=>F("italic"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Italic (Ctrl+I)",children:"\uD835\uDC3C"}),(0,r.jsx)("button",{onClick:()=>F("underline"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Underline (Ctrl+U)",children:"\uD835\uDC14"}),(0,r.jsx)("button",{onClick:()=>F("strikethrough"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Strikethrough",children:"\uD835\uDC12"})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-amber-500/30 mx-2"}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:(0,r.jsxs)("select",{onChange:e=>F(e.target.value),className:"bg-black/60 border border-amber-500/30 rounded px-2 py-1 text-amber-300 text-xs focus:outline-none focus:border-amber-500",defaultValue:"",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Headings"}),(0,r.jsx)("option",{value:"h1",children:"Heading 1"}),(0,r.jsx)("option",{value:"h2",children:"Heading 2"}),(0,r.jsx)("option",{value:"h3",children:"Heading 3"}),(0,r.jsx)("option",{value:"h4",children:"Heading 4"}),(0,r.jsx)("option",{value:"p",children:"Paragraph"})]})}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:(0,r.jsxs)("select",{value:E,onChange:e=>{P(e.target.value),T.current&&(T.current.style.fontFamily=e.target.value)},className:"bg-black/60 border border-amber-500/30 rounded px-2 py-1 text-amber-300 text-xs focus:outline-none focus:border-amber-500",children:[(0,r.jsx)("optgroup",{label:"Title Fonts",children:p.map(e=>(0,r.jsx)("option",{value:e.value,children:e.name},e.name))}),(0,r.jsx)("optgroup",{label:"Subtitle Fonts",children:g.map(e=>(0,r.jsx)("option",{value:e.value,children:e.name},e.name))}),(0,r.jsx)("optgroup",{label:"Body Fonts",children:f.map(e=>(0,r.jsx)("option",{value:e.value,children:e.name},e.name))})]})}),(0,r.jsx)("div",{className:"w-px h-6 bg-amber-500/30 mx-2"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>F("bulletlist"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Bullet List",children:"•"}),(0,r.jsx)("button",{onClick:()=>F("numberlist"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Numbered List",children:"1."})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-amber-500/30 mx-2"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>F("image"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Insert Image",children:"\uD83D\uDCF7"}),(0,r.jsx)("button",{onClick:()=>F("link"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Insert Link",children:"\uD83D\uDD17"}),(0,r.jsx)("button",{onClick:()=>F("formula"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Insert Formula",children:"∑"}),(0,r.jsx)("button",{onClick:()=>F("quote"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Block Quote",children:"\uD83D\uDCDD"}),(0,r.jsx)("button",{onClick:()=>F("code"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Code Block",children:"\uD83D\uDCCB"}),(0,r.jsx)("button",{onClick:()=>F("table"),className:"p-1.5 sm:p-2 hover:bg-amber-500/20 text-amber-300 hover:text-amber-200 rounded transition-colors text-xs sm:text-sm",title:"Insert Table",children:"\uD83D\uDCCA"})]})]})}),(0,r.jsxs)("div",{className:"jsx-4a953d049eb7f3ed flex-1 p-4 sm:p-8 overflow-y-auto",children:[(0,r.jsx)("div",{ref:T,contentEditable:!0,style:{fontFamily:E},onInput:V,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:o.content||""},className:"jsx-4a953d049eb7f3ed prose prose-invert max-w-none min-h-[500px] focus:outline-none text-white text-sm sm:text-base leading-relaxed"}),(0,r.jsx)(h(),{id:"4a953d049eb7f3ed",children:'[contenteditable].jsx-4a953d049eb7f3ed{line-height:1.8}[contenteditable].jsx-4a953d049eb7f3ed h1.jsx-4a953d049eb7f3ed{font-size:2.5rem;font-weight:700;color:#fbbf24;margin:2rem 0 1rem 0;font-family:"Playfair Display",serif}[contenteditable].jsx-4a953d049eb7f3ed h2.jsx-4a953d049eb7f3ed{font-size:2rem;font-weight:600;color:#fbbf24;margin:1.5rem 0 1rem 0;font-family:"Playfair Display",serif}[contenteditable].jsx-4a953d049eb7f3ed h3.jsx-4a953d049eb7f3ed{font-size:1.5rem;font-weight:600;color:#fbbf24;margin:1.5rem 0 .75rem 0}[contenteditable].jsx-4a953d049eb7f3ed h4.jsx-4a953d049eb7f3ed{font-size:1.25rem;font-weight:600;color:#fbbf24;margin:1.25rem 0 .75rem 0}[contenteditable].jsx-4a953d049eb7f3ed p.jsx-4a953d049eb7f3ed{margin:1rem 0;color:#e5e7eb}[contenteditable].jsx-4a953d049eb7f3ed blockquote.jsx-4a953d049eb7f3ed{border-left:4px solid#f59e0b;padding-left:1rem;font-style:italic;color:#fef3c7;margin:1rem 0;background:rgba(0,0,0,.2);padding:.5rem 0 .5rem 1rem}[contenteditable].jsx-4a953d049eb7f3ed code.jsx-4a953d049eb7f3ed{background:#374151;color:#10b981;padding:.125rem .25rem;-webkit-border-radius:.25rem;-moz-border-radius:.25rem;border-radius:.25rem;font-family:"Courier New",monospace}[contenteditable].jsx-4a953d049eb7f3ed pre.jsx-4a953d049eb7f3ed{background:#1f2937;border:1px solid#4b5563;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;padding:1rem;margin:1rem 0;overflow-x:auto}[contenteditable].jsx-4a953d049eb7f3ed table.jsx-4a953d049eb7f3ed{width:100%;border-collapse:collapse;margin:1rem 0}[contenteditable].jsx-4a953d049eb7f3ed th.jsx-4a953d049eb7f3ed,[contenteditable].jsx-4a953d049eb7f3ed td.jsx-4a953d049eb7f3ed{border:1px solid rgba(245,158,11,.3);padding:.75rem;text-align:left}[contenteditable].jsx-4a953d049eb7f3ed th.jsx-4a953d049eb7f3ed{background:rgba(245,158,11,.1);color:#fbbf24;font-weight:600}[contenteditable].jsx-4a953d049eb7f3ed img.jsx-4a953d049eb7f3ed{max-width:100%;height:auto;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;-webkit-box-shadow:0 10px 25px rgba(0,0,0,.3);-moz-box-shadow:0 10px 25px rgba(0,0,0,.3);box-shadow:0 10px 25px rgba(0,0,0,.3);margin:1rem 0}[contenteditable].jsx-4a953d049eb7f3ed ul.jsx-4a953d049eb7f3ed,[contenteditable].jsx-4a953d049eb7f3ed ol.jsx-4a953d049eb7f3ed{margin:1rem 0;padding-left:2rem}[contenteditable].jsx-4a953d049eb7f3ed li.jsx-4a953d049eb7f3ed{margin:.5rem 0;line-height:1.6}'})]})]})]})]}),x&&(0,r.jsx)(b,{mediaFiles:A,onSelect:e=>{U(e),u(!1)},onUpload:B,onClose:()=>u(!1)}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-60 flex items-center justify-center p-4",onClick:()=>v(!1),children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-gray-700 w-full max-w-3xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Mathematical Formula Editor"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-400",children:"Create beautiful mathematical expressions using LaTeX syntax"})]}),(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Formula (LaTeX Syntax)"}),(0,r.jsx)("textarea",{value:j,onChange:e=>w(e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 sm:px-4 py-2 sm:py-3 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 font-mono text-sm sm:text-base",rows:4,placeholder:"Enter LaTeX formula... e.g., \\\\frac{a}{b} or x^2 + y^2 = z^2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Quick Templates"}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[{label:"Fraction",formula:"\\frac{a}{b}"},{label:"Square Root",formula:"\\sqrt{x}"},{label:"Power",formula:"x^{n}"},{label:"Subscript",formula:"x_{i}"},{label:"Sum",formula:"\\sum_{i=1}^{n} x_i"},{label:"Integral",formula:"\\int_{a}^{b} f(x) dx"},{label:"Limit",formula:"\\lim_{x \\to \\infty} f(x)"},{label:"Matrix",formula:"\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}"}].map(e=>(0,r.jsxs)("button",{onClick:()=>w(e.formula),className:"text-left p-2 sm:p-3 bg-amber-500/10 hover:bg-amber-500/20 border border-amber-500/20 rounded text-amber-300 text-xs sm:text-sm transition-colors hover:border-amber-500/40",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-gray-400 font-mono mt-1 break-all",children:e.formula})]},e.label))})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{v(!1),w("")},className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{j.trim()&&(document.execCommand("insertHTML",!1,'<span class="inline-block bg-blue-50 border border-blue-200 rounded px-2 py-1 mx-1 font-mono text-blue-800">'.concat(j,"</span>")),w(""),v(!1),V())},disabled:!j.trim(),className:"bg-amber-500 hover:bg-amber-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-black px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base",children:"Insert Formula"})]})]})]})})]})}function v(e){let{articles:t,mediaFiles:a,onUpdate:i}=e,[n,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[u,h]=(0,s.useState)(""),[b,p]=(0,s.useState)("all"),g=t.filter(e=>{var t,a;let r=e.title.toLowerCase().includes(u.toLowerCase())||null!==(a=null===(t=e.excerpt)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))&&void 0!==a&&a,s="all"===b||e.status===b;return r&&s}),f=async e=>{try{var t;let a=m?"/api/admin/articles/".concat(m.id):"/api/admin/articles",r={...e,slug:e.slug||(e=>{let t=e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();return m?t:"".concat(t,"-").concat(Date.now())})(e.title||""),published_at:"published"!==e.status||m?e.published_at:new Date().toISOString(),read_time:Math.ceil(((null===(t=e.content)||void 0===t?void 0:t.length)||0)/200)},s=await fetch(a,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await s.json();if(s.ok)c(!1),x(null),i();else throw Error(l.message||"Failed to save article")}catch(e){throw e}},v=e=>{x(e),c(!0)},j=async e=>{if(confirm("Are you sure you want to delete this article?"))try{let t=await fetch("/api/admin/articles/".concat(e),{method:"DELETE"});if(t.ok)alert("Article deleted successfully!"),i();else{let e=await t.json();alert("Error deleting article: ".concat(e.message||"Unknown error"))}}catch(e){alert("Error deleting article. Please try again.")}};return n?(0,r.jsx)(y,{onClose:()=>c(!1),onSave:f,editingArticle:m,mediaFiles:a}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Articles Management"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create and manage blog articles with SEO optimization"})]}),(0,r.jsxs)("button",{onClick:()=>{x(null),c(!0)},className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("span",{className:"text-lg",children:"➕"}),"Add New Article"]})]}),(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6 border border-gray-200 dark:border-gray-600",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"Search articles...",value:u,onChange:e=>h(e.target.value),className:"w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,r.jsxs)("select",{value:b,onChange:e=>p(e.target.value),className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"published",children:"Published"}),(0,r.jsx)("option",{value:"archived",children:"Archived"})]})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,r.jsx)(o.M,{children:g.map(e=>(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200",children:[e.featured_image&&(0,r.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-gray-700 overflow-hidden relative",children:(0,r.jsx)(d.default,{src:e.featured_image,alt:e.title,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("published"===e.status?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"draft"===e.status?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),e.featured&&(0,r.jsx)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:"Featured"})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3",children:e.excerpt}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-4",children:[(0,r.jsxs)("span",{children:["By ",e.author]}),(0,r.jsxs)("span",{children:[e.read_time," min read"]})]}),e.tags&&e.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.tags.slice(0,3).map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:e},e)),e.tags.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:["+",e.tags.length-3]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>v(e),className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>{var t;return j((null===(t=e.id)||void 0===t?void 0:t.toString())||"")},className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:"\uD83D\uDDD1️"})]})]})]},e.id))})}),0===g.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No articles found"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:u||"all"!==b?"Try adjusting your search or filters":"Create your first article to get started"})]})]})}let j=e=>{if(!e)return"";if(e.startsWith("/api/media/"))return e;if(e.startsWith("/media/"))return e.replace("/media/","/api/media/");if(e.startsWith("/uploads/"))return e.replace("/uploads/","/api/media/");let t=e.startsWith("/")?e.substring(1):e;return"/api/media/".concat(t)};function w(e){let{mediaFiles:t,onUpdate:a}=e,[i,n]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[x,u]=(0,s.useState)(""),[h,b]=(0,s.useState)("all"),[p,g]=(0,s.useState)("grid"),[f,y]=(0,s.useState)("date"),[v,w]=(0,s.useState)("desc"),[N,k]=(0,s.useState)(0),[C,_]=(0,s.useState)(!1),[D,S]=(0,s.useState)([]),[E,P]=(0,s.useState)(!1),[T,A]=(0,s.useState)({alt_text:"",uploaded_by:1}),F=(0,s.useRef)(null),L=(0,s.useRef)(null),I=(t||[]).filter(e=>{var t,a,r,s,l,i,n;let o=e.original_name.toLowerCase().includes(x.toLowerCase())||e.filename.toLowerCase().includes(x.toLowerCase())||e.alt_text&&e.alt_text.toLowerCase().includes(x.toLowerCase()),d="all"===h||"image"===h&&(null===(t=e.mime_type)||void 0===t?void 0:t.startsWith("image/"))||"video"===h&&(null===(a=e.mime_type)||void 0===a?void 0:a.startsWith("video/"))||"document"===h&&((null===(r=e.mime_type)||void 0===r?void 0:r.includes("pdf"))||(null===(s=e.mime_type)||void 0===s?void 0:s.includes("document"))||(null===(l=e.mime_type)||void 0===l?void 0:l.includes("text")))||"archive"===h&&((null===(i=e.mime_type)||void 0===i?void 0:i.includes("zip"))||(null===(n=e.mime_type)||void 0===n?void 0:n.includes("rar")));return o&&d}).sort((e,t)=>{let a=0;switch(f){case"name":a=e.original_name.localeCompare(t.original_name);break;case"size":a=e.file_size-t.file_size;break;default:a=new Date(e.created_at||0).getTime()-new Date(t.created_at||0).getTime()}return"asc"===v?a:-a}),M=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},U=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?P(!0):"dragleave"===e.type&&P(!1)},[]),B=(0,s.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),P(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){let t=Array.from(e.dataTransfer.files);S(t),W(t)}},[]),V=()=>{var e;null===(e=F.current)||void 0===e||e.click()},z=e=>e.startsWith("image/")?"Image":e.startsWith("video/")?"Video":e.includes("pdf")?"PDF":e.includes("document")||e.includes("word")?"Document":e.includes("spreadsheet")||e.includes("excel")?"Spreadsheet":e.includes("presentation")||e.includes("powerpoint")?"Presentation":e.includes("zip")||e.includes("rar")?"Archive":e.includes("text")?"Text":"File",O=(e,t)=>(null==e?void 0:e.startsWith("image/"))?"ri-image-line":(null==e?void 0:e.startsWith("video/"))?"ri-video-line":"application/pdf"===e||t.endsWith(".pdf")?"ri-file-pdf-line":(null==e?void 0:e.includes("word"))||t.endsWith(".doc")||t.endsWith(".docx")?"ri-file-word-line":(null==e?void 0:e.includes("excel"))||t.endsWith(".xls")||t.endsWith(".xlsx")?"ri-file-excel-line":(null==e?void 0:e.includes("powerpoint"))||t.endsWith(".ppt")||t.endsWith(".pptx")?"ri-file-ppt-line":"ri-file-line",W=async e=>{let t=e||D;if(t&&Array.isArray(t)&&0!==t.length){_(!0),k(0);try{let e=t.map(async(e,a)=>{var r;let s=new FormData;s.append("file",e),s.append("alt_text",T.alt_text||e.name),s.append("uploaded_by",(null===(r=T.uploaded_by)||void 0===r?void 0:r.toString())||"1");let l=await fetch("/api/admin/media",{method:"POST",body:s});if(!l.ok){let t=await l.json();throw Error(t.message||"Failed to upload ".concat(e.name))}let i=await l.json(),n=(a+1)/t.length*100;return k(n),i});await Promise.all(e),S([]),A({alt_text:"",uploaded_by:1}),a(),alert("Successfully uploaded ".concat(t.length," file(s)!"))}catch(e){alert("Failed to upload files: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{_(!1),k(0)}}},R=e=>{m(e),A({alt_text:e.alt_text||"",uploaded_by:e.uploaded_by}),n(!0)},q=async e=>{if(e.preventDefault(),c)try{let e=await fetch("/api/admin/media/".concat(c.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(e.ok)alert("Media file updated successfully!"),n(!1),m(null),a();else{let t=await e.json();alert("Error: ".concat(t.message||"Failed to update media file"))}}catch(e){alert("Error updating media file. Please try again.")}},H=async e=>{if(confirm("Are you sure you want to delete this media file?"))try{let t=await fetch("/api/admin/media/".concat(e),{method:"DELETE"});if(t.ok)alert("Media file deleted successfully!"),a();else{let e=await t.json();alert("Error deleting media file: ".concat(e.message||"Unknown error"))}}catch(e){alert("Error deleting media file. Please try again.")}},J=e=>{navigator.clipboard.writeText(e),alert("URL copied to clipboard!")};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Media Library"}),(0,r.jsxs)("p",{className:"text-brand-gray mt-1",children:[I.length," file",1!==I.length?"s":"","all"!==h&&" • ".concat(h," files")]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)("div",{className:"flex bg-white/10 rounded-lg p-1",children:[(0,r.jsxs)("button",{onClick:()=>g("grid"),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat("grid"===p?"bg-brand-green text-white shadow-sm":"text-brand-gray hover:text-white"),children:[(0,r.jsx)("i",{className:"ri-grid-line mr-1"})," Grid"]}),(0,r.jsxs)("button",{onClick:()=>g("list"),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat("list"===p?"bg-brand-green text-white shadow-sm":"text-brand-gray hover:text-white"),children:[(0,r.jsx)("i",{className:"ri-list-check mr-1"})," List"]})]}),(0,r.jsxs)("select",{value:"".concat(f,"-").concat(v),onChange:e=>{let[t,a]=e.target.value.split("-");y(t),w(a)},className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-brand-green",children:[(0,r.jsx)("option",{value:"date-desc",children:"Newest First"}),(0,r.jsx)("option",{value:"date-asc",children:"Oldest First"}),(0,r.jsx)("option",{value:"name-asc",children:"Name A-Z"}),(0,r.jsx)("option",{value:"name-desc",children:"Name Z-A"}),(0,r.jsx)("option",{value:"size-desc",children:"Largest First"}),(0,r.jsx)("option",{value:"size-asc",children:"Smallest First"})]}),(0,r.jsx)("input",{ref:F,type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar",onChange:e=>{let t=Array.from(e.target.files||[]);S(t),t.length>0&&setTimeout(()=>{let e=document.querySelector("[data-upload-form]");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)},className:"hidden"}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("button",{onClick:V,disabled:C,className:"relative overflow-hidden bg-gradient-to-r from-brand-green to-emerald-500 text-white px-6 py-3 rounded-xl font-semibold hover:from-brand-green-dark hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center gap-3 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),(0,r.jsx)("div",{className:"relative z-10 flex items-center gap-3",children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("i",{className:"ri-loader-4-line animate-spin text-lg"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})]}),(0,r.jsx)("span",{className:"font-medium",children:"Uploading..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("i",{className:"ri-upload-cloud-2-line text-lg"}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-yellow-400 rounded-full animate-bounce"})]}),(0,r.jsx)("span",{className:"font-medium",children:"Add Media"}),(0,r.jsx)("i",{className:"ri-arrow-right-line text-sm opacity-70 group-hover:opacity-100 transform group-hover:translate-x-1 transition-all duration-200"})]})})]}),(0,r.jsx)("div",{className:"absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs px-3 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:"Click to browse or drag files here"})]})]})]}),(0,r.jsxs)(l.E.div,{ref:L,onDragEnter:U,onDragLeave:U,onDragOver:U,onDrop:B,className:"relative overflow-hidden bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-lg rounded-2xl p-8 border-2 border-dashed transition-all duration-300 cursor-pointer group ".concat(E?"border-brand-green bg-gradient-to-br from-brand-green/20 to-emerald-500/10 shadow-2xl shadow-brand-green/20 scale-105":"border-white/20 hover:border-brand-green/50 hover:bg-gradient-to-br hover:from-white/10 hover:to-brand-green/5"),onClick:V,whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,r.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,r.jsx)("div",{className:"absolute top-4 left-4 w-8 h-8 border-2 border-brand-green rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"absolute top-8 right-8 w-4 h-4 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),(0,r.jsx)("div",{className:"absolute bottom-8 left-8 w-6 h-6 border-2 border-yellow-400 rotate-45 animate-pulse",style:{animationDelay:"1s"}}),(0,r.jsx)("div",{className:"absolute bottom-4 right-4 w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"1.5s"}})]}),(0,r.jsxs)("div",{className:"relative z-10 text-center",children:[(0,r.jsx)(l.E.div,{className:"mb-6",animate:E?{scale:1.2,rotate:5}:{scale:1,rotate:0},transition:{duration:.3},children:(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsx)("i",{className:"ri-upload-cloud-2-line text-7xl transition-all duration-300 ".concat(E?"text-brand-green drop-shadow-lg":"text-brand-gray group-hover:text-brand-green")}),E&&(0,r.jsx)("div",{className:"absolute inset-0 bg-brand-green/20 rounded-full animate-ping"})]})}),(0,r.jsx)(l.E.h3,{className:"text-xl font-bold mb-3 transition-colors duration-300 ".concat(E?"text-brand-green":"text-white group-hover:text-brand-green"),animate:E?{scale:1.05}:{scale:1},children:E?"\uD83C\uDFAF Drop your files here!":"\uD83D\uDCC1 Drag & drop your media files"}),(0,r.jsx)("p",{className:"text-base mb-6 transition-colors duration-300 ".concat(E?"text-brand-green/80":"text-brand-gray group-hover:text-white"),children:E?"Release to upload":"or click anywhere to browse"}),(0,r.jsxs)(l.E.button,{onClick:e=>{e.stopPropagation(),V()},className:"bg-gradient-to-r from-brand-green to-emerald-500 text-white px-8 py-4 rounded-xl font-semibold hover:from-brand-green-dark hover:to-emerald-600 transition-all duration-300 inline-flex items-center gap-3 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",whileHover:{y:-2},whileTap:{y:0},children:[(0,r.jsx)("i",{className:"ri-folder-open-line text-lg"}),(0,r.jsx)("span",{children:"Browse Files"}),(0,r.jsx)("i",{className:"ri-external-link-line text-sm opacity-70"})]}),(0,r.jsxs)("div",{className:"mt-6 flex flex-wrap justify-center gap-2 text-xs",children:[(0,r.jsx)("span",{className:"bg-white/10 text-brand-gray px-3 py-1 rounded-full border border-white/20",children:"\uD83D\uDCF8 Images"}),(0,r.jsx)("span",{className:"bg-white/10 text-brand-gray px-3 py-1 rounded-full border border-white/20",children:"\uD83C\uDFA5 Videos"}),(0,r.jsx)("span",{className:"bg-white/10 text-brand-gray px-3 py-1 rounded-full border border-white/20",children:"\uD83D\uDCC4 Documents"}),(0,r.jsx)("span",{className:"bg-white/10 text-brand-gray px-3 py-1 rounded-full border border-white/20",children:"\uD83D\uDCE6 Archives"})]}),(0,r.jsxs)("p",{className:"text-xs text-brand-gray/70 mt-4",children:["Maximum file size: ",(0,r.jsx)("span",{className:"text-brand-green font-medium",children:"10MB"})," per file"]})]})]}),(0,r.jsx)(o.M,{children:D.length>0&&(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.3},className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-lg rounded-2xl p-8 border border-white/20 shadow-2xl","data-upload-form":!0,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-brand-green/20 rounded-xl flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-settings-3-line text-brand-green text-lg"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Upload Configuration"}),(0,r.jsxs)("p",{className:"text-brand-gray text-sm",children:[D.length," file",1!==D.length?"s":""," selected"]})]})]}),(0,r.jsx)("button",{onClick:()=>S([]),className:"text-brand-gray hover:text-white transition-colors p-2 hover:bg-white/10 rounded-lg",title:"Clear selection",children:(0,r.jsx)("i",{className:"ri-close-line text-lg"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[(0,r.jsx)("i",{className:"ri-file-list-3-line"}),"Selected Files"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-32 overflow-y-auto",children:D.map((e,t)=>(0,r.jsx)("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("i",{className:"text-lg ".concat(e.type.startsWith("image/")?"ri-image-line text-blue-400":e.type.startsWith("video/")?"ri-video-line text-purple-400":"ri-file-line text-gray-400")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-white text-sm font-medium truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-brand-gray text-xs",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]})},t))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,r.jsx)("i",{className:"ri-text text-brand-green"}),"Alt Text (Accessibility)"]}),(0,r.jsx)("input",{type:"text",value:T.alt_text||"",onChange:e=>A(t=>({...t,alt_text:e.target.value})),className:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-brand-gray focus:outline-none focus:border-brand-green focus:ring-2 focus:ring-brand-green/20 transition-all duration-200",placeholder:"Describe the content for screen readers"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[(0,r.jsx)("i",{className:"ri-user-line text-brand-green"}),"Uploader ID"]}),(0,r.jsx)("input",{type:"number",value:T.uploaded_by||1,onChange:e=>A(t=>({...t,uploaded_by:parseInt(e.target.value)||1})),className:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-brand-gray focus:outline-none focus:border-brand-green focus:ring-2 focus:ring-brand-green/20 transition-all duration-200",placeholder:"User ID",min:"1"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,r.jsx)(l.E.button,{onClick:()=>W(),disabled:C||0===D.length,className:"w-full sm:w-auto bg-gradient-to-r from-brand-green to-emerald-500 text-white px-8 py-4 rounded-xl font-bold hover:from-brand-green-dark hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95",whileHover:{y:-2},whileTap:{y:0},children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("i",{className:"ri-loader-4-line animate-spin text-xl"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})]}),(0,r.jsx)("span",{className:"font-bold",children:"Uploading Files..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"ri-rocket-line text-xl"}),(0,r.jsxs)("span",{className:"font-bold",children:["Upload ",D.length," File",1!==D.length?"s":""]}),(0,r.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:D.length})})]})}),(0,r.jsxs)("button",{onClick:()=>S([]),disabled:C,className:"px-6 py-3 bg-white/10 text-white rounded-xl font-medium hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2",children:[(0,r.jsx)("i",{className:"ri-close-line"}),"Cancel"]})]}),C&&(0,r.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-white font-medium",children:"Upload Progress"}),(0,r.jsxs)("span",{className:"text-brand-green font-bold",children:[N,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:(0,r.jsx)(l.E.div,{className:"bg-gradient-to-r from-brand-green to-emerald-400 h-full rounded-full shadow-lg",initial:{width:0},animate:{width:"".concat(N,"%")},transition:{duration:.3},children:(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-white/0 via-white/30 to-white/0 animate-pulse"})})}),(0,r.jsx)("p",{className:"text-xs text-brand-gray text-center",children:"Uploading files to media library..."})]})]})}),(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/10",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-brand-gray"}),(0,r.jsx)("input",{type:"text",placeholder:"Search by filename, alt text...",value:x,onChange:e=>u(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg pl-10 pr-4 py-3 text-white placeholder-brand-gray focus:outline-none focus:border-brand-green focus:bg-white/15 transition-colors"}),x&&(0,r.jsx)("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-brand-gray hover:text-white",children:(0,r.jsx)("i",{className:"ri-close-line"})})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-brand-green min-w-[120px]",children:[(0,r.jsx)("option",{value:"all",children:"All Types"}),["image","video","document","archive"].map(e=>(0,r.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(x||"all"!==h)&&(0,r.jsx)("button",{onClick:()=>{u(""),b("all")},className:"bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-brand-gray hover:text-white hover:border-brand-green transition-colors",title:"Clear filters",children:(0,r.jsx)("i",{className:"ri-filter-off-line"})})]})]})}),(0,r.jsx)("div",{className:"grid"===p?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:(0,r.jsx)(o.M,{children:I.map(e=>{var t,a,s;return(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid"===p?"bg-white/5 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden hover:border-brand-green/50 transition-all duration-300 group hover:shadow-lg hover:shadow-brand-green/10":"bg-white/5 backdrop-blur-lg rounded-xl border border-white/10 p-4 hover:border-brand-green/50 transition-all duration-300 group hover:shadow-lg hover:shadow-brand-green/10",children:"grid"===p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"aspect-square bg-gray-800 relative overflow-hidden",children:[(null===(t=e.mime_type)||void 0===t?void 0:t.startsWith("image/"))?(0,r.jsx)(d.default,{src:j(e.file_path),alt:e.alt_text||e.original_name,fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, (max-width: 1280px) 33vw, 25vw",className:"object-cover group-hover:scale-105 transition-transform duration-300"}):(null===(a=e.mime_type)||void 0===a?void 0:a.startsWith("video/"))?(0,r.jsxs)("div",{className:"w-full h-full bg-gray-900 flex items-center justify-center relative",children:[(0,r.jsx)("video",{src:j(e.file_path),className:"w-full h-full object-cover",muted:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-play-circle-line text-4xl text-white"})})]}):(0,r.jsxs)("div",{className:"w-full h-full bg-gray-900 flex flex-col items-center justify-center",children:[(0,r.jsx)("i",{className:"".concat(O(e.mime_type||"",e.filename)," text-4xl text-gray-400 mb-2")}),(0,r.jsx)("span",{className:"text-xs text-gray-500 text-center px-2",children:z(e.mime_type||"")})]}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>J(j(e.file_path)),className:"bg-white/20 text-white p-2 rounded-lg hover:bg-white/30 transition-colors",title:"Copy URL",children:(0,r.jsx)("i",{className:"ri-link text-lg"})}),(0,r.jsx)("button",{onClick:()=>R(e),className:"bg-white/20 text-white p-2 rounded-lg hover:bg-white/30 transition-colors",title:"Edit",children:(0,r.jsx)("i",{className:"ri-edit-line text-lg"})}),(0,r.jsx)("button",{onClick:()=>{var t;return H((null===(t=e.id)||void 0===t?void 0:t.toString())||"")},className:"bg-red-500/20 text-red-300 p-2 rounded-lg hover:bg-red-500/30 transition-colors",title:"Delete",children:(0,r.jsx)("i",{className:"ri-delete-bin-line text-lg"})})]})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-green/20 text-brand-green rounded text-xs font-medium",children:z(e.mime_type||"")}),(0,r.jsx)("span",{className:"text-xs text-brand-gray",children:M(e.file_size)})]}),(0,r.jsx)("h4",{className:"text-sm font-medium text-white mb-1 truncate",title:e.original_name,children:e.original_name}),e.alt_text&&(0,r.jsx)("p",{className:"text-xs text-brand-gray mb-2 line-clamp-2",children:e.alt_text}),(0,r.jsx)("div",{className:"text-xs text-brand-gray",children:e.created_at?new Date(e.created_at).toLocaleDateString():"No date"})]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-800 rounded-lg overflow-hidden flex-shrink-0",children:(null===(s=e.mime_type)||void 0===s?void 0:s.startsWith("image/"))?(0,r.jsx)(d.default,{src:j(e.file_path),alt:e.alt_text||e.original_name,width:64,height:64,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("i",{className:"".concat(O(e.mime_type||"",e.filename)," text-xl text-gray-400")})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-white truncate",title:e.original_name,children:e.original_name}),(0,r.jsx)("span",{className:"px-2 py-1 bg-brand-green/20 text-brand-green rounded text-xs font-medium flex-shrink-0",children:z(e.mime_type||"")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-brand-gray",children:[(0,r.jsx)("span",{children:M(e.file_size)}),(0,r.jsx)("span",{children:e.created_at?new Date(e.created_at).toLocaleDateString():"No date"}),e.alt_text&&(0,r.jsxs)("span",{className:"truncate max-w-xs",title:e.alt_text,children:["Alt: ",e.alt_text]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:()=>J(e.file_path),className:"bg-white/10 text-white p-2 rounded-lg hover:bg-white/20 transition-colors",title:"Copy URL",children:(0,r.jsx)("i",{className:"ri-link text-sm"})}),(0,r.jsx)("button",{onClick:()=>R(e),className:"bg-white/10 text-white p-2 rounded-lg hover:bg-white/20 transition-colors",title:"Edit",children:(0,r.jsx)("i",{className:"ri-edit-line text-sm"})}),(0,r.jsx)("button",{onClick:()=>{var t;return H((null===(t=e.id)||void 0===t?void 0:t.toString())||"")},className:"bg-red-500/20 text-red-300 p-2 rounded-lg hover:bg-red-500/30 transition-colors",title:"Delete",children:(0,r.jsx)("i",{className:"ri-delete-bin-line text-sm"})})]})]})},e.id)})})}),0===I.length&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("i",{className:"ri-image-line text-8xl text-brand-gray/50"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:x||"all"!==h?"No matching files found":"No media files yet"}),(0,r.jsx)("p",{className:"text-brand-gray mb-6 max-w-md mx-auto",children:x||"all"!==h?"Try adjusting your search or filter criteria":"Upload your first media files to get started with your media library"}),!x&&"all"===h&&(0,r.jsxs)("button",{onClick:V,className:"bg-brand-green text-white px-6 py-3 rounded-lg hover:bg-brand-green-dark transition-colors inline-flex items-center gap-2",children:[(0,r.jsx)("i",{className:"ri-upload-line"}),"Upload Your First Files"]})]}),(0,r.jsx)(o.M,{children:i&&c&&(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>n(!1),children:(0,r.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-gray-900 rounded-xl border border-white/10 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Edit Media File"})}),(0,r.jsxs)("form",{onSubmit:q,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Alt Text"}),(0,r.jsx)("input",{type:"text",value:T.alt_text||"",onChange:e=>A(t=>({...t,alt_text:e.target.value})),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"Alt text for accessibility"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Uploaded By (User ID)"}),(0,r.jsx)("input",{type:"number",min:"1",value:T.uploaded_by||1,onChange:e=>A(t=>({...t,uploaded_by:parseInt(e.target.value)||1})),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-brand-gray focus:outline-none focus:border-brand-green",placeholder:"User ID"})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,r.jsx)("button",{type:"submit",className:"bg-brand-green text-white px-6 py-3 rounded-lg font-medium hover:bg-brand-green-dark transition-colors",children:"Update Media File"}),(0,r.jsx)("button",{type:"button",onClick:()=>n(!1),className:"bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})})]})}function N(e){let{onUpdate:t}=e,[a,i]=(0,s.useState)({videoType:"youtube",videoUrl:"",youtubeUrl:"https://www.youtube.com/embed/v0rr-M0WfpM?si=nwaZehMCd80OHBqr&autoplay=1&mute=1&loop=1&playlist=v0rr-M0WfpM&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&disablekb=1&fs=0&cc_load_policy=0&playsinline=1&enablejsapi=1",title:"Dubai Ultra HD Background Video",description:"Premium real estate showcase video for the landing page",isActive:!0}),[n,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)(null),[h,b]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{await j(),await v()})()},[]);let v=async()=>{d(!0);try{let e=await fetch("/api/admin/video-settings");if(e.ok){let t=await e.json();if(t.settings){let e={...t.settings,videoType:"upload"===t.settings.videoType?"media":t.settings.videoType};if(i(e),t.settings.selectedMediaId){let e=await fetch("/api/admin/media");if(e.ok){let a=await e.json();if(a.success){let e=a.data.filter(e=>{var t;return null===(t=e.mime_type)||void 0===t?void 0:t.startsWith("video/")}),r=e.find(e=>e.id===t.settings.selectedMediaId);r&&(y(r),b(e))}}}}}}catch(e){u({type:"error",text:"Failed to load video settings"})}finally{d(!1)}},j=async()=>{try{let e=await fetch("/api/admin/media");if(e.ok){let t=await e.json();if(t.success){let e=t.data.filter(e=>{var t;return null===(t=e.mime_type)||void 0===t?void 0:t.startsWith("video/")});b(e)}}}catch(e){}},w=async()=>{m(!0),u(null);try{let e={...a,videoType:"media"===a.videoType?"upload":a.videoType,selectedMediaId:"media"===a.videoType?null==f?void 0:f.id:null,videoUrl:"media"===a.videoType&&f?f.file_path:a.videoUrl},r=await fetch("/api/admin/video-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok)await r.json(),u({type:"success",text:"Video settings saved successfully!"}),null==t||t();else{let e="Failed to save video settings";try{let t=await r.json();e=t.error||t.message||e}catch(t){e="Server error: ".concat(r.status," ").concat(r.statusText)}throw Error(e)}}catch(e){u({type:"error",text:e instanceof Error?e.message:"Failed to save video settings. Please try again."})}finally{m(!1)}},N=e=>{y(e),i(t=>{var a;return{...t,videoType:"media",videoUrl:e.file_path,selectedMediaId:null===(a=e.id)||void 0===a?void 0:a.toString()}}),g(!1),u({type:"success",text:"Video selected successfully!"})},k=()=>{g(!p)},C=e=>{let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null},_=e=>{let t=C(e);return t?"https://www.youtube.com/embed/".concat(t,"?autoplay=1&mute=1&loop=1&playlist=").concat(t,"&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&disablekb=1&fs=0&cc_load_policy=0&playsinline=1&enablejsapi=1"):e},D=e=>{i(t=>({...t,youtubeUrl:e,videoUrl:_(e)}))};return n?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-green-ocean border-t-transparent rounded-full animate-spin"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Video Settings"}),(0,r.jsx)("p",{className:"text-brand-gray",children:"Manage the landing page background video"})]}),(0,r.jsx)("button",{onClick:w,disabled:c,className:"bg-green-ocean text-white px-6 py-2 rounded-lg font-medium hover:bg-green-ocean-light transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"\uD83D\uDCBE"}),"Save Settings"]})})]}),(0,r.jsx)(o.M,{children:x&&(0,r.jsx)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 rounded-lg ".concat("success"===x.type?"bg-green-500/20 border border-green-500/30 text-green-400":"bg-red-500/20 border border-red-500/30 text-red-400"),children:x.text})}),(0,r.jsxs)("div",{className:"bg-luxury-black-light rounded-xl p-6 border border-green-ocean/20",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Video Source"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)("button",{onClick:()=>i(e=>({...e,videoType:"youtube"})),className:"p-4 rounded-lg border-2 transition-all ".concat("youtube"===a.videoType?"border-green-ocean bg-green-ocean/10 text-white":"border-gray-600 bg-gray-700/50 text-gray-300 hover:border-gray-500"),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCFA"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"YouTube Video"}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:"Use a YouTube video URL"})]})]})}),(0,r.jsx)("button",{onClick:()=>i(e=>({...e,videoType:"media"})),className:"p-4 rounded-lg border-2 transition-all ".concat("media"===a.videoType?"border-green-ocean bg-green-ocean/10 text-white":"border-gray-600 bg-gray-700/50 text-gray-300 hover:border-gray-500"),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC1"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"Media Library"}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:"Select from uploaded videos"})]})]})})]})]}),(0,r.jsxs)("div",{className:"bg-luxury-black-light rounded-xl p-6 border border-green-ocean/20",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Video Configuration"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video Title"}),(0,r.jsx)("input",{type:"text",value:a.title,onChange:e=>i(t=>({...t,title:e.target.value})),className:"w-full bg-luxury-black text-white px-4 py-2 rounded-lg border border-green-ocean/20 focus:border-green-ocean focus:outline-none",placeholder:"Enter video title"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:a.description,onChange:e=>i(t=>({...t,description:e.target.value})),rows:3,className:"w-full bg-luxury-black text-white px-4 py-2 rounded-lg border border-green-ocean/20 focus:border-green-ocean focus:outline-none",placeholder:"Enter video description"})]}),"youtube"===a.videoType&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"YouTube URL"}),(0,r.jsx)("input",{type:"url",value:a.youtubeUrl,onChange:e=>D(e.target.value),className:"w-full bg-luxury-black text-white px-4 py-2 rounded-lg border border-green-ocean/20 focus:border-green-ocean focus:outline-none",placeholder:"https://www.youtube.com/watch?v=..."}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Enter a YouTube video URL. It will be automatically converted to an embed URL."})]}),"media"===a.videoType&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Video from Media Library"}),(0,r.jsx)("div",{className:"space-y-3",children:f?(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-luxury-black border border-green-ocean/20 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAC"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:f.original_name}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[(f.file_size/1048576).toFixed(2)," MB"]})]})]}),(0,r.jsx)("button",{onClick:k,className:"px-3 py-1 bg-green-ocean text-white rounded-lg hover:bg-green-ocean-light transition-colors",children:"Change"})]}):(0,r.jsx)("button",{onClick:k,className:"w-full p-4 border-2 border-dashed border-green-ocean/30 rounded-lg text-gray-400 hover:border-green-ocean hover:text-green-400 transition-colors",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsx)("span",{className:"text-4xl",children:"\uD83C\uDFAC"}),(0,r.jsx)("span",{children:"Select Video from Media Library"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Choose from your uploaded videos"})]})})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"video-active",checked:a.isActive,onChange:e=>i(t=>({...t,isActive:e.target.checked})),className:"w-4 h-4 text-green-ocean bg-luxury-black border-green-ocean/20 rounded focus:ring-green-ocean focus:ring-2"}),(0,r.jsx)("label",{htmlFor:"video-active",className:"text-sm font-medium text-gray-300",children:"Enable this video on the landing page"})]})]})]}),(a.videoUrl||a.youtubeUrl)&&(0,r.jsxs)("div",{className:"bg-luxury-black-light rounded-xl p-6 border border-green-ocean/20",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preview"}),(0,r.jsx)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:(0,r.jsx)("iframe",{src:(a.videoType,a.videoUrl),className:"w-full h-full",title:a.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),(0,r.jsx)(o.M,{children:p&&(0,r.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>g(!1),children:(0,r.jsxs)(l.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-luxury-black border border-green-ocean/20 rounded-xl p-6 max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Select Video from Media Library"}),(0,r.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[60vh]",children:0===h.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFAC"}),(0,r.jsx)("p",{className:"text-gray-400",children:"No video files found in media library"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Upload some videos to the media library first"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-green-ocean/50 transition-colors cursor-pointer",onClick:()=>N(e),children:[(0,r.jsx)("div",{className:"aspect-video bg-gray-700 rounded-lg mb-3 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-3xl",children:"\uD83C\uDFAC"})}),(0,r.jsx)("h4",{className:"text-white font-medium truncate mb-1",children:e.original_name}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[(e.file_size/1048576).toFixed(2)," MB"]}),(0,r.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:new Date(e.created_at||0).toLocaleDateString()})]},e.id))})})]})})})]})}var k=a(7476),C=()=>{let[e,t]=(0,s.useState)({deepseek_api_key:"",deepseek_model:"deepseek-chat",deepseek_max_tokens:1e3,deepseek_temperature:.7,default_provider:"deepseek",ai_enabled:!0,rate_limit_per_minute:10,rate_limit_per_hour:100,system_prompt:"You are an expert real estate consultant with comprehensive knowledge of Dubai's real estate market. Your expertise includes:\n\n• Deep understanding of Dubai's property market trends, pricing, and investment opportunities\n• Extensive knowledge of all Dubai neighborhoods, communities, and developments\n• Ability to provide accurate property valuations and market analysis\n• Expert guidance on Dubai's real estate regulations, visa programs, and investment laws\n• Access to current project data and developer information in our portfolio\n• Professional advice on property investment strategies specific to Dubai market\n• Understanding of Dubai's luxury real estate segment and high-end developments\n\nAlways provide:\n- Professional, accurate, and helpful responses\n- Data-driven insights based on current market conditions\n- Specific recommendations tailored to client needs\n- Clear explanations of Dubai's unique real estate advantages\n- Developer-friendly responses that highlight our expertise and services\n\nWhen relevant, guide clients toward our available properties and suggest contacting our team for personalized assistance.",property_suggestions_enabled:!0,property_suggestions_count:4,contact_info_in_responses:!0}),[a,i]=(0,s.useState)(!1),[n,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)({deepseek:!1});(0,s.useEffect)(()=>{m()},[]);let m=async()=>{i(!0);try{let e=await fetch("/api/admin/ai-settings");if(e.ok){let a=await e.json();a.success&&a.data&&t(a.data)}}catch(e){}finally{i(!1)}},x=async()=>{o(!0);try{(await fetch("/api/admin/ai-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?alert("AI API settings saved successfully!"):alert("Failed to save AI API settings")}catch(e){alert("Error saving AI API settings")}finally{o(!1)}},u=(e,a)=>{t(t=>({...t,[e]:a}))},h=e=>{c(t=>({...t,[e]:!t[e]}))},b=async t=>{if("deepseek"!==t){alert("Only DeepSeek provider is supported");return}try{let a=await fetch("/api/admin/ai-settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t,settings:e})}),r=await a.json();r.success?alert("DeepSeek connection successful!"):alert("DeepSeek connection failed: ".concat(r.message))}catch(e){alert("Error testing DeepSeek connection")}};return a?(0,r.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,r.jsx)(k.Bw1,{className:"animate-spin text-2xl text-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading AI settings..."})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(k.Par,{className:"text-2xl text-blue-600"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AI API Control"})]}),(0,r.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,disabled:n,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[n?(0,r.jsx)(k.Bw1,{className:"animate-spin"}):(0,r.jsx)(k.mW3,{}),(0,r.jsx)("span",{children:n?"Saving...":"Save Settings"})]})]}),(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)(k.nbt,{className:"mr-2"}),"General Settings"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Enabled"}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.ai_enabled,onChange:e=>u("ai_enabled",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Enable AI features"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default AI Provider"}),(0,r.jsx)("select",{value:e.default_provider,onChange:e=>u("default_provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,r.jsx)("option",{value:"deepseek",children:"DeepSeek"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rate Limit (per minute)"}),(0,r.jsx)("input",{type:"number",value:e.rate_limit_per_minute,onChange:e=>u("rate_limit_per_minute",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rate Limit (per hour)"}),(0,r.jsx)("input",{type:"number",value:e.rate_limit_per_hour,onChange:e=>u("rate_limit_per_hour",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"1000"})]})]})]}),(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[(0,r.jsx)(k.Wqx,{className:"mr-2 text-orange-600"}),"DeepSeek Configuration"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:d.deepseek?"text":"password",value:e.deepseek_api_key,onChange:e=>u("deepseek_api_key",e.target.value),className:"w-full px-3 py-2 pr-20 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"sk-..."}),(0,r.jsxs)("div",{className:"absolute right-2 top-2 flex space-x-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>h("deepseek"),className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:d.deepseek?(0,r.jsx)(k.rzC,{}):(0,r.jsx)(k.rDJ,{})}),(0,r.jsx)("button",{type:"button",onClick:()=>b("deepseek"),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:(0,r.jsx)(k.RsK,{})})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Model"}),(0,r.jsxs)("select",{value:e.deepseek_model,onChange:e=>u("deepseek_model",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"deepseek-chat",children:"DeepSeek Chat"}),(0,r.jsx)("option",{value:"deepseek-coder",children:"DeepSeek Coder"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Tokens"}),(0,r.jsx)("input",{type:"number",value:e.deepseek_max_tokens,onChange:e=>u("deepseek_max_tokens",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"4000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Temperature"}),(0,r.jsx)("input",{type:"number",step:"0.1",value:e.deepseek_temperature,onChange:e=>u("deepseek_temperature",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"2"})]})]})]}),(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[(0,r.jsx)(k.Wqx,{className:"mr-2 text-indigo-600"}),"AI Behavior Configuration"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"System Prompt"}),(0,r.jsx)("textarea",{value:e.system_prompt,onChange:e=>u("system_prompt",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Define how the AI should behave and respond to users..."}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This prompt defines the AI's personality and expertise. It will be used for all AI responses."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"property_suggestions_enabled",checked:e.property_suggestions_enabled,onChange:e=>u("property_suggestions_enabled",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded"}),(0,r.jsx)("label",{htmlFor:"property_suggestions_enabled",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Enable Property Suggestions"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Suggestions Count"}),(0,r.jsx)("input",{type:"number",value:e.property_suggestions_count,onChange:e=>u("property_suggestions_count",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"10",disabled:!e.property_suggestions_enabled})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[(0,r.jsx)("strong",{children:"Property Suggestions:"})," When enabled, the AI will suggest relevant properties to visitors based on their inquiries."]})})]})]})]})},_=a(2844);function D(e){let{onUpdate:t}=e,[a,i]=(0,s.useState)({facebook:"",instagram:"",twitter:"",linkedin:"",youtube:"",tiktok:"",whatsapp:"",telegram:""}),[n,o]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)({});(0,s.useEffect)(()=>{g()},[]);let u=e=>{if(!e)return!0;try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}},h=(e,t)=>{if(!t)return{isValid:!0};if(!u(t))return{isValid:!1,error:"Invalid URL format"};let a={facebook:/^https?:\/\/(www\.)?(facebook|fb)\.com\/.+/i,instagram:/^https?:\/\/(www\.)?instagram\.com\/.+/i,twitter:/^https?:\/\/(www\.)?(twitter|x)\.com\/.+/i,linkedin:/^https?:\/\/(www\.)?linkedin\.com\/(company|in)\/.+/i,youtube:/^https?:\/\/(www\.)?(youtube\.com\/(channel|c|user)\/|youtu\.be\/).+/i,tiktok:/^https?:\/\/(www\.)?tiktok\.com\/@.+/i,whatsapp:/^https?:\/\/(wa\.me|api\.whatsapp\.com)\/.+/i,telegram:/^https?:\/\/(t\.me|telegram\.me)\/.+/i}[e];return a&&!a.test(t)?{isValid:!1,error:"Invalid ".concat(e," URL format")}:{isValid:!0}},b=async e=>{if(!e)return!0;try{let t=await fetch("/api/verify-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});return(await t.json()).accessible}catch(e){return!0}},p=async()=>{let e=Object.keys(a),t=!0,r={};for(let s of e){let e=a[s];if(e){x(e=>({...e,[s]:{isValid:!1,isVerifying:!0}}));let a=h(s,e);if(a.isValid){let a=await b(e);r[s]={isValid:a,isVerifying:!1,error:a?void 0:"URL is not accessible"},a||(t=!1)}else r[s]={isValid:!1,isVerifying:!1,error:a.error},t=!1}else r[s]={isValid:!0,isVerifying:!1}}return x(r),t},g=async()=>{try{var e;let t=await fetch("/api/admin/settings"),a=await t.json();a.success&&(null===(e=a.data)||void 0===e?void 0:e.social)&&i(e=>({...e,...a.data.social}))}catch(e){}finally{o(!1)}},f=async()=>{c(!0);try{if(!await p()){alert("Please fix the invalid URLs before saving."),c(!1);return}let e=await fetch("/api/admin/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({social:a})}),r=await e.json();if(e.ok){(0,_.Al)(a);try{await fetch("/api/admin/settings/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"social_media_update",settings:a})})}catch(e){}alert("Social media settings updated successfully!"),t()}else alert("Error: ".concat(r.message||"Failed to update settings"))}catch(e){alert("Error saving settings. Please try again.")}finally{c(!1)}},y=(e,t)=>{if(i(a=>({...a,[e]:t})),t){let a=h(e,t);x(t=>({...t,[e]:{isValid:a.isValid,isVerifying:!1,error:a.error}}))}else x(t=>({...t,[e]:{isValid:!0,isVerifying:!1}}))},v=async e=>{let t=a[e];if(!t)return;x(t=>({...t,[e]:{...t[e],isVerifying:!0}}));let r=await b(t);x(t=>({...t,[e]:{isValid:r,isVerifying:!1,error:r?void 0:"URL is not accessible"}}))},j=[{key:"facebook",label:"Facebook",icon:"\uD83D\uDCD8",placeholder:"https://facebook.com/yourpage",color:"from-blue-600 to-blue-700"},{key:"instagram",label:"Instagram",icon:"\uD83D\uDCF7",placeholder:"https://instagram.com/youraccount",color:"from-pink-500 to-purple-600"},{key:"twitter",label:"Twitter/X",icon:"\uD83D\uDC26",placeholder:"https://twitter.com/youraccount",color:"from-blue-400 to-blue-500"},{key:"linkedin",label:"LinkedIn",icon:"\uD83D\uDCBC",placeholder:"https://linkedin.com/company/yourcompany",color:"from-blue-700 to-blue-800"},{key:"youtube",label:"YouTube",icon:"\uD83D\uDCFA",placeholder:"https://youtube.com/channel/yourchannel",color:"from-red-500 to-red-600"},{key:"tiktok",label:"TikTok",icon:"\uD83C\uDFB5",placeholder:"https://tiktok.com/@youraccount",color:"from-gray-800 to-gray-900"},{key:"whatsapp",label:"WhatsApp",icon:"\uD83D\uDCAC",placeholder:"https://wa.me/1234567890",color:"from-green-500 to-green-600"},{key:"telegram",label:"Telegram",icon:"✈️",placeholder:"https://t.me/yourchannel",color:"from-blue-500 to-blue-600"}];return n?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Social Media Management"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your social media links and presence"})]}),(0,r.jsx)("button",{onClick:f,disabled:d,className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCBE"}),"Save Changes"]})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:j.map(e=>{var t,s,i;return(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r ".concat(e.color," rounded-lg flex items-center justify-center text-white text-xl"),children:e.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.label}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Social media profile URL"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Profile URL"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"url",value:a[e.key],onChange:t=>y(e.key,t.target.value),placeholder:e.placeholder,className:"w-full bg-gray-50 dark:bg-gray-700 border rounded-lg px-4 py-3 pr-12 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:border-transparent transition-all duration-200 ".concat(a[e.key]&&m[e.key]?m[e.key].isValid?"border-green-300 dark:border-green-600 focus:ring-green-500":"border-red-300 dark:border-red-600 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500")}),a[e.key]&&m[e.key]&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:m[e.key].isVerifying?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):m[e.key].isValid?(0,r.jsx)("span",{className:"text-green-500 text-lg",children:"✓"}):(0,r.jsx)("span",{className:"text-red-500 text-lg",children:"✗"})})]}),a[e.key]&&(null===(t=m[e.key])||void 0===t?void 0:t.error)&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-500 dark:text-red-400 text-sm",children:[(0,r.jsx)("span",{className:"text-red-500",children:"⚠️"}),m[e.key].error]}),a[e.key]&&(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,r.jsx)("a",{href:a[e.key],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 text-sm flex items-center gap-1 transition-colors",children:"\uD83D\uDD17 Test Link"}),(0,r.jsx)("button",{onClick:()=>v(e.key),disabled:null===(s=m[e.key])||void 0===s?void 0:s.isVerifying,className:"text-purple-500 hover:text-purple-600 dark:text-purple-400 dark:hover:text-purple-300 text-sm flex items-center gap-1 transition-colors disabled:opacity-50",children:(null===(i=m[e.key])||void 0===i?void 0:i.isVerifying)?(0,r.jsx)(r.Fragment,{children:"\uD83D\uDD04 Verifying..."}):(0,r.jsx)(r.Fragment,{children:"\uD83D\uDD0D Verify URL"})}),(0,r.jsx)("button",{onClick:()=>y(e.key,""),className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 text-sm transition-colors",children:"Clear"})]})]})]},e.key)})}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 border border-blue-200 dark:border-gray-600",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDC40"}),"Social Media Preview"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:j.filter(e=>a[e.key]).map(e=>(0,r.jsxs)("a",{href:a[e.key],target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-gradient-to-r ".concat(e.color," text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-200 transform hover:scale-105"),children:[(0,r.jsx)("span",{children:e.icon}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.key))}),0===j.filter(e=>a[e.key]).length&&(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No social media links configured yet. Add some links above to see the preview."})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-3 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"}),"Tips for Social Media Management"]}),(0,r.jsxs)("ul",{className:"space-y-2 text-yellow-700 dark:text-yellow-300 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"•"}),"Use complete URLs including https:// for all social media links"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"•"}),"URLs are automatically validated for format and platform compatibility"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"•"}),'Use the "Verify URL" button to check if links are accessible online']}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"•"}),"Green checkmarks indicate valid URLs, red X marks show errors"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"•"}),"Keep your social media profiles updated and active for better engagement"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"•"}),"Use consistent branding across all social media platforms"]})]})]})]})}let S=[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA",description:"Dashboard overview and analytics"},{id:"projects",label:"Projects",icon:"\uD83C\uDFE2",description:"Manage real estate projects"},{id:"developers",label:"Developers",icon:"\uD83D\uDC65",description:"Manage developer profiles"},{id:"articles",label:"Articles",icon:"\uD83D\uDCDD",description:"Create and manage articles"},{id:"media",label:"Media",icon:"\uD83D\uDCC1",description:"File and media management"},{id:"social-media",label:"Social Media",icon:"\uD83C\uDF10",description:"Manage social media links"},{id:"video-settings",label:"Video Settings",icon:"\uD83C\uDFAC",description:"Manage landing page video"},{id:"ai-api-control",label:"AI API Control",icon:"\uD83E\uDD16",description:"AI settings and controls"}];function E(e){var t,a;let{onLogout:i}=e,[n,d]=(0,s.useState)("overview"),[m,u]=(0,s.useState)(!0),[h,b]=(0,s.useState)(!1),[p,g]=(0,s.useState)({projects:!1,developers:!1,articles:!1,media:!1,settings:!1}),[f,y]=(0,s.useState)([]),[j,k]=(0,s.useState)([]),[_,E]=(0,s.useState)([]),[T,A]=(0,s.useState)([]),[F,L]=(0,s.useState)(null),[I,M]=(0,s.useState)([]),U=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(f.length>0)||e){g(e=>({...e,projects:!0}));try{let e=await z("/api/admin/projects");e.success&&y(e.data)}catch(e){y([])}finally{g(e=>({...e,projects:!1}))}}},[f.length]),B=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(j.length>0)||e){g(e=>({...e,developers:!0}));try{let e=await z("/api/admin/developers");e.success&&k(e.data)}catch(e){k([])}finally{g(e=>({...e,developers:!1}))}}},[j.length]),V=(0,s.useCallback)(async()=>{if(!(_.length>0)){g(e=>({...e,articles:!0}));try{let e=await z("/api/admin/articles");e.success&&E(e.data)}catch(e){E([])}finally{g(e=>({...e,articles:!1}))}}},[_.length]),z=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let r=0;r<t;r++)try{let t=new AbortController,a=setTimeout(()=>t.abort(),1e4),r=await fetch(e,{signal:t.signal,cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(clearTimeout(a),!r.ok)throw Error("HTTP ".concat(r.status,": ").concat(r.statusText));return await r.json()}catch(e){if("AbortError"===e.name);else if(r===t-1)throw e;r<t-1&&await new Promise(e=>setTimeout(e,a*(r+1)))}},O=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(T.length>0)||e){g(e=>({...e,media:!0}));try{let e=await z("/api/admin/media");e.success&&A(e.data)}catch(e){A([])}finally{g(e=>({...e,media:!1}))}}},[T.length]),W=(0,s.useCallback)(async()=>{await O(!0)},[O]),R=(0,s.useCallback)(async()=>{if(!F){g(e=>({...e,settings:!0}));try{let e=await z("/api/admin/settings");e.success&&L(e.data)}catch(e){L(null)}finally{g(e=>({...e,settings:!1}))}}},[F]),q=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/admin/activities?frontend=true&limit=10"),t=await e.json();t.success&&M(t.data)}catch(e){M([])}},[]),H=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];b(!0);try{if("overview"===n)await Promise.all([U(e),B(e)]),setTimeout(()=>{Promise.all([V(),O(),q()])},100);else switch(n){case"projects":await U(e);break;case"developers":await B(e);break;case"articles":await V();break;case"media":await O();break;case"settings":await R()}}catch(e){}finally{b(!1)}},[n,U,B,V,O,R]);return(0,s.useEffect)(()=>{H()},[H]),(0,s.useEffect)(()=>{let e=()=>{"true"===localStorage.getItem("admin_refresh_needed")&&(localStorage.removeItem("admin_refresh_needed"),H(!0))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[H]),(0,s.useEffect)(()=>{let e=e=>{"developer_added"===e.key&&(B(!0),localStorage.removeItem("developer_added"))};window.addEventListener("storage",e);let t=()=>{localStorage.getItem("developer_added")&&(B(!0),localStorage.removeItem("developer_added"))};return window.addEventListener("focus",t),localStorage.getItem("developer_added")&&(B(!0),localStorage.removeItem("developer_added")),()=>{window.removeEventListener("storage",e),window.removeEventListener("focus",t)}},[B]),(0,r.jsx)("div",{className:"admin-panel min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",style:{pointerEvents:"auto"},children:(0,r.jsx)("div",{className:"flex",style:{pointerEvents:"auto"},children:(0,r.jsxs)("main",{className:"flex-1 bg-gray-50 dark:bg-gray-900 overflow-auto flex",style:{pointerEvents:"auto"},children:[(0,r.jsxs)("div",{className:"flex-1 p-6",children:[(0,r.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 rounded-lg mb-6",children:(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null===(t=S.find(e=>e.id===n))||void 0===t?void 0:t.label)||"Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:(null===(a=S.find(e=>e.id===n))||void 0===a?void 0:a.description)||"Manage your website"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Welcome back, Admin"}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),i()},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer",style:{pointerEvents:"auto"},children:"Logout"})]})]})})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 min-h-[calc(100vh-200px)]",style:{pointerEvents:"auto"},children:(0,r.jsx)("div",{className:"p-6",style:{pointerEvents:"auto"},children:(0,r.jsx)(o.M,{mode:"wait",children:(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",style:{pointerEvents:"auto"},children:(()=>{if(h&&"overview"===n&&0===f.length&&0===j.length)return(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-ocean"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading dashboard..."})]})});switch(n){case"overview":return(0,r.jsx)(P,{projects:f,developers:j,articles:_,mediaFiles:T,activities:I,loadingStates:p});case"projects":return(0,r.jsx)(c,{projects:f,onUpdate:H});case"developers":return(0,r.jsx)(x,{developers:j,onUpdate:H});case"articles":return(0,r.jsx)(v,{articles:_,mediaFiles:T,onUpdate:H});case"media":return(0,r.jsx)(w,{mediaFiles:T,onUpdate:W});case"social-media":return(0,r.jsx)(D,{onUpdate:H});case"video-settings":return(0,r.jsx)(N,{onUpdate:H});case"ai-api-control":return(0,r.jsx)(C,{});default:return(0,r.jsx)(P,{projects:f,developers:j,articles:_,mediaFiles:T,activities:I})}})()},n)})})})]}),(0,r.jsxs)("aside",{className:"w-80 bg-white dark:bg-gray-800 shadow-lg border-l border-gray-200 dark:border-gray-700 flex flex-col",style:{pointerEvents:"auto"},children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Navigation"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select a section to manage"})]}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:S.map(e=>(0,r.jsx)("button",{onClick:()=>{d(e.id)},className:"w-full text-left p-4 rounded-lg transition-all duration-200 cursor-pointer group ".concat(n===e.id?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300":"bg-gray-50 dark:bg-gray-700/50 border-2 border-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:border-gray-200 dark:hover:border-gray-600"),style:{pointerEvents:"auto"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs opacity-75 mt-1",children:e.description})]})]})},e.id))})]})]})})})}function P(e){let{projects:t,developers:a,articles:s,mediaFiles:i,activities:n,loadingStates:o}=e;return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard Overview"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Welcome to your admin dashboard"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-6 border border-blue-200 dark:border-blue-700/50 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>{},style:{pointerEvents:"auto"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Total Projects"}),(null==o?void 0:o.projects)?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Loading..."})]}):(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xl",children:"\uD83C\uDFE2"})})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-6 border border-green-200 dark:border-green-700/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Developers"}),(null==o?void 0:o.developers)?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Loading..."})]}):(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xl",children:"\uD83D\uDC65"})})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Articles"}),(null==o?void 0:o.articles)?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Loading..."})]}):(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xl",children:"\uD83D\uDCDD"})})]})}),(0,r.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-xl p-6 border border-orange-200 dark:border-orange-700/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Media Files"}),(null==o?void 0:o.media)?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Loading..."})]}):(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.length})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xl",children:"\uD83D\uDCC1"})})]})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-8 border border-gray-200 dark:border-gray-600",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("button",{className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("span",{className:"text-lg",children:"➕"}),"Add New Project"]}),(0,r.jsxs)("button",{className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDD"}),"Create Article"]}),(0,r.jsxs)("button",{className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE4"}),"Upload Media"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-8 border border-gray-200 dark:border-gray-600",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Recent Activity"}),(0,r.jsx)("div",{className:"space-y-4",children:n.length>0?n.slice(0,5).map((e,t)=>(0,r.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-".concat((e=>{switch(e.toLowerCase()){case"error":return"red";case"warning":return"yellow";case"success":return"green";case"info":return"blue";default:return"gray"}})(e.level),"-500 rounded-lg flex items-center justify-center"),children:(0,r.jsx)("span",{className:"text-white text-lg",children:(e=>{switch(e.toLowerCase()){case"project":return"\uD83C\uDFE2";case"article":return"\uD83D\uDCDD";case"developer":return"\uD83D\uDC65";case"media":return"\uD83D\uDCC1";case"user":return"\uD83D\uDC64";case"system":return"⚙️";default:return"\uD83D\uDCCB"}})(e.category)})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-gray-900 dark:text-white font-medium",children:e.message}),e.details&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"string"==typeof e.details?e.details:JSON.stringify(e.details)})]}),(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:(e=>{let t=new Date(e),a=new Date().getTime()-t.getTime(),r=Math.floor(a/36e5),s=Math.floor(r/24);if(s>0)return"".concat(s," day").concat(s>1?"s":""," ago");if(r>0)return"".concat(r," hour").concat(r>1?"s":""," ago");{let e=Math.floor(a/6e4);return"".concat(e," minute").concat(e>1?"s":""," ago")}})(e.timestamp)})]},e.id)):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent activity"})})})]})]})}function T(){let[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{localStorage.getItem("admin_token")&&t(!0),l(!1)},[]),a)?(0,r.jsx)("div",{className:"min-h-screen bg-brand-dark flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-green-ocean border-t-transparent rounded-full animate-spin"})}):e?(0,r.jsx)(E,{onLogout:()=>{localStorage.removeItem("admin_token"),t(!1)}}):(0,r.jsx)(n,{onLogin:e=>{localStorage.setItem("admin_token",e),t(!0)}})}},2844:function(e,t,a){"use strict";a.d(t,{Al:function(){return f},uV:function(){return g}});var r=a(2265);let s={},l=!1,i=null,n=!1,o=new Set,d=e=>(o.add(e),()=>{o.delete(e)}),c=()=>{o.forEach(e=>e())},m=async()=>{if(!l)try{var e;l=!0,i=null,c();let t=new AbortController,a=setTimeout(()=>t.abort(),8e3),r=await fetch("/api/admin/settings",{signal:t.signal,headers:{"Cache-Control":"no-cache",Accept:"application/json"}});if(clearTimeout(a),!r.ok){s={};return}let n=await r.json();s=n.success&&(null===(e=n.data)||void 0===e?void 0:e.social)?n.data.social:{}}catch(e){e instanceof Error&&"AbortError"!==e.name&&"TypeError"!==e.name&&(i="Failed to load social media settings"),s={}}finally{l=!1,c()}},x=null,u=!1,h=()=>{u||(u=!0,b())},b=()=>{x||(x=setInterval(async()=>{try{var e;let t=new AbortController,a=setTimeout(()=>t.abort(),8e3),r=await fetch("/api/admin/settings",{signal:t.signal,headers:{"Cache-Control":"no-cache",Accept:"application/json"}});if(clearTimeout(a),!r.ok)return;let l=await r.json();if(l.success&&(null===(e=l.data)||void 0===e?void 0:e.social)){let e=l.data.social;JSON.stringify(e)!==JSON.stringify(s)&&(s=e,c())}}catch(e){e instanceof Error&&"AbortError"!==e.name&&e.name}},3e5))},p=()=>{x&&(clearInterval(x),x=null),u=!1},g=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[t,a]=(0,r.useState)({socialMedia:s,loading:l,error:i});(0,r.useEffect)(()=>d(()=>{a({socialMedia:s,loading:l,error:i})}),[]),(0,r.useEffect)(()=>(n||(n=!0,m()),e&&h(),()=>{e&&p()}),[e]);let o=(0,r.useCallback)(async()=>{await m()},[]);return{socialMedia:t.socialMedia,loading:t.loading,error:t.error,refetch:o}},f=e=>{s=e,l=!1,i=null,c()}}},function(e){e.O(0,[956,138,648,842,504,971,23,744],function(){return e(e.s=9323)}),_N_E=e.O()}]);