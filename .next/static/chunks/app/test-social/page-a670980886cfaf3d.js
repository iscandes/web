(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{9125:function(e,a,n){Promise.resolve().then(n.bind(n,7934))},7934:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return i}});var t=n(7437),r=n(2844),s=n(2265);function i(){let{socialMedia:e,loading:a,error:n}=(0,r.uV)(!0);return(0,s.useEffect)(()=>{},[e,a,n]),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Social Media Test Page"}),(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded mb-4",children:[(0,t.jsx)("h2",{className:"font-bold mb-2",children:"Hook State:"}),(0,t.jsxs)("p",{children:["Loading: ",a?"true":"false"]}),(0,t.jsxs)("p",{children:["Error: ",n||"none"]}),(0,t.jsxs)("p",{children:["Social Media Keys: ",Object.keys(e||{}).length]})]}),(0,t.jsxs)("div",{className:"bg-blue-100 p-4 rounded mb-4",children:[(0,t.jsx)("h2",{className:"font-bold mb-2",children:"Social Media Data:"}),(0,t.jsx)("pre",{className:"text-xs overflow-auto",children:JSON.stringify(e,null,2)})]}),(0,t.jsxs)("div",{className:"bg-green-100 p-4 rounded",children:[(0,t.jsx)("h2",{className:"font-bold mb-2",children:"Active Links:"}),Object.entries(e||{}).map(e=>{let[a,n]=e;return n&&"string"==typeof n&&""!==n.trim()?(0,t.jsx)("div",{className:"mb-1",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("strong",{children:[a,":"]})," ",n]})},a):null})]})]})}},2844:function(e,a,n){"use strict";n.d(a,{Al:function(){return j},uV:function(){return p}});var t=n(2265);let r={},s=!1,i=null,l=!1,o=new Set,c=e=>(o.add(e),()=>{o.delete(e)}),d=()=>{o.forEach(e=>e())},u=async()=>{if(!s)try{var e;s=!0,i=null,d();let a=new AbortController,n=setTimeout(()=>a.abort(),8e3),t=await fetch("/api/admin/settings",{signal:a.signal,headers:{"Cache-Control":"no-cache",Accept:"application/json"}});if(clearTimeout(n),!t.ok){r={};return}let l=await t.json();r=l.success&&(null===(e=l.data)||void 0===e?void 0:e.social)?l.data.social:{}}catch(e){e instanceof Error&&"AbortError"!==e.name&&"TypeError"!==e.name&&(i="Failed to load social media settings"),r={}}finally{s=!1,d()}},f=null,h=!1,m=()=>{h||(h=!0,b())},b=()=>{f||(f=setInterval(async()=>{try{var e;let a=new AbortController,n=setTimeout(()=>a.abort(),8e3),t=await fetch("/api/admin/settings",{signal:a.signal,headers:{"Cache-Control":"no-cache",Accept:"application/json"}});if(clearTimeout(n),!t.ok)return;let s=await t.json();if(s.success&&(null===(e=s.data)||void 0===e?void 0:e.social)){let e=s.data.social;JSON.stringify(e)!==JSON.stringify(r)&&(r=e,d())}}catch(e){e instanceof Error&&"AbortError"!==e.name&&e.name}},3e5))},g=()=>{f&&(clearInterval(f),f=null),h=!1},p=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[a,n]=(0,t.useState)({socialMedia:r,loading:s,error:i});(0,t.useEffect)(()=>c(()=>{n({socialMedia:r,loading:s,error:i})}),[]),(0,t.useEffect)(()=>(l||(l=!0,u()),e&&m(),()=>{e&&g()}),[e]);let o=(0,t.useCallback)(async()=>{await u()},[]);return{socialMedia:a.socialMedia,loading:a.loading,error:a.error,refetch:o}},j=e=>{r=e,s=!1,i=null,d()}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9125)}),_N_E=e.O()}]);